{"ast":null,"code":"var _jsxFileName = \"/Users/nicholaspatrikeos/Sites/Gallifrey4.0/gallifrey-frontend/src/components/Manage.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport '../App.css';\nimport AuthContext from '../AuthContext';\nimport { useStep } from '../utils/update';\nimport { startReorder, finishReorder } from '../utils/helperFunctions';\n\nfunction Manage({\n  type,\n  object_id\n}, ...props) {\n  var headerTitle;\n  const [topic, setTopic] = React.useState({\n    name: \"\",\n    topic_id: 0,\n    taskgroups: []\n  });\n  const token = React.useContext(AuthContext);\n  console.log(object_id);\n\n  const fetchTopicData = () => {\n    const topic_id = object_id;\n    const getTopic = axios.get('/topics/details', {\n      params: {\n        token,\n        topic_id\n      }\n    }).then(topicResponse => {\n      const topicData = topicResponse.data.topic;\n      console.log(topicData);\n      setTopic(topicData);\n      console.log(topic);\n    });\n  };\n\n  function deleteTaskGroup(taskgroup_id) {\n    axios.delete('/taskgroups/delete', {\n      data: {\n        token,\n        taskgroup_id\n      }\n    }).then(response => {\n      const data = response.data;\n      window.location.reload();\n    }).catch(err => {});\n  }\n\n  function deleteTask(task_id) {\n    axios.delete('/tasks/delete', {\n      data: {\n        token,\n        task_id\n      }\n    }).then(response => {\n      const data = response.data;\n      window.location.reload();\n    }).catch(err => {});\n  }\n\n  function reorderTaskGroups(element) {\n    if (!element.reordering) {\n      element.className = \"redTeacherButton\";\n      element.reordering = true;\n      element.style.display.backgroundColor = '#dd514c';\n      element.style.color = 'white';\n      startReorder('#taskGroupList tr');\n    } else {\n      finishReorder('#taskGroupList tr');\n      element.reordering = false;\n      var tableRows = document.querySelectorAll('#taskGroupList tr');\n      var newTaskGroupList = [];\n\n      for (var row = 1; row < tableRows.length; row++) {\n        newTaskGroupList.push(tableRows[row].childNodes[0].id);\n      }\n\n      axios.put('/taskgroups/reorder', {\n        token,\n        newTaskGroupList\n      }).then(response => {\n        console.log(response);\n        window.location.reload();\n      }).catch(err => {});\n    }\n  }\n\n  const step = useStep(fetchTopicData, [], 2);\n\n  if (type == 'topic') {\n    headerTitle = 'Topic Management';\n  } else {}\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"headerSection\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, headerTitle)), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, \"Title\"), /*#__PURE__*/React.createElement(\"p\", {\n    id: \"topicTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, topic.name), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }, \"Courses\"), /*#__PURE__*/React.createElement(\"p\", {\n    id: \"topicCourses\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }\n  }, \"##TODO\"), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, \"Task Groups\"), /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/taskgroups/add',\n      topic_id: object_id,\n      topic_name: topic.name\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"teacherButton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, \"New Task Group\")), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"teacherButton\",\n    id: \"reorderTaskGroupsButton\",\n    onClick: reorderTaskGroups,\n    reordering: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, \"Reorder Task Groups\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"table\", {\n    id: \"taskGroupList\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 15\n    }\n  }, \"Title\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 29\n    }\n  }, \"Tasks\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 43\n    }\n  }, \"Actions\")), topic.taskgroups.map(({\n    taskgroup_id,\n    name,\n    tasks\n  }, index) => /*#__PURE__*/React.createElement(\"tr\", {\n    id: taskgroup_id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 15\n    }\n  }, name), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 15\n    }\n  }, tasks.length), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/taskgroups/edit',\n      topic_name: topic.name,\n      taskgroup_id: taskgroup_id,\n      taskgroup_name: name\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, \"Edit \"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/taskgroups/move\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, \"Move \"), /*#__PURE__*/React.createElement(Link, {\n    onClick: () => deleteTaskGroup(taskgroup_id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 17\n    }\n  }, \"Delete\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"tasksList\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }, topic.taskgroups.map(({\n    taskgroup_id,\n    name,\n    tasks\n  }, index) => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  }, name), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"teacherButton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/tasks/add',\n      taskgroup_id: taskgroup_id,\n      topic_name: topic.name,\n      taskgroup_name: name\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, \"New Task\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"reorderTasksButton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }\n  }, \"Reorder Tasks\"), /*#__PURE__*/React.createElement(\"table\", {\n    id: \"taskgroup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 30\n    }\n  }, \"Difficulty\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 49\n    }\n  }, \"Actions\")), tasks.map(({\n    task_id,\n    name,\n    difficulty\n  }, index) => /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/tasks/view',\n      task_id: task_id,\n      topic_name: topic.name\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 21\n    }\n  }, name)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, difficulty), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/tasks/edit',\n      task_id: task_id,\n      topic_name: topic.name\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 19\n    }\n  }, \"Edit \"), /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/tasks/attachments',\n      task_id: task_id,\n      task_name: name,\n      topic_name: topic.name\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 19\n    }\n  }, \"Attachments \"), /*#__PURE__*/React.createElement(Link, {\n    onClick: () => deleteTask(task_id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 19\n    }\n  }, \"Delete\")))))))));\n} // <div className='teacherButton' id='reorderTasksButton'>Reorder Tasks</div>\n\n\nexport default Manage;","map":{"version":3,"sources":["/Users/nicholaspatrikeos/Sites/Gallifrey4.0/gallifrey-frontend/src/components/Manage.js"],"names":["React","axios","Link","AuthContext","useStep","startReorder","finishReorder","Manage","type","object_id","props","headerTitle","topic","setTopic","useState","name","topic_id","taskgroups","token","useContext","console","log","fetchTopicData","getTopic","get","params","then","topicResponse","topicData","data","deleteTaskGroup","taskgroup_id","delete","response","window","location","reload","catch","err","deleteTask","task_id","reorderTaskGroups","element","reordering","className","style","display","backgroundColor","color","tableRows","document","querySelectorAll","newTaskGroupList","row","length","push","childNodes","id","put","step","pathname","topic_name","map","tasks","index","taskgroup_name","difficulty","task_name"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\nimport { startReorder, finishReorder } from '../utils/helperFunctions'\n\nfunction Manage({ type, object_id }, ...props) {\n  var headerTitle;\n  const [topic, setTopic] = React.useState({ name: \"\", topic_id: 0, taskgroups: []})\n  const token = React.useContext(AuthContext)\n\n  console.log(object_id)\n  const fetchTopicData = () => {\n    const topic_id = object_id\n    const getTopic = axios.get('/topics/details', {params: { token, topic_id }})\n    .then((topicResponse) => {\n      const topicData = topicResponse.data.topic\n      console.log(topicData)\n      setTopic(topicData)\n      console.log(topic)\n    })\n  }\n\n  function deleteTaskGroup(taskgroup_id) {\n    axios.delete('/taskgroups/delete', {data: { token, taskgroup_id }})\n      .then((response) => {\n        const data = response.data\n        window.location.reload()\n      })\n      .catch((err) => {})\n  }\n\n  function deleteTask(task_id) {\n    axios.delete('/tasks/delete', {data: { token, task_id }})\n      .then((response) => {\n        const data = response.data\n        window.location.reload()\n      })\n      .catch((err) => {})\n  }\n\n  function reorderTaskGroups(element) {\n\n    if (!element.reordering) {\n      element.className = \"redTeacherButton\"\n      element.reordering = true\n      element.style.display.backgroundColor = '#dd514c'\n      element.style.color = 'white'\n      \n      startReorder('#taskGroupList tr')\n    } else {\n      finishReorder('#taskGroupList tr')\n      element.reordering = false\n      var tableRows = document.querySelectorAll('#taskGroupList tr')\n\n      var newTaskGroupList = []\n\n      for (var row = 1; row < tableRows.length; row++) {\n        newTaskGroupList.push(tableRows[row].childNodes[0].id)\n      }\n\n      axios.put('/taskgroups/reorder', { token, newTaskGroupList })\n        .then((response) => {\n          console.log(response)\n          window.location.reload()\n        })\n        .catch((err) => {})\n\n    }\n\n  }\n\n  const step = useStep(fetchTopicData, [], 2)\n\n  if (type == 'topic') {\n    headerTitle = 'Topic Management'\n  } else {}\n\n  return (\n    <>\n      <div className='headerSection'>\n        <h1>{headerTitle}</h1>\n      </div>\n\n      <h4>Title</h4>\n      <p id='topicTitle'>{topic.name}</p>\n      <h4>Courses</h4>\n      <p id='topicCourses'>##TODO</p>\n\n      <h2>Task Groups</h2>\n      <Link to={{\n        pathname: '/taskgroups/add',\n        topic_id: object_id,\n        topic_name: topic.name\n      }}>\n        <div class='teacherButton'>New Task Group</div>\n      </Link>\n      <div class='teacherButton' id='reorderTaskGroupsButton' onClick={reorderTaskGroups} reordering={false}>Reorder Task Groups</div>\n\n      <hr />\n\n      <table id='taskGroupList'>\n          <tr><td>Title</td><td>Tasks</td><td>Actions</td></tr>\n          {topic.taskgroups.map(({ taskgroup_id, name, tasks}, index) => (\n            <tr id={taskgroup_id}>\n              <td>{name}</td>\n              <td>{tasks.length}</td>\n              <td>\n                <Link to={{\n                  pathname: '/taskgroups/edit',\n                  topic_name: topic.name,\n                  taskgroup_id: taskgroup_id,\n                  taskgroup_name: name\n                }}>Edit </Link>\n                <Link to='/taskgroups/move'>Move </Link>\n                <Link onClick={() => deleteTaskGroup(taskgroup_id)}>Delete</Link>\n              </td>\n            </tr>\n          ))}\n      </table>\n\n      <div id='tasksList'>\n      {topic.taskgroups.map(({taskgroup_id, name, tasks}, index) => (\n        <>\n          <h3>{name}</h3>\n          <div className='teacherButton'>\n            <Link to={{\n              pathname: '/tasks/add',\n              taskgroup_id: taskgroup_id,\n              topic_name: topic.name,\n              taskgroup_name: name\n            }}>New Task</Link>\n          </div>\n          <div className='reorderTasksButton'>Reorder Tasks</div>\n\n          <table id=\"taskgroup\">\n            <tr><td>Name</td><td>Difficulty</td><td>Actions</td></tr>\n            {tasks.map(({task_id, name, difficulty}, index) => (\n              <tr>\n                <td><Link to={{\n                  pathname: '/tasks/view',\n                  task_id: task_id,\n                  topic_name: topic.name,\n                }}>{name}</Link></td>\n                <td>{difficulty}</td>\n                <td>\n                  <Link to={{\n                    pathname: '/tasks/edit',\n                    task_id: task_id,\n                    topic_name: topic.name\n                  }}>Edit </Link>\n                  <Link to={{\n                    pathname: '/tasks/attachments',\n                    task_id: task_id,\n                    task_name: name,\n                    topic_name: topic.name\n                  }}>Attachments </Link>\n                  <Link onClick={() => deleteTask(task_id)}>Delete</Link>\n                </td>\n              </tr>\n            ))}\n          </table>\n        </>\n      ))}\n      </div>\n\n    </>\n  )\n}\n\n\n// <div className='teacherButton' id='reorderTasksButton'>Reorder Tasks</div>\nexport default Manage\n"]},"metadata":{},"sourceType":"module"}