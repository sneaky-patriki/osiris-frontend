{"ast":null,"code":"var _jsxFileName = \"/Users/nicholaspatrikeos/Sites/Gallifrey4.0/gallifrey-frontend/src/components/ManageTopic.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport '../App.css';\nimport AuthContext from '../AuthContext';\nimport { useStep } from '../utils/update';\nimport { startReorder, finishReorder, getTimeDifference, taskType } from '../utils/helperFunctions';\n\nfunction ManageTopic({\n  topic_id\n}, ...props) {\n  const [topic, setTopic] = React.useState({\n    name: \"\",\n    topic_id: 0,\n    taskgroups: [],\n    courses: []\n  });\n  const [currentTime, setCurrentTime] = React.useState();\n  const token = React.useContext(AuthContext);\n\n  const fetchTopicData = () => {\n    const getTopic = axios.get('/topics/details', {\n      params: {\n        token,\n        topic_id\n      }\n    }).then(topicResponse => {\n      const topicData = topicResponse.data.topic;\n      const timeData = topicResponse.data.currentTime;\n      console.log(topicData);\n      setTopic(topicData);\n      setCurrentTime(timeData);\n      console.log(topic);\n    });\n  };\n\n  function deleteTaskGroup(taskgroup_id) {\n    axios.delete('/taskgroups/delete', {\n      data: {\n        token,\n        taskgroup_id\n      }\n    }).then(response => {\n      const data = response.data;\n      window.location.reload();\n    }).catch(err => {});\n  }\n\n  function deleteTask(task_id) {\n    axios.delete('/tasks/delete', {\n      data: {\n        token,\n        task_id\n      }\n    }).then(response => {\n      const data = response.data;\n      window.location.reload();\n    }).catch(err => {});\n  }\n\n  function reorderTaskGroups() {\n    var element = document.getElementById('reorderTaskGroupsButton');\n    console.log(element.name);\n\n    if (element.name == 'notReordering' || element.name == undefined) {\n      element.name = 'reordering';\n      element.style.backgroundColor = '#dd514c';\n      element.style.color = 'white';\n      element.innerHTML = 'Finish Reordering';\n      startReorder('#taskGroupList tr');\n    } else {\n      element.name = 'notReordering';\n      element.innerHTML = 'Reorder Task Groups';\n      element.style.backgroundColor = 'white';\n      element.style.color = 'black';\n      finishReorder('#taskGroupList tr');\n      var tableRows = document.querySelectorAll('#taskGroupList tr');\n      console.log(tableRows);\n      var newTaskGroupList = [];\n\n      for (var row = 0; row < tableRows.length; row++) {\n        console.log(tableRows[row].id);\n        newTaskGroupList.push(tableRows[row].id);\n      }\n\n      var topic_id = topic.topic_id;\n      axios.put('/taskgroups/reorder', {\n        token,\n        topic_id,\n        newTaskGroupList\n      }).then(response => {\n        console.log(response);\n        window.location.reload();\n      }).catch(err => {});\n    }\n  }\n\n  function reorderTasks(taskgroup_id) {\n    var element = document.getElementById('reorderTasksButton' + taskgroup_id);\n\n    if (element.name == 'notReordering' || element.name == undefined) {\n      element.name = 'reordering';\n      element.style.backgroundColor = '#dd514c';\n      element.style.color = 'white';\n      element.innerHTML = 'Finish Reordering';\n      startReorder('#tasksList' + taskgroup_id + ' tr');\n    } else {\n      element.name = 'notReordering';\n      element.innerHTML = 'Reorder Tasks';\n      element.style.backgroundColor = 'white';\n      element.style.color = 'black';\n      finishReorder('#tasksList' + taskgroup_id + ' tr');\n      var tableRows = document.querySelectorAll('#tasksList' + taskgroup_id + ' tr');\n      var newTaskList = [];\n\n      for (var row = 0; row < tableRows.length; row++) {\n        newTaskList.push(tableRows[row].id);\n      }\n\n      axios.put('/tasks/reorder', {\n        token,\n        taskgroup_id,\n        newTaskList\n      }).then(response => {\n        console.log(response);\n        window.location.reload();\n      }).catch(err => {});\n    }\n  }\n\n  const step = useStep(fetchTopicData, [], 2);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"headerSection\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }, \"Topics\")), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }\n  }, \"Title\"), /*#__PURE__*/React.createElement(\"p\", {\n    id: \"topicTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, topic.name), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }\n  }, \"Courses\"), /*#__PURE__*/React.createElement(\"p\", {\n    id: \"topicCourses\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }\n  }, topic.courses.map(({\n    course_id,\n    name\n  }, index) => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/courses/manage',\n      course_id: course_id\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  }, name), index != topic.courses.length - 1 ? \", \" : \"\"))), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }\n  }, \"Task Groups\"), /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/taskgroups/add',\n      topic_id: topic_id,\n      topic_name: topic.name\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"teacherButton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }\n  }, \"New Task Group\")), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"teacherButton\",\n    id: \"reorderTaskGroupsButton\",\n    onClick: reorderTaskGroups,\n    name: \"notReordering\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }\n  }, \"Reorder Task Groups\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"table\", {\n    id: \"taskGroupList\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 18\n    }\n  }, \"Title\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 32\n    }\n  }, \"Tasks\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 46\n    }\n  }, \"Submission Type\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 70\n    }\n  }, \"Last Modified\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 92\n    }\n  }, \"Actions\")), topic.taskgroups.map(({\n    taskgroup_id,\n    name,\n    tasks,\n    modified,\n    submit_multiple\n  }, index) => /*#__PURE__*/React.createElement(\"tr\", {\n    id: taskgroup_id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 15\n    }\n  }, name), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 15\n    }\n  }, tasks.length), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 15\n    }\n  }, submit_multiple ? 'Multiple Tasks' : 'Single Tasks'), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 15\n    }\n  }, getTimeDifference(modified, currentTime)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/taskgroups/edit',\n      topic_name: topic.name,\n      taskgroup_id: taskgroup_id,\n      taskgroup_name: name\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 17\n    }\n  }, \"Edit \"), /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/taskgroups/move',\n      taskgroup_id: taskgroup_id\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }\n  }, \"Move \"), /*#__PURE__*/React.createElement(Link, {\n    onClick: () => deleteTaskGroup(taskgroup_id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 17\n    }\n  }, \"Delete\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"tasksList\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }\n  }, topic.taskgroups.map(({\n    taskgroup_id,\n    name,\n    tasks\n  }, index) => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 11\n    }\n  }, name), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"teacherButton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/tasks/add',\n      taskgroup_id: taskgroup_id,\n      topic_name: topic.name,\n      taskgroup_name: name\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 13\n    }\n  }, \"New Task\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"reorderTasksButton\",\n    id: 'reorderTasksButton' + taskgroup_id,\n    onClick: () => reorderTasks(taskgroup_id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 11\n    }\n  }, \"Reorder Tasks\"), /*#__PURE__*/React.createElement(\"table\", {\n    id: 'tasksList' + taskgroup_id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 20\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 33\n    }\n  }, \"Difficulty\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 52\n    }\n  }, \"Task Type\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 70\n    }\n  }, \"Last Modified\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 92\n    }\n  }, \"Actions\")), tasks.map(({\n    task_id,\n    name,\n    difficulty,\n    modified,\n    answer_type\n  }, index) => /*#__PURE__*/React.createElement(\"tr\", {\n    id: task_id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/tasks/view',\n      task_id: task_id,\n      topic_name: topic.name\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 21\n    }\n  }, name)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 17\n    }\n  }, difficulty), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 17\n    }\n  }, getTimeDifference(modified, currentTime)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/tasks/edit',\n      task_id: task_id,\n      topic_name: topic.name\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 19\n    }\n  }, \"Edit \"), /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/tasks/move',\n      task_id: task_id,\n      topic_name: topic.name\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 19\n    }\n  }, \"Move \"), /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/tasks/attachments',\n      task_id: task_id,\n      task_name: name,\n      topic_name: topic.name\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 19\n    }\n  }, \"Attachments \"), /*#__PURE__*/React.createElement(Link, {\n    onClick: () => deleteTask(task_id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 19\n    }\n  }, \"Delete\")))))))));\n} // <div className='teacherButton' id='reorderTasksButton'>Reorder Tasks</div>\n\n\nexport default ManageTopic;","map":{"version":3,"sources":["/Users/nicholaspatrikeos/Sites/Gallifrey4.0/gallifrey-frontend/src/components/ManageTopic.js"],"names":["React","axios","Link","AuthContext","useStep","startReorder","finishReorder","getTimeDifference","taskType","ManageTopic","topic_id","props","topic","setTopic","useState","name","taskgroups","courses","currentTime","setCurrentTime","token","useContext","fetchTopicData","getTopic","get","params","then","topicResponse","topicData","data","timeData","console","log","deleteTaskGroup","taskgroup_id","delete","response","window","location","reload","catch","err","deleteTask","task_id","reorderTaskGroups","element","document","getElementById","undefined","style","backgroundColor","color","innerHTML","tableRows","querySelectorAll","newTaskGroupList","row","length","id","push","put","reorderTasks","newTaskList","step","map","course_id","index","pathname","topic_name","tasks","modified","submit_multiple","taskgroup_name","difficulty","answer_type","task_name"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\nimport { startReorder, finishReorder, getTimeDifference, taskType } from '../utils/helperFunctions'\n\nfunction ManageTopic({ topic_id }, ...props) {\n\n  const [topic, setTopic] = React.useState({\n    name: \"\", topic_id: 0,\n    taskgroups: [], courses: []})\n  const [currentTime, setCurrentTime] = React.useState()\n\n  const token = React.useContext(AuthContext)\n\n  const fetchTopicData = () => {\n\n    const getTopic = axios.get('/topics/details', {params: { token, topic_id }})\n    .then((topicResponse) => {\n      const topicData = topicResponse.data.topic\n      const timeData = topicResponse.data.currentTime\n      console.log(topicData)\n      setTopic(topicData)\n      setCurrentTime(timeData)\n      console.log(topic)\n    })\n  }\n\n  function deleteTaskGroup(taskgroup_id) {\n    axios.delete('/taskgroups/delete', {data: { token, taskgroup_id }})\n      .then((response) => {\n        const data = response.data\n        window.location.reload()\n      })\n      .catch((err) => {})\n  }\n\n  function deleteTask(task_id) {\n    axios.delete('/tasks/delete', {data: { token, task_id }})\n      .then((response) => {\n        const data = response.data\n        window.location.reload()\n      })\n      .catch((err) => {})\n  }\n\n  function reorderTaskGroups() {\n    var element = document.getElementById('reorderTaskGroupsButton')\n\n    console.log(element.name)\n\n    if (element.name == 'notReordering' || element.name == undefined) {\n      element.name = 'reordering'\n      element.style.backgroundColor = '#dd514c'\n      element.style.color = 'white'\n      element.innerHTML = 'Finish Reordering'\n\n      startReorder('#taskGroupList tr')\n\n    } else {\n\n      element.name = 'notReordering'\n      element.innerHTML = 'Reorder Task Groups'\n      element.style.backgroundColor = 'white'\n      element.style.color = 'black'\n\n      finishReorder('#taskGroupList tr')\n\n      var tableRows = document.querySelectorAll('#taskGroupList tr')\n      console.log(tableRows)\n      var newTaskGroupList = []\n\n      for (var row = 0; row < tableRows.length; row++) {\n        console.log(tableRows[row].id)\n        newTaskGroupList.push(tableRows[row].id)\n      }\n\n      var topic_id = topic.topic_id\n      axios.put('/taskgroups/reorder', { token, topic_id, newTaskGroupList })\n        .then((response) => {\n          console.log(response)\n          window.location.reload()\n        })\n        .catch((err) => {})\n\n    }\n\n  }\n\n  function reorderTasks(taskgroup_id) {\n    var element = document.getElementById('reorderTasksButton' + taskgroup_id)\n\n    if (element.name == 'notReordering' || element.name == undefined) {\n      element.name = 'reordering'\n      element.style.backgroundColor = '#dd514c'\n      element.style.color = 'white'\n      element.innerHTML = 'Finish Reordering'\n\n      startReorder('#tasksList' + taskgroup_id + ' tr')\n\n  } else {\n      element.name = 'notReordering'\n      element.innerHTML = 'Reorder Tasks'\n      element.style.backgroundColor = 'white'\n      element.style.color = 'black'\n\n      finishReorder('#tasksList' + taskgroup_id + ' tr')\n\n      var tableRows = document.querySelectorAll('#tasksList' + taskgroup_id + ' tr')\n      var newTaskList = []\n\n      for (var row = 0; row < tableRows.length; row++) {\n        newTaskList.push(tableRows[row].id)\n      }\n\n      axios.put('/tasks/reorder', { token, taskgroup_id, newTaskList })\n        .then((response) => {\n          console.log(response)\n          window.location.reload()\n        })\n        .catch((err) => {})\n\n    }\n  }\n\n  const step = useStep(fetchTopicData, [], 2)\n\n  return (\n    <>\n      <div className='headerSection'>\n        <h1>Topics</h1>\n      </div>\n\n      <h4>Title</h4>\n      <p id='topicTitle'>{topic.name}</p>\n      <h4>Courses</h4>\n      <p id='topicCourses'>\n      {topic.courses.map(({ course_id, name}, index) => (\n        <>\n          <Link to={{\n            pathname: '/courses/manage',\n            course_id: course_id\n          }}>{name}</Link>{ (index != topic.courses.length - 1) ? \", \" : \"\" }\n        </>\n      ))}\n      </p>\n\n      <h2>Task Groups</h2>\n      <Link to={{\n        pathname: '/taskgroups/add',\n        topic_id: topic_id,\n        topic_name: topic.name\n      }}>\n        <div class='teacherButton'>New Task Group</div>\n      </Link>\n      <div class='teacherButton' id='reorderTaskGroupsButton' onClick={reorderTaskGroups} name='notReordering'>Reorder Task Groups</div>\n\n      <hr />\n\n      <table id='taskGroupList'>\n          <thead><td>Title</td><td>Tasks</td><td>Submission Type</td><td>Last Modified</td><td>Actions</td></thead>\n          {topic.taskgroups.map(({ taskgroup_id, name, tasks, modified, submit_multiple}, index) => (\n            <tr id={taskgroup_id}>\n              <td>{name}</td>\n              <td>{tasks.length}</td>\n              <td>{ submit_multiple ? 'Multiple Tasks' : 'Single Tasks'}</td>\n              <td>{getTimeDifference(modified, currentTime)}</td>\n              <td>\n                <Link to={{\n                  pathname: '/taskgroups/edit',\n                  topic_name: topic.name,\n                  taskgroup_id: taskgroup_id,\n                  taskgroup_name: name\n                }}>Edit </Link>\n                <Link to={{\n                  pathname: '/taskgroups/move',\n                  taskgroup_id: taskgroup_id,\n                }}>Move </Link>\n                <Link onClick={() => deleteTaskGroup(taskgroup_id)}>Delete</Link>\n              </td>\n            </tr>\n          ))}\n      </table>\n\n      <div id='tasksList'>\n      {topic.taskgroups.map(({taskgroup_id, name, tasks}, index) => (\n        <>\n          <h3>{name}</h3>\n          <div className='teacherButton'>\n            <Link to={{\n              pathname: '/tasks/add',\n              taskgroup_id: taskgroup_id,\n              topic_name: topic.name,\n              taskgroup_name: name\n            }}>New Task</Link>\n          </div>\n          <div className='reorderTasksButton' id={'reorderTasksButton' + taskgroup_id} onClick={() => reorderTasks(taskgroup_id)}>Reorder Tasks</div>\n\n          <table id={'tasksList' + taskgroup_id}>\n            <thead><td>Name</td><td>Difficulty</td><td>Task Type</td><td>Last Modified</td><td>Actions</td></thead>\n            {tasks.map(({task_id, name, difficulty, modified, answer_type}, index) => (\n              <tr id={task_id}>\n                <td><Link to={{\n                  pathname: '/tasks/view',\n                  task_id: task_id,\n                  topic_name: topic.name,\n                }}>{name}</Link></td>\n                <td>{difficulty}</td>\n                <td>{}</td>\n                <td>{getTimeDifference(modified, currentTime)}</td>\n                <td>\n                  <Link to={{\n                    pathname: '/tasks/edit',\n                    task_id: task_id,\n                    topic_name: topic.name\n                  }}>Edit </Link>\n                  <Link to={{\n                    pathname: '/tasks/move',\n                    task_id: task_id,\n                    topic_name: topic.name\n                  }}>Move </Link>\n                  <Link to={{\n                    pathname: '/tasks/attachments',\n                    task_id: task_id,\n                    task_name: name,\n                    topic_name: topic.name\n                  }}>Attachments </Link>\n                  <Link onClick={() => deleteTask(task_id)}>Delete</Link>\n                </td>\n              </tr>\n            ))}\n          </table>\n        </>\n      ))}\n      </div>\n\n    </>\n  )\n}\n\n\n// <div className='teacherButton' id='reorderTasksButton'>Reorder Tasks</div>\nexport default ManageTopic\n"]},"metadata":{},"sourceType":"module"}