{"ast":null,"code":"var _jsxFileName = \"/Users/nicholaspatrikeos/Sites/Gallifrey4.0/gallifrey-frontend/src/pages/TasksViewPage.js\";\nimport React from 'react';\nimport Layout from '../components/Layout';\nimport '../App.css';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport AuthContext from '../AuthContext';\nimport { useStep } from '../utils/update';\nimport { Converter } from 'showdown';\nimport ReactHTMLParser from 'react-html-parser';\n\nfunction TasksViewPage(props) {\n  const showdownHighlight = require('showdown-highlight');\n\n  var task_id;\n\n  if (props.location.task_id != undefined) {\n    task_id = props.location.task_id;\n    localStorage.setItem('currentTask', props.location.task_id);\n  } else {\n    task_id = localStorage.getItem('currentTask');\n  }\n\n  const [task, setTask] = React.useState({\n    task_id: 0,\n    taskgroup: \"\",\n    name: \"\",\n    difficulty: \"\",\n    description: \"\",\n    hint: \"\",\n    solution: \"\",\n    attachments: []\n  });\n  const token = React.useContext(AuthContext);\n\n  const fetchTaskData = () => {\n    const getTask = axios.get('/tasks/details', {\n      params: {\n        token,\n        task_id\n      }\n    }).then(taskResponse => {\n      const taskData = taskResponse.data.task;\n      console.log(taskData);\n      setTask(taskData);\n    });\n  };\n\n  const step = useStep(fetchTaskData, [], 2);\n  var converter = new Converter({\n    extensions: [showdownHighlight]\n  });\n  console.log(converter.makeHtml(task.description).replace(/(?:\\r\\n|\\r|\\n)/g, '<br>'));\n  return /*#__PURE__*/React.createElement(Layout, {\n    navtype: \"teacher\",\n    body: /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"headerSection\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      id: \"topicTitle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }\n    }, props.location.topic_name), /*#__PURE__*/React.createElement(\"h4\", {\n      id: \"taskGroupTitle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }\n    }, task.taskgroup), /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }\n    }, \"Tasks\")), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      id: \"taskName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }\n    }, task.name), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }\n    }, \"Difficulty\"), /*#__PURE__*/React.createElement(\"p\", {\n      id: \"difficulty\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }\n    }, task.difficulty), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    }, \"Description\"), /*#__PURE__*/React.createElement(\"p\", {\n      id: \"description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }\n    }, ReactHTMLParser(converter.makeHtml(task.description))), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }\n    }, \"Hint\"), /*#__PURE__*/React.createElement(\"p\", {\n      id: \"hint\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }\n    }, task.hint), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }\n    }, \"Solution\"), /*#__PURE__*/React.createElement(\"p\", {\n      id: \"solution\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }\n    }, task.solution), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }\n    }, \"Attachments\"), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"attachments\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }\n    }, task.attachments.map(({\n      attachment_id,\n      cover_name,\n      url\n    }, index) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"attachment\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, \"Attachment\"), cover_name, \" \", /*#__PURE__*/React.createElement(\"a\", {\n      href: url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 30\n      }\n    }, \"Download\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 56\n      }\n    }))))), /*#__PURE__*/React.createElement(Link, {\n      to: \"/topics/manage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }, \"Back\")),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  });\n}\n\nexport default TasksViewPage;","map":{"version":3,"sources":["/Users/nicholaspatrikeos/Sites/Gallifrey4.0/gallifrey-frontend/src/pages/TasksViewPage.js"],"names":["React","Layout","Link","axios","AuthContext","useStep","Converter","ReactHTMLParser","TasksViewPage","props","showdownHighlight","require","task_id","location","undefined","localStorage","setItem","getItem","task","setTask","useState","taskgroup","name","difficulty","description","hint","solution","attachments","token","useContext","fetchTaskData","getTask","get","params","then","taskResponse","taskData","data","console","log","step","converter","extensions","makeHtml","replace","topic_name","map","attachment_id","cover_name","url","index"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\nimport { Converter } from 'showdown'\nimport ReactHTMLParser from 'react-html-parser'\n\nfunction TasksViewPage(props) {\n\n  const showdownHighlight = require('showdown-highlight')\n\n  var task_id;\n  if (props.location.task_id != undefined) {\n    task_id = props.location.task_id\n    localStorage.setItem('currentTask', props.location.task_id)\n  } else {\n    task_id = localStorage.getItem('currentTask')\n  }\n\n  const [task, setTask] = React.useState({\n    task_id: 0,\n    taskgroup: \"\",\n    name: \"\",\n    difficulty: \"\",\n    description: \"\",\n    hint: \"\",\n    solution: \"\",\n    attachments: []\n  })\n  const token = React.useContext(AuthContext)\n\n  const fetchTaskData = () => {\n    const getTask = axios.get('/tasks/details', {params: { token, task_id }})\n      .then((taskResponse) => {\n        const taskData = taskResponse.data.task\n        console.log(taskData)\n        setTask(taskData)\n      })\n  }\n\n  const step = useStep(fetchTaskData, [], 2)\n  var converter = new Converter({extensions: [showdownHighlight]})\n  console.log(converter.makeHtml(task.description).replace(/(?:\\r\\n|\\r|\\n)/g, '<br>'))\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div class='headerSection'>\n            <h4 id='topicTitle'>{props.location.topic_name}</h4>\n            <h4 id='taskGroupTitle'>{task.taskgroup}</h4>\n            <h1>Tasks</h1>\n        </div>\n        <hr/>\n\n        <div>\n            <h3 id='taskName'>{task.name}</h3>\n\n            <h4>Difficulty</h4>\n            <p id='difficulty'>{task.difficulty}</p>\n\n            <h4>Description</h4>\n            <p id='description'>{ReactHTMLParser(converter.makeHtml(task.description))}</p>\n\n            <h4>Hint</h4>\n            <p id='hint'>{task.hint}</p>\n\n            <h4>Solution</h4>\n            <p id='solution'>{task.solution}</p>\n\n            <h4>Attachments</h4>\n            <div id='attachments'>\n            {task.attachments.map(({attachment_id, cover_name, url}, index) => (\n              <div className='attachment'>\n                <h4>Attachment</h4>\n                {cover_name} <a href={url}>Download</a><br/>\n              </div>\n            ))}\n            </div>\n        </div>\n\n        <Link to='/topics/manage'>Back</Link>\n\n      </>\n    }/>\n  )\n\n}\n\n\nexport default TasksViewPage;\n"]},"metadata":{},"sourceType":"module"}