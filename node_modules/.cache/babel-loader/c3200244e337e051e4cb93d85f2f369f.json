{"ast":null,"code":"var _jsxFileName = \"/Users/nicholaspatrikeos/Sites/Gallifrey4.0/gallifrey-frontend/src/components/ManageCourse.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport '../App.css';\nimport AuthContext from '../AuthContext';\nimport { useStep } from '../utils/update';\nimport { startReorder, finishReorder } from '../utils/helperFunctions';\n\nfunction ManageCourse({\n  course_id\n}, ...props) {\n  const [course, setCourse] = React.useState({\n    course_id: 0,\n    name: \"\",\n    modules: []\n  });\n  const token = React.useContext(AuthContext);\n\n  const fetchCourseData = () => {\n    const getCourse = axios.get('/courses/details', {\n      params: {\n        token,\n        course_id\n      }\n    }).then(courseResponse => {\n      const courseData = courseResponse.data.course;\n      console.log(courseData);\n      setCourse(courseData);\n    }).catch(err => {});\n  };\n\n  function removeTopic(module_id) {\n    axios.delete('/courses/topics/remove', {\n      data: {\n        token,\n        module_id\n      }\n    }).then(response => {\n      const data = response.data;\n      console.log(data);\n      window.location.reload();\n    }).catch(err => {});\n  }\n\n  function reorderTopics() {\n    var element = document.getElementById('reorderTopicsButton');\n\n    if (element.name == 'notReordering' || element.name == undefined) {\n      element.name = 'reordering';\n      element.style.backgroundColor = '#dd514c';\n      element.style.color = 'white';\n      element.innerHTML = 'Finish Reordering';\n      startReorder('#topicList tr');\n    } else {\n      element.name = 'notReordering';\n      element.innerHTML = 'Reorder Topics';\n      element.style.backgroundColor = 'white';\n      element.style.color = 'black';\n      finishReorder('#topicList tr');\n      var tableRows = document.querySelectorAll('#topicList tr');\n      var newTopicList = [];\n\n      for (var row = 0; row < tableRows.length; row++) {\n        newTopicList.push(tableRows[row].id);\n      }\n\n      console.log(newTopicList);\n      var course_id = course.course_id;\n      axios.put('/courses/topics/reorder', {\n        token,\n        course_id,\n        newTopicList\n      }).then(response => {\n        window.location.reload();\n      }).catch(err => {});\n    }\n  }\n\n  const step = useStep(fetchCourseData, [], 2);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"headerSection\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, \"Courses\")), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, \"Title\"), /*#__PURE__*/React.createElement(\"p\", {\n    id: \"courseTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, course.name), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, \"Classes\"), /*#__PURE__*/React.createElement(\"p\", {\n    id: \"courseClasses\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }, \"##TODO\"), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, \"Topics\"), /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/courses/topics/add',\n      course_id: course_id,\n      course_name: course.name\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"teacherButton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, \"Add Topic\")), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"teacherButton\",\n    id: \"reorderTopicsButton\",\n    onClick: reorderTopics,\n    name: \"notReordering\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, \"Reorder Topics\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"table\", {\n    id: \"topicList\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 18\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 31\n    }\n  }, \"Topic\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 45\n    }\n  }, \"Actions\")), course.modules.map(({\n    topic_id,\n    topic_name,\n    module_id,\n    module_name\n  }, index) => /*#__PURE__*/React.createElement(\"tr\", {\n    id: topic_id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 15\n    }\n  }, module_name), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 15\n    }\n  }, topic_name), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/courses/topics/rename',\n      module_id: module_id,\n      module_name: module_name\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, \"Rename \"), /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/topics/manage',\n      topic_id: topic_id\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }, \"Manage \"), /*#__PURE__*/React.createElement(Link, {\n    onClick: () => removeTopic(module_id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  }, \"Remove\"))))));\n}\n\nexport default ManageCourse;","map":{"version":3,"sources":["/Users/nicholaspatrikeos/Sites/Gallifrey4.0/gallifrey-frontend/src/components/ManageCourse.js"],"names":["React","axios","Link","AuthContext","useStep","startReorder","finishReorder","ManageCourse","course_id","props","course","setCourse","useState","name","modules","token","useContext","fetchCourseData","getCourse","get","params","then","courseResponse","courseData","data","console","log","catch","err","removeTopic","module_id","delete","response","window","location","reload","reorderTopics","element","document","getElementById","undefined","style","backgroundColor","color","innerHTML","tableRows","querySelectorAll","newTopicList","row","length","push","id","put","step","pathname","course_name","map","topic_id","topic_name","module_name","index"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\nimport { startReorder, finishReorder } from '../utils/helperFunctions'\n\nfunction ManageCourse({ course_id }, ...props) {\n\n  const [course, setCourse] = React.useState({\n    course_id: 0,\n    name: \"\",\n    modules: []\n  })\n\n  const token = React.useContext(AuthContext)\n\n  const fetchCourseData = () => {\n    const getCourse = axios.get('/courses/details', {params: { token, course_id }})\n      .then((courseResponse) => {\n        const courseData = courseResponse.data.course\n        console.log(courseData)\n        setCourse(courseData)\n      })\n      .catch((err) => {})\n  }\n\n  function removeTopic(module_id) {\n      axios.delete('/courses/topics/remove', {data: { token, module_id }})\n        .then((response) => {\n          const data = response.data\n          console.log(data)\n          window.location.reload()\n        })\n        .catch((err) => {})\n  }\n\n  function reorderTopics() {\n    var element = document.getElementById('reorderTopicsButton')\n\n    if (element.name == 'notReordering' || element.name == undefined) {\n      element.name = 'reordering'\n      element.style.backgroundColor = '#dd514c'\n      element.style.color = 'white'\n      element.innerHTML = 'Finish Reordering'\n\n      startReorder('#topicList tr')\n    } else {\n      element.name = 'notReordering'\n      element.innerHTML = 'Reorder Topics'\n      element.style.backgroundColor = 'white'\n      element.style.color = 'black'\n\n      finishReorder('#topicList tr')\n\n      var tableRows = document.querySelectorAll('#topicList tr')\n      var newTopicList = []\n\n      for (var row = 0; row < tableRows.length; row++) {\n        newTopicList.push(tableRows[row].id)\n      }\n\n      console.log(newTopicList)\n\n      var course_id = course.course_id\n      axios.put('/courses/topics/reorder', { token, course_id, newTopicList })\n        .then((response) => {\n          window.location.reload()\n        })\n        .catch((err) => {})\n    }\n  }\n\n  const step = useStep(fetchCourseData, [], 2)\n\n  return (\n    <>\n      <div className='headerSection'>\n        <h1>Courses</h1>\n      </div>\n\n      <h4>Title</h4>\n      <p id='courseTitle'>{course.name}</p>\n      <h4>Classes</h4>\n      <p id='courseClasses'>##TODO</p>\n\n      <h2>Topics</h2>\n      <Link to={{\n        pathname: '/courses/topics/add',\n        course_id: course_id,\n        course_name: course.name\n      }}>\n        <div class='teacherButton'>Add Topic</div>\n      </Link>\n      <div class='teacherButton' id='reorderTopicsButton' onClick={reorderTopics} name='notReordering'>Reorder Topics</div>\n\n      <hr />\n\n      <table id='topicList'>\n          <thead><td>Name</td><td>Topic</td><td>Actions</td></thead>\n          {course.modules.map(({ topic_id, topic_name, module_id, module_name }, index) => (\n            <tr id={topic_id}>\n              <td>{module_name}</td>\n              <td>{topic_name}</td>\n              <td>\n                <Link to={{\n                  pathname: '/courses/topics/rename',\n                  module_id: module_id,\n                  module_name: module_name\n                }}>Rename </Link>\n                <Link to={{\n                  pathname: '/topics/manage',\n                  topic_id: topic_id,\n                }}>Manage </Link>\n                <Link onClick={() => removeTopic(module_id)}>Remove</Link>\n              </td>\n            </tr>\n          ))}\n      </table>\n\n    </>\n  )\n\n}\n\nexport default ManageCourse;\n"]},"metadata":{},"sourceType":"module"}