{"ast":null,"code":"import axios from 'axios';\naxios.defaults.baseURL = \"http://127.0.0.1:8080\";\naxios.defaults.headers.put['Content-Type'] = 'application/json';\naxios.defaults.headers.post['Content-Type'] = 'application/json';\naxios.defaults.headers.delete['Content-Type'] = 'application/json'; // temporarily cancel all requests until backend is ready\n\nconst CancelToken = axios.CancelToken;\naxios.interceptors.request.use(request => {\n  // if (request.method === 'put' || request.method === 'post' || request.method === 'delete') {\n  //     request.data = qs.stringify(request.data);\n  // }\n  return request;\n});\n\nconst errorHandler = error => {\n  // great gist https://gist.github.com/saqueib/a495af17d7c0e2fd5c2316b0822ebac3\n  // if has response show the error\n  console.error(error);\n  let message = DEFAULT_ERROR_TEXT;\n\n  if (error.response) {\n    console.log(error.response.data);\n    message = _.get(error, 'response.data.message') || DEFAULT_ERROR_TEXT;\n  }\n\n  toast.error(message);\n  return Promise.reject({ ...error\n  });\n};\n\nconst responseHandler = response => {\n  return response;\n};\n\naxios.interceptors.response.use(responseHandler, errorHandler);","map":{"version":3,"sources":["/Users/nicholaspatrikeos/Sites/Gallifrey4.0/gallifrey-frontend/src/axios.js"],"names":["axios","defaults","baseURL","headers","put","post","delete","CancelToken","interceptors","request","use","errorHandler","error","console","message","DEFAULT_ERROR_TEXT","response","log","data","_","get","toast","Promise","reject","responseHandler"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEAA,KAAK,CAACC,QAAN,CAAeC,OAAf,GAAyB,uBAAzB;AACAF,KAAK,CAACC,QAAN,CAAeE,OAAf,CAAuBC,GAAvB,CAA2B,cAA3B,IAA6C,kBAA7C;AACAJ,KAAK,CAACC,QAAN,CAAeE,OAAf,CAAuBE,IAAvB,CAA4B,cAA5B,IAA8C,kBAA9C;AACAL,KAAK,CAACC,QAAN,CAAeE,OAAf,CAAuBG,MAAvB,CAA8B,cAA9B,IAAgD,kBAAhD,C,CAEA;;AACA,MAAMC,WAAW,GAAGP,KAAK,CAACO,WAA1B;AAEAP,KAAK,CAACQ,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAAgCD,OAAD,IAAa;AACxC;AACA;AACA;AACA,SAAOA,OAAP;AACH,CALD;;AAOA,MAAME,YAAY,GAAIC,KAAD,IAAW;AAC5B;AAEA;AACAC,EAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AAEA,MAAIE,OAAO,GAAGC,kBAAd;;AAEA,MAAIH,KAAK,CAACI,QAAV,EAAoB;AAChBH,IAAAA,OAAO,CAACI,GAAR,CAAYL,KAAK,CAACI,QAAN,CAAeE,IAA3B;AACAJ,IAAAA,OAAO,GAAGK,CAAC,CAACC,GAAF,CAAMR,KAAN,EAAa,uBAAb,KAAyCG,kBAAnD;AACH;;AAEDM,EAAAA,KAAK,CAACT,KAAN,CAAYE,OAAZ;AAEA,SAAOQ,OAAO,CAACC,MAAR,CAAe,EAAE,GAAGX;AAAL,GAAf,CAAP;AACH,CAhBD;;AAkBA,MAAMY,eAAe,GAAIR,QAAD,IAAc;AAClC,SAAOA,QAAP;AACH,CAFD;;AAIAhB,KAAK,CAACQ,YAAN,CAAmBQ,QAAnB,CAA4BN,GAA5B,CAAgCc,eAAhC,EAAiDb,YAAjD","sourcesContent":["import axios from 'axios'\n\naxios.defaults.baseURL = \"http://127.0.0.1:8080\"\naxios.defaults.headers.put['Content-Type'] = 'application/json';\naxios.defaults.headers.post['Content-Type'] = 'application/json';\naxios.defaults.headers.delete['Content-Type'] = 'application/json';\n\n// temporarily cancel all requests until backend is ready\nconst CancelToken = axios.CancelToken;\n\naxios.interceptors.request.use((request) => {\n    // if (request.method === 'put' || request.method === 'post' || request.method === 'delete') {\n    //     request.data = qs.stringify(request.data);\n    // }\n    return request;\n});\n\nconst errorHandler = (error) => {\n    // great gist https://gist.github.com/saqueib/a495af17d7c0e2fd5c2316b0822ebac3\n\n    // if has response show the error\n    console.error(error);\n\n    let message = DEFAULT_ERROR_TEXT;\n\n    if (error.response) {\n        console.log(error.response.data)\n        message = _.get(error, 'response.data.message') || DEFAULT_ERROR_TEXT;\n    }\n\n    toast.error(message);\n\n    return Promise.reject({ ...error })\n}\n\nconst responseHandler = (response) => {\n    return response;\n}\n\naxios.interceptors.response.use(responseHandler, errorHandler);\n"]},"metadata":{},"sourceType":"module"}