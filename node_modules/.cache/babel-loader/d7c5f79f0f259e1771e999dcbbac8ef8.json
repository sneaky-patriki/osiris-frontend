{"ast":null,"code":"var _jsxFileName = \"/Users/nicholaspatrikeos/Sites/Gallifrey4.0/gallifrey-frontend/src/components/CoursesList.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport '../App.css';\nimport AuthContext from '../AuthContext';\nimport { useStep } from '../utils/update';\nimport { getTimeDifference } from '../utils/helperFunctions';\n\nfunction CoursesList() {\n  const [courses, setCourses] = React.useState([]);\n  const [currentTime, setCurrentTime] = React.useState([]);\n  const token = React.useContext(AuthContext);\n\n  const fetchCoursesData = () => {\n    const getCourses = axios.get('/courses/list', {\n      params: {\n        token\n      }\n    }).then(courseResponse => {\n      const courseData = courseResponse.data.courses;\n      const timeData = courseResponse.data.currentTime;\n      console.log(courseData, timeData);\n      setCourses(courseData);\n      setCurrentTime(timeData);\n    });\n  };\n\n  function deleteCourse(course_id) {\n    axios.delete('/courses/delete', {\n      data: {\n        token,\n        course_id\n      }\n    }).then(response => [window.location.reload()]).catch(err => {});\n  }\n\n  const step = useStep(fetchCoursesData, [], 2);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"table\", {\n    id: \"coursesList\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }\n  }, \"Course\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 28\n    }\n  }, \"Last Modified\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 50\n    }\n  }, \"Actions\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }, courses.map(({\n    course_id,\n    name,\n    modified\n  }, index) => /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/courses/view/teacher',\n      course_id: course_id\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 19\n    }\n  }, name)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 15\n    }\n  }, getTimeDifference(modified, currentTime)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/courses/manage',\n      course_id: course_id\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }, \"Manage \"), /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/courses/edit',\n      course_id: course_id,\n      course_name: name\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, \"Edit \"), /*#__PURE__*/React.createElement(Link, {\n    onClick: () => deleteCourse(course_id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, \"Delete\")))))));\n}\n\nexport default CoursesList;","map":{"version":3,"sources":["/Users/nicholaspatrikeos/Sites/Gallifrey4.0/gallifrey-frontend/src/components/CoursesList.js"],"names":["React","axios","Link","AuthContext","useStep","getTimeDifference","CoursesList","courses","setCourses","useState","currentTime","setCurrentTime","token","useContext","fetchCoursesData","getCourses","get","params","then","courseResponse","courseData","data","timeData","console","log","deleteCourse","course_id","delete","response","window","location","reload","catch","err","step","map","name","modified","index","pathname","course_name"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\nimport { getTimeDifference } from '../utils/helperFunctions'\n\nfunction CoursesList() {\n  const [courses, setCourses] = React.useState([])\n  const [currentTime, setCurrentTime] = React.useState([])\n  const token = React.useContext(AuthContext)\n\n  const fetchCoursesData = () => {\n    const getCourses = axios.get('/courses/list', {params: { token }})\n      .then((courseResponse) => {\n        const courseData = courseResponse.data.courses\n        const timeData = courseResponse.data.currentTime\n        console.log(courseData, timeData)\n        setCourses(courseData)\n        setCurrentTime(timeData)\n      })\n  }\n\n  function deleteCourse(course_id) {\n\n    axios.delete('/courses/delete', { data: { token, course_id }})\n      .then((response) => [\n        window.location.reload()\n      ])\n      .catch((err) => {})\n  }\n\n  const step = useStep(fetchCoursesData, [], 2)\n\n  return (\n    <>\n      <table id='coursesList'>\n        <thead>\n          <tr>\n            <td>Course</td><td>Last Modified</td><td>Actions</td>\n          </tr>\n        </thead>\n        <tbody>\n          {courses.map(({ course_id, name, modified}, index) => (\n            <tr>\n              <td><Link to={{\n                pathname: '/courses/view/teacher',\n                course_id: course_id\n              }}>{name}</Link></td>\n              <td>{getTimeDifference(modified, currentTime)}</td>\n              <td>\n                <Link to={{\n                  pathname: '/courses/manage',\n                  course_id: course_id\n                }}>Manage </Link>\n                <Link to={{\n                  pathname: '/courses/edit',\n                  course_id: course_id,\n                  course_name: name\n                }}>Edit </Link>\n                <Link onClick={() => deleteCourse(course_id)}>Delete</Link>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n  </>\n  )\n}\n\nexport default CoursesList;\n"]},"metadata":{},"sourceType":"module"}