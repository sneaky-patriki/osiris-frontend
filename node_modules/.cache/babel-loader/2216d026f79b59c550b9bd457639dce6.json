{"ast":null,"code":"var _jsxFileName = \"/Users/nicholaspatrikeos/Sites/Gallifrey4.0/gallifrey-frontend/src/pages/CoursesViewPage.js\";\nimport React from 'react';\nimport Layout from '../components/Layout';\nimport '../App.css';\nimport AuthContext from '../AuthContext';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { useStep } from '../utils/update';\nimport { Converter } from 'showdown';\n\nfunction CoursesViewPage(props) {\n  var course_id;\n\n  if (props.location.course_id != undefined) {\n    course_id = props.location.course_id;\n    localStorage.setItem('currentCourse', props.location.course_id);\n  } else {\n    course_id = localStorage.getItem('currentCourse');\n  }\n\n  const [course, setCourse] = React.useState({\n    course_id: 0,\n    name: \"\",\n    modules: []\n  });\n  const [currentTopic, setCurrentTopic] = React.useState({\n    topic_id: 0,\n    module_id: 0,\n    module_name: '',\n    taskgroups: []\n  });\n  const [currentTask, setCurrentTask] = React.useState({\n    task_id: 0,\n    taskgroup: \"\",\n    name: \"\",\n    difficulty: \"\",\n    description: \"\",\n    hint: \"\",\n    solution: \"\",\n    attachments: []\n  });\n  const token = React.useContext(AuthContext);\n\n  const fetchCourseData = () => {\n    const getCourse = axios.get('/courses/details', {\n      params: {\n        token,\n        course_id\n      }\n    }).then(courseResponse => {\n      const courseData = courseResponse.data.course;\n      console.log(courseData);\n      setCourse(courseData);\n    }).catch(err => {});\n  };\n\n  function getTopic(module_id) {\n    for (var t = 0; t < course.modules.length; t++) {\n      if (course.modules[t].module_id == module_id) {\n        return course.modules[t];\n      }\n    }\n  }\n\n  function getTask(module_id, taskgroup_id, task_id) {\n    for (var t = 0; t < course.modules.length; t++) {\n      if (course.modules[t].module_id == module_id) {\n        for (var tg = 0; tg < course.modules[t].taskgroups.length; tg++) {\n          if (course.modules[t].taskgroups[tg].taskgroup_id == taskgroup_id) {\n            for (var tk = 0; tk < course.modules[t].taskgroups[tg].tasks.length; tk++) {\n              if (course.modules[t].taskgroups[tg].tasks[tk].task_id == task_id) {\n                return course.modules[t].taskgroups[tg].tasks[tk];\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  function showTopic(module_id) {\n    var element = document.getElementById(module_id);\n    element.style.borderTop = '1px solid lightgray';\n    element.style.borderLeft = '1px solid lightgray';\n    element.style.borderRight = '1px solid lightgray';\n    var topic = getTopic(module_id);\n    setCurrentTopic(topic);\n  }\n\n  function displayTaskgroup(taskgroup_id) {\n    var element = document.getElementById(taskgroup_id);\n    var elements = element.childNodes;\n    console.log(element.name);\n\n    if (element.name == 'undisplayed' || element.name == undefined) {\n      for (var e = 1; e < elements.length; e++) {\n        elements[e].style.display = 'block';\n      }\n\n      element.name = 'displayed';\n    } else if (element.name == 'displayed') {\n      for (var e = 1; e < elements.length; e++) {\n        elements[e].style.display = 'none';\n      }\n\n      element.name = 'undisplayed';\n    }\n  }\n\n  function displayTask(module_id, taskgroup_id, task_id) {\n    var task = getTask(module_id, taskgroup_id, task_id);\n    console.log(task);\n    setCurrentTask(task);\n    document.getElementById('taskBox').innerHTML += converter.makeHtml(currentTask.description);\n  }\n\n  const step = useStep(fetchCourseData, [], 2);\n  var converter = new Converter();\n  return /*#__PURE__*/React.createElement(Layout, {\n    navtype: \"teacher\",\n    body: /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      id: \"courseName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }\n    }, course.name)), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"table\", {\n      id: \"topicProgress\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }\n    }, course.modules.map(({\n      module_name\n    }, index) => /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }\n    }, module_name))), /*#__PURE__*/React.createElement(\"tr\", {\n      id: \"progressDashRow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"topicTabs\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }\n    }, course.modules.map(({\n      module_id,\n      module_name,\n      topic_id\n    }, index) => /*#__PURE__*/React.createElement(\"div\", {\n      class: \"topicTab\",\n      id: module_id,\n      onClick: () => showTopic(module_id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }\n    }, module_name))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"taskgroupList\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }\n    }, currentTopic.taskgroups.map(({\n      taskgroup_id,\n      name,\n      tasks\n    }, index) => /*#__PURE__*/React.createElement(\"span\", {\n      className: \"taskGroupList\",\n      name: \"undisplayed\",\n      id: taskgroup_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"taskGroupName\",\n      onClick: () => displayTaskgroup(taskgroup_id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }\n    }, name), tasks.map(({\n      task_id,\n      name,\n      difficulty\n    }, index) => /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        display: 'none'\n      },\n      id: task_id,\n      onClick: () => displayTask(currentTopic.module_id, taskgroup_id, task_id),\n      className: difficulty,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 19\n      }\n    }, name))))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"taskBox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }\n    }, currentTask.name))))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 5\n    }\n  });\n}\n\nexport default CoursesViewPage;","map":{"version":3,"sources":["/Users/nicholaspatrikeos/Sites/Gallifrey4.0/gallifrey-frontend/src/pages/CoursesViewPage.js"],"names":["React","Layout","AuthContext","Link","axios","useStep","Converter","CoursesViewPage","props","course_id","location","undefined","localStorage","setItem","getItem","course","setCourse","useState","name","modules","currentTopic","setCurrentTopic","topic_id","module_id","module_name","taskgroups","currentTask","setCurrentTask","task_id","taskgroup","difficulty","description","hint","solution","attachments","token","useContext","fetchCourseData","getCourse","get","params","then","courseResponse","courseData","data","console","log","catch","err","getTopic","t","length","getTask","taskgroup_id","tg","tk","tasks","showTopic","element","document","getElementById","style","borderTop","borderLeft","borderRight","topic","displayTaskgroup","elements","childNodes","e","display","displayTask","task","innerHTML","converter","makeHtml","step","map","index"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\nimport { useStep } from '../utils/update'\nimport { Converter } from 'showdown'\n\nfunction CoursesViewPage(props) {\n\n  var course_id\n  if (props.location.course_id != undefined) {\n    course_id = props.location.course_id\n    localStorage.setItem('currentCourse', props.location.course_id)\n  } else {\n    course_id = localStorage.getItem('currentCourse')\n  }\n\n  const [course, setCourse] = React.useState({\n    course_id: 0,\n    name: \"\",\n    modules: []\n  })\n  const [currentTopic, setCurrentTopic] = React.useState({\n    topic_id: 0,\n    module_id: 0,\n    module_name: '',\n    taskgroups: [],\n  })\n  const [currentTask, setCurrentTask] = React.useState({\n    task_id: 0,\n    taskgroup: \"\",\n    name: \"\",\n    difficulty: \"\",\n    description: \"\",\n    hint: \"\",\n    solution: \"\",\n    attachments: []\n  })\n\n  const token = React.useContext(AuthContext)\n\n  const fetchCourseData = () => {\n    const getCourse = axios.get('/courses/details', {params: { token, course_id }})\n      .then((courseResponse) => {\n        const courseData = courseResponse.data.course\n        console.log(courseData)\n        setCourse(courseData)\n      })\n      .catch((err) => {})\n  }\n\n  function getTopic(module_id) {\n    for (var t = 0; t < course.modules.length; t++) {\n      if (course.modules[t].module_id == module_id) {\n        return course.modules[t]\n      }\n    }\n  }\n\n  function getTask(module_id, taskgroup_id, task_id) {\n    for (var t = 0; t < course.modules.length; t++) {\n      if (course.modules[t].module_id == module_id) {\n        for (var tg = 0; tg < course.modules[t].taskgroups.length; tg++) {\n          if (course.modules[t].taskgroups[tg].taskgroup_id == taskgroup_id) {\n            for (var tk = 0; tk < course.modules[t].taskgroups[tg].tasks.length; tk++) {\n              if (course.modules[t].taskgroups[tg].tasks[tk].task_id == task_id) {\n                return course.modules[t].taskgroups[tg].tasks[tk]\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  function showTopic(module_id) {\n    var element = document.getElementById(module_id)\n    element.style.borderTop = '1px solid lightgray'\n    element.style.borderLeft = '1px solid lightgray'\n    element.style.borderRight = '1px solid lightgray'\n\n    var topic = getTopic(module_id)\n\n    setCurrentTopic(topic)\n  }\n\n  function displayTaskgroup(taskgroup_id) {\n    var element = document.getElementById(taskgroup_id)\n    var elements = element.childNodes\n\n    console.log(element.name)\n\n    if (element.name == 'undisplayed' || element.name == undefined) {\n      for (var e = 1; e < elements.length; e++) {\n        elements[e].style.display = 'block'\n      }\n      element.name = 'displayed'\n\n    } else if (element.name == 'displayed') {\n      for (var e = 1; e < elements.length; e++) {\n        elements[e].style.display = 'none'\n      }\n      element.name = 'undisplayed'\n    }\n  }\n\n  function displayTask(module_id, taskgroup_id, task_id) {\n    var task = getTask(module_id, taskgroup_id, task_id)\n    console.log(task)\n    setCurrentTask(task)\n    document.getElementById('taskBox').innerHTML += converter.makeHtml(currentTask.description)\n  }\n\n  const step = useStep(fetchCourseData, [], 2)\n\n  var converter = new Converter()\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div>\n            <h1 id='courseName'>{course.name}</h1>\n        </div>\n\n        <hr/>\n\n        <table id='topicProgress'>\n          <tr>\n          {course.modules.map(({ module_name }, index) => (\n            <td>{module_name}</td>\n          ))}\n          </tr>\n          <tr id='progressDashRow'>\n\n          </tr>\n\n        </table>\n\n        <div id='topicTabs'>\n        {course.modules.map(({ module_id, module_name, topic_id }, index) => (\n          <div class='topicTab' id={module_id} onClick={() => showTopic(module_id)}>\n            {module_name}\n          </div>\n        ))}\n        </div>\n\n        <div>\n            <div id='taskgroupList'>\n            {currentTopic.taskgroups.map(({ taskgroup_id, name, tasks }, index) => (\n              <span className='taskGroupList' name='undisplayed' id={taskgroup_id}>\n                <span className='taskGroupName' onClick={() => displayTaskgroup(taskgroup_id)}>\n                {name}\n                </span>\n                {tasks.map(({ task_id, name, difficulty }, index) => (\n                  <span style={{display: 'none'}} id={task_id} onClick={() => displayTask(currentTopic.module_id, taskgroup_id, task_id)}\n                  className={difficulty}>{name}</span>\n                ))}\n              </span>\n            ))}\n            </div>\n\n            <div id='taskBox'>\n            {\n              <>\n                <h1>{currentTask.name}</h1>\n\n              </>\n            }\n            </div>\n        </div>\n    </>\n  }/>\n  )\n\n}\n\nexport default CoursesViewPage\n"]},"metadata":{},"sourceType":"module"}