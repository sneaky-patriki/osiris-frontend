{"ast":null,"code":"import React from 'react';\nexport let stepSubscribers = [];\nexport const subscribeToStep = (subscriber, interval = 1) => {\n  if (stepSubscribers.find(o => o.subscriber == subscriber) != undefined) return;\n  stepSubscribers.push({\n    subscriber,\n    interval\n  });\n};\nexport const unsubscribeToStep = unsubscriber => stepSubscribers = stepSubscribers.filter(o => o.subscriber != unsubscriber);\nexport const step = iter => {\n  stepSubscribers.forEach(o => {\n    if (!iter || iter % o.interval == 0) {\n      o.subscriber();\n    }\n  });\n};\nexport const useStep = (subscriber, watches = [], interval = 1) => {\n  const shouldSubscribe = subscriber && typeof subscriber == 'function';\n  React.useEffect(() => {\n    if (shouldSubscribe) {\n      subscriber();\n      subscribeToStep(subscriber, interval);\n      return () => unsubscribeToStep(subscriber);\n    }\n  }, watches);\n  return step;\n};","map":{"version":3,"sources":["/Users/nicholaspatrikeos/Sites/Gallifrey4.0/gallifrey-frontend/src/utils/update.js"],"names":["React","stepSubscribers","subscribeToStep","subscriber","interval","find","o","undefined","push","unsubscribeToStep","unsubscriber","filter","step","iter","forEach","useStep","watches","shouldSubscribe","useEffect"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAO,IAAIC,eAAe,GAAG,EAAtB;AAEP,OAAO,MAAMC,eAAe,GAAG,CAACC,UAAD,EAAaC,QAAQ,GAAC,CAAtB,KAA4B;AACzD,MAAIH,eAAe,CAACI,IAAhB,CAAqBC,CAAC,IAAIA,CAAC,CAACH,UAAF,IAAgBA,UAA1C,KAAyDI,SAA7D,EAAwE;AACxEN,EAAAA,eAAe,CAACO,IAAhB,CAAqB;AAACL,IAAAA,UAAD;AAAaC,IAAAA;AAAb,GAArB;AACD,CAHM;AAKP,OAAO,MAAMK,iBAAiB,GAAIC,YAAD,IAAkBT,eAAe,GAAGA,eAAe,CAACU,MAAhB,CAAuBL,CAAC,IAAIA,CAAC,CAACH,UAAF,IAAgBO,YAA5C,CAA9D;AAEP,OAAO,MAAME,IAAI,GAAIC,IAAD,IAAU;AAC5BZ,EAAAA,eAAe,CAACa,OAAhB,CAAwBR,CAAC,IAAI;AAC3B,QAAI,CAACO,IAAD,IAASA,IAAI,GAAGP,CAAC,CAACF,QAAT,IAAqB,CAAlC,EAAqC;AACnCE,MAAAA,CAAC,CAACH,UAAF;AACD;AACF,GAJD;AAKD,CANM;AAQP,OAAO,MAAMY,OAAO,GAAG,CAACZ,UAAD,EAAaa,OAAO,GAAC,EAArB,EAAyBZ,QAAQ,GAAC,CAAlC,KAAwC;AAC7D,QAAMa,eAAe,GAAGd,UAAU,IAAI,OAAOA,UAAP,IAAqB,UAA3D;AACAH,EAAAA,KAAK,CAACkB,SAAN,CAAgB,MAAM;AACpB,QAAID,eAAJ,EAAqB;AACnBd,MAAAA,UAAU;AACVD,MAAAA,eAAe,CAACC,UAAD,EAAaC,QAAb,CAAf;AACA,aAAO,MAAMK,iBAAiB,CAACN,UAAD,CAA9B;AACD;AACF,GAND,EAMGa,OANH;AAOA,SAAOJ,IAAP;AACD,CAVM","sourcesContent":["import React from 'react'\n\nexport let stepSubscribers = []\n\nexport const subscribeToStep = (subscriber, interval=1) => {\n  if (stepSubscribers.find(o => o.subscriber == subscriber) != undefined) return;\n  stepSubscribers.push({subscriber, interval})\n}\n\nexport const unsubscribeToStep = (unsubscriber) => stepSubscribers = stepSubscribers.filter(o => o.subscriber != unsubscriber)\n\nexport const step = (iter) => {\n  stepSubscribers.forEach(o => {\n    if (!iter || iter % o.interval == 0) {\n      o.subscriber()\n    }\n  });\n}\n\nexport const useStep = (subscriber, watches=[], interval=1) => {\n  const shouldSubscribe = subscriber && typeof subscriber == 'function'\n  React.useEffect(() => {\n    if (shouldSubscribe) {\n      subscriber();\n      subscribeToStep(subscriber, interval)\n      return () => unsubscribeToStep(subscriber)\n    }\n  }, watches)\n  return step\n}\n"]},"metadata":{},"sourceType":"module"}