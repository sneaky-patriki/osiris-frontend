{"ast":null,"code":"var _jsxFileName = \"/Users/nicholaspatrikeos/Sites/Gallifrey4.0/gallifrey-frontend/src/components/TopicsList.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport '../App.css';\nimport AuthContext from '../AuthContext';\nimport { useStep } from '../utils/update';\n\nfunction TopicsList() {\n  const [topics, setTopics] = React.useState([]);\n  const token = React.useContext(AuthContext);\n\n  const fetchTopicsData = () => {\n    const getTopics = axios.get('/topics/list', {\n      params: {\n        token\n      }\n    }).then(topicResponse => {\n      const topicData = topicResponse.data.topics;\n      console.log(topicData);\n      setTopics(topicData);\n    });\n  };\n\n  function deleteTopic(topic_id) {\n    axios.delete('/topics/delete', {\n      token,\n      topic_id\n    }).then(response => {\n      const data = response.data;\n      console.log(data);\n    }).catch(err => {});\n  }\n\n  const step = useStep(fetchTopicsData, [], 2);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"table\", {\n    id: \"topicsList\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }\n  }, \"Topic\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 27\n    }\n  }, \"Courses\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 43\n    }\n  }, \"Actions\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }, topics.map(({\n    topic_id,\n    name\n  }, index) => /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 15\n    }\n  }, name), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 30\n    }\n  }, \"Courses\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/topic/manage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 17\n    }\n  }, \"Manage \"), /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: '/topics/edit',\n      topic_id: topic_id\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 17\n    }\n  }, \"Edit \"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/topic/duplicate\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 17\n    }\n  }, \"Duplicate \"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: deleteTopic(topic_id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }, \"Delete\")))))));\n}\n\nexport default TopicsList;","map":{"version":3,"sources":["/Users/nicholaspatrikeos/Sites/Gallifrey4.0/gallifrey-frontend/src/components/TopicsList.js"],"names":["React","axios","Link","AuthContext","useStep","TopicsList","topics","setTopics","useState","token","useContext","fetchTopicsData","getTopics","get","params","then","topicResponse","topicData","data","console","log","deleteTopic","topic_id","delete","response","catch","err","step","map","name","index","pathname"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom';\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\n\nfunction TopicsList() {\n  const [topics, setTopics] = React.useState([])\n\n  const token = React.useContext(AuthContext)\n\n  const fetchTopicsData = () => {\n    const getTopics = axios.get('/topics/list', {params: { token }})\n      .then((topicResponse) => {\n        const topicData = topicResponse.data.topics\n        console.log(topicData)\n        setTopics(topicData)\n      }\n    );\n  }\n\n  function deleteTopic(topic_id) {\n    axios.delete('/topics/delete', { token, topic_id })\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n      })\n      .catch((err) => {})\n  }\n\n  const step = useStep(fetchTopicsData, [], 2)\n\n  return (\n    <>\n      <table id='topicsList'>\n        <thead>\n          <tr>\n            <td>Topic</td><td>Courses</td><td>Actions</td>\n          </tr>\n        </thead>\n        <tbody>\n          {topics.map(({ topic_id, name}, index) => (\n            <tr>\n              <td>{name}</td><td>Courses</td>\n              <td>\n                <Link to='/topic/manage'>Manage </Link>\n                <Link to={{\n                  pathname: '/topics/edit',\n                  topic_id: topic_id\n                }}>Edit </Link>\n                <Link to='/topic/duplicate'>Duplicate </Link>\n                <button onClick={deleteTopic(topic_id)}>Delete</button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n  </>\n  );\n}\n\nexport default TopicsList;\n"]},"metadata":{},"sourceType":"module"}