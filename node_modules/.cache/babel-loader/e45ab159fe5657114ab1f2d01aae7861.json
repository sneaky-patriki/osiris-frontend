{"ast":null,"code":"var _jsxFileName = \"/Users/nicholaspatrikeos/Sites/Gallifrey4.0/gallifrey-frontend/src/pages/SubmissionsMarkPage.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport Layout from '../components/Layout';\nimport '../App.css';\nimport AuthContext from '../AuthContext';\nimport { useStep } from '../utils/update';\nimport { Converter } from 'showdown';\nimport ReactHTMLParser from 'react-html-parser';\n\nfunction SubmissionsMarkPage(props) {\n  var submission_id;\n\n  if (props.location.submission_id != undefined) {\n    submission_id = props.location.submission_id;\n    localStorage.setItem('currentSubmission', submission_id);\n  } else {\n    submission_id = localStorage.getItem('currentSubmission');\n  }\n\n  const token = React.useContext(AuthContext);\n  const [submission, setSubmission] = React.useState({\n    submission_id: 0,\n    comment: '',\n    status: '',\n    task: {\n      description: '',\n      solution: ''\n    },\n    url: ''\n  });\n  const [textBox, setTextBox] = React.useState(submission.task.description);\n\n  const fetchSubmissionData = () => {\n    const getSubmissions = axios.get('/submissions/details', {\n      params: {\n        token,\n        submission_id\n      }\n    }).then(submissionsResponse => {\n      const submissionData = submissionsResponse.data.submission;\n      console.log(submissionData);\n      setSubmission(submissionData);\n    }).catch(err => {});\n  };\n\n  function showTask() {\n    setTextBox(submission.task.description);\n    var taskElement = document.getElementById('showTask');\n    var solnElement = document.getElementById('showSolution');\n    taskElement.style.borderTop = '1px solid lightgray';\n    taskElement.style.borderLeft = '1px solid lightgray';\n    taskElement.style.borderRight = '1px solid lightgray';\n    solnElement.style.border = '0px';\n  }\n\n  function showSolution() {\n    setTextBox(submission.task.solution);\n    var taskElement = document.getElementById('showTask');\n    var solnElement = document.getElementById('showSolution');\n    solnElement.style.borderTop = '1px solid lightgray';\n    solnElement.style.borderLeft = '1px solid lightgray';\n    solnElement.style.borderRight = '1px solid lightgray';\n    taskElement.style.border = '0px';\n  }\n\n  function markSubmission(status) {\n    axios.put('/submissions/mark', {\n      token,\n      submission_id,\n      status\n    }).then(response => {\n      const data = response.data;\n      console.log(data);\n      props.history.push('/courses/manage');\n    });\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    var comment = event.target[0].value;\n    axios.post('/submissions/comment', {\n      token,\n      submission_id,\n      comment\n    }).then(response => {\n      const data = response.data;\n      console.log(data);\n      props.history.push('/courses/manage');\n    });\n  }\n\n  const step = useStep(fetchSubmissionData, [], 1);\n  var converter = new Converter();\n  return /*#__PURE__*/React.createElement(Layout, {\n    navtype: \"teacher\",\n    body: /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"headerSection\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }\n    }, \"Submissions\")), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"viewSubmission\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }\n    }, \"Submission\"), /*#__PURE__*/React.createElement(\"a\", {\n      href: submission.url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }\n    }, \"Download\"), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }\n    }, submission.status), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"teacherButton\",\n      id: \"closeWindow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }\n    }, \"Reset Marking\"), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"topicTabs\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"topicTab\",\n      id: \"showTask\",\n      onClick: showTask,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }\n    }, \"Task\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"topicTab\",\n      id: \"showSolution\",\n      onClick: showSolution,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }\n    }, \"Solution\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"greenTeacherButton\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }\n    }, \"Correct\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"redTeacherButton\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }\n    }, \"Incorrect\"), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"taskSolutionContent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }\n    }, ReactHTMLParser(converter.makeHtml(textBox))), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }\n    }, \"Comments\"), /*#__PURE__*/React.createElement(\"form\", {\n      name: \"addCommentForm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"comment\",\n      defaultValue: submission.comment,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Add Comment\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Link, {\n      to: \"/classes/topics/taskgroups/progress\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }\n    }, \"Back\"))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }\n  });\n}\n\nexport default SubmissionsMarkPage;","map":{"version":3,"sources":["/Users/nicholaspatrikeos/Sites/Gallifrey4.0/gallifrey-frontend/src/pages/SubmissionsMarkPage.js"],"names":["React","axios","Link","Layout","AuthContext","useStep","Converter","ReactHTMLParser","SubmissionsMarkPage","props","submission_id","location","undefined","localStorage","setItem","getItem","token","useContext","submission","setSubmission","useState","comment","status","task","description","solution","url","textBox","setTextBox","fetchSubmissionData","getSubmissions","get","params","then","submissionsResponse","submissionData","data","console","log","catch","err","showTask","taskElement","document","getElementById","solnElement","style","borderTop","borderLeft","borderRight","border","showSolution","markSubmission","put","response","history","push","handleSubmit","event","preventDefault","target","value","post","step","converter","makeHtml"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom';\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\nimport { Converter } from 'showdown'\nimport ReactHTMLParser from 'react-html-parser'\n\nfunction SubmissionsMarkPage(props) {\n\n  var submission_id\n  if (props.location.submission_id != undefined) {\n    submission_id = props.location.submission_id\n    localStorage.setItem('currentSubmission', submission_id)\n  } else {\n    submission_id = localStorage.getItem('currentSubmission')\n  }\n\n  const token = React.useContext(AuthContext)\n  const [submission, setSubmission] = React.useState({\n    submission_id: 0,\n    comment: '',\n    status: '',\n    task: {\n      description: '',\n      solution: ''\n    },\n    url: ''\n  })\n  const [textBox, setTextBox] = React.useState(submission.task.description)\n\n  const fetchSubmissionData = () => {\n    const getSubmissions = axios.get('/submissions/details', {params: { token, submission_id }})\n      .then((submissionsResponse) => {\n        const submissionData = submissionsResponse.data.submission\n        console.log(submissionData)\n        setSubmission(submissionData)\n      })\n      .catch((err) => {})\n  }\n\n  function showTask() {\n    setTextBox(submission.task.description)\n    var taskElement = document.getElementById('showTask')\n    var solnElement = document.getElementById('showSolution')\n\n    taskElement.style.borderTop = '1px solid lightgray'\n    taskElement.style.borderLeft = '1px solid lightgray'\n    taskElement.style.borderRight = '1px solid lightgray'\n    solnElement.style.border = '0px'\n  }\n\n  function showSolution() {\n    setTextBox(submission.task.solution)\n    var taskElement = document.getElementById('showTask')\n    var solnElement = document.getElementById('showSolution')\n\n    solnElement.style.borderTop = '1px solid lightgray'\n    solnElement.style.borderLeft = '1px solid lightgray'\n    solnElement.style.borderRight = '1px solid lightgray'\n    taskElement.style.border = '0px'\n  }\n\n  function markSubmission(status) {\n    axios.put('/submissions/mark', { token, submission_id, status })\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n        props.history.push('/courses/manage')\n      })\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault()\n\n    var comment = event.target[0].value\n\n    axios.post('/submissions/comment', { token, submission_id, comment })\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n        props.history.push('/courses/manage')\n      })\n  }\n\n  const step = useStep(fetchSubmissionData, [], 1)\n  var converter = new Converter()\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div className='headerSection'>\n          <h1>Submissions</h1>\n        </div>\n        <hr/>\n        <div className='viewSubmission'>\n          <h4>Submission</h4>\n          <a href={submission.url}>Download</a>\n          <h4>{submission.status}</h4>\n          <div className='teacherButton' id='closeWindow'>\n            Reset Marking\n          </div>\n\n          <div id='topicTabs'>\n            <div className='topicTab' id='showTask' onClick={showTask}>Task</div>\n            <div className='topicTab' id='showSolution' onClick={showSolution}>Solution</div>\n          </div>\n\n          <div className='greenTeacherButton'>Correct</div>\n          <div className='redTeacherButton'>Incorrect</div>\n          <div id='taskSolutionContent'>\n            {ReactHTMLParser(converter.makeHtml(textBox))}\n          </div>\n          <h4>Comments</h4>\n          <form name='addCommentForm'>\n            <input type='text' name='comment' defaultValue={submission.comment}/>\n            <input type='submit' value='Add Comment'/>\n          </form>\n          <Link to='/classes/topics/taskgroups/progress'>Back</Link>\n        </div>\n      </>\n    }/>\n  )\n\n}\n\nexport default SubmissionsMarkPage\n"]},"metadata":{},"sourceType":"module"}