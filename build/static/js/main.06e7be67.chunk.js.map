{"version":3,"sources":["axios.js","AuthContext.js","components/Layout.js","pages/LoginPage.js","utils/update.js","pages/TeacherDashboardPage.js","pages/StudentDashboardPage.js","components/TopicsList.js","pages/TopicsListPage.js","pages/TopicsAddPage.js","pages/TopicsEditPage.js","utils/helperFunctions.js","components/ManageTopic.js","pages/TopicsManagePage.js","pages/TaskgroupsAddPage.js","pages/TaskgroupsEditPage.js","pages/TaskgroupsMovePage.js","pages/TasksAddPage.js","pages/TasksViewPage.js","pages/TasksEditPage.js","pages/TasksMovePage.js","pages/AttachmentsManagePage.js","components/CoursesList.js","pages/CoursesListPage.js","pages/CoursesAddPage.js","pages/CoursesEditPage.js","components/ManageCourse.js","pages/CoursesManagePage.js","components/ViewCourse.js","pages/CoursesViewPageTeacher.js","pages/CoursesViewPageStudent.js","pages/ModulesAddPage.js","pages/ModulesRenamePage.js","components/ClassesList.js","pages/ClassesListPage.js","pages/ClassesListPageStudent.js","pages/ClassesAddPage.js","pages/ClassesEditPage.js","components/ManageClass.js","pages/ClassesManagePage.js","pages/EnrolmentsAddPage.js","pages/EnrolmentsImportPage.js","pages/CourseProgressPage.js","pages/TopicProgressPage.js","pages/TaskgroupProgressPage.js","pages/SubmissionsMarkPage.js","pages/CourseProgressDifficultyPage.js","pages/StudentProgressPage.js","pages/UsersManagePage.js","pages/UsersImportPage.js","pages/UserSettingsPage.js","components/ProtectedRoute.js","App.js","serviceWorker.js","index.js"],"names":["axios","defaults","baseURL","headers","put","post","delete","CancelToken","interceptors","request","use","response","error","console","message","log","data","_","get","errorBlock","document","getElementById","innerHTML","style","display","Promise","reject","AuthContext","React","createContext","AuthProvider","Provider","Consumer","Layout","navtype","body","token","useContext","logout","then","window","location","href","id","to","pathname","userType","name","onClick","className","LoginPage","setAuth","props","onSubmit","event","preventDefault","username","target","value","password","u_id","user_type","history","push","catch","err","type","placeholder","stepSubscribers","subscribeToStep","subscriber","interval","undefined","find","o","unsubscribeToStep","unsubscriber","filter","step","iter","forEach","useStep","watches","shouldSubscribe","useEffect","TeacherDashboardPage","useState","classes","setClasses","setName","params","classResponse","classData","nameData","map","index","class_id","submissions","submission_id","student","task","StudentDashboardPage","class","course","teachers","progress","length","width","unmarked","correct","incorrect","course_id","TopicsList","topics","setTopics","topicResponse","topicData","topic_id","courses","topic_name","reload","deleteTopic","TopicsListPage","TopicsAddPage","TopicsEditPage","dragSrcEl","tableRows","localStorage","setItem","getItem","defaultValue","startReorder","tableID","querySelectorAll","row","draggable","call","tableRow","addEventListener","handleDragStart","handleDragEnter","handleDragOver","handleDragLeave","handleDrop","handleDragEnd","finishReorder","removeEventListener","element","this","opacity","dataTransfer","effectAllowed","setData","dropEffect","classList","add","remove","stopPropagation","getData","swap","getTimeDifference","timeSubmitted","currentTime","difference","Math","floor","taskType","ManageTopic","taskgroups","topic","setTopic","setCurrentTime","timeData","backgroundColor","color","newTaskGroupList","taskgroup_id","tasks","modified","submit_multiple","taskgroup_name","deleteTaskGroup","newTaskList","reorderTasks","task_id","difficulty","answer_type","task_name","deleteTask","TopicsManagePage","TaskgroupsAddPage","checked","TaskgroupsEditPage","TaskgroupsMovePage","topicsResponse","topicsData","newTopic","TasksAddPage","description","hint","solution","TasksViewPage","showdownHighlight","require","answerBox","taskgroup","attachments","choices","correct_answer","setTask","for","includes","taskResponse","taskData","converter","Converter","extensions","makeHtml","replace","ReactHTMLParser","attachment_id","cover_name","url","TasksEditPage","numChoices","setNumChoices","setChoices","n","defaultChecked","nums","i","correct_answers","c","TasksMovePage","newTaskgroup","AttachmentsManagePage","setAttachments","newAttachments","setNewAttachments","file","removeNewAttachment","setFile","files","handleSubmit","attachment","form","FormData","append","attachmentsResponse","attachmentsData","deleteAttachment","Array","encType","onChange","CoursesList","setCourses","courseResponse","courseData","course_name","deleteCourse","CoursesListPage","CoursesAddPage","CoursesEditPage","ManageCourse","modules","setCourse","newTopicList","module_id","module_name","removeTopic","CoursesManagePage","ViewCourse","currentTopic","setCurrentTopic","currentTask","setCurrentTask","setSubmissions","setProgress","numFiles","setNumFiles","showTopic","elements","childNodes","e","borderTop","borderLeft","borderRight","border","t","getTopic","displayTask","tg","tk","getTask","taskgroup_list","label","taskgroup_submit_list","selected","answer","taskSubmissionState","subs","sb","status","submissionsResponse","submissionData","progressData","submissionBlock","showHint","taskSubs","taskSubmissions","choice","selected_answer","comment","existingSubmissions","time","multipleSubmit","fileboxes","displayTaskgroup","CoursesViewPageTeacher","CoursesViewPageStudent","ModulesAddPage","ModulesRenamePage","ClassesList","year","deleteClass","ClassesListPage","ClassesListPageStudent","ClassesAddPage","ClassesEditPage","newTeacherSection","cls","setClass","newTeacher","setNewTeacher","setTeachers","teachersRemoved","teacherResponse","teacherData","removeTeacher","ManageClass","students","removeStudent","ClassesManagePage","EnrolmentsAddPage","setStudents","studentResponse","studentData","EnrolmentsImportPage","CourseProgressPage","student_id","module","TopicProgressPage","fetchClassData","TaskgroupProgressPage","setTaskgroup","taskgroupResponse","taskgroupData","submitted","total","getAnswerType","round","SubmissionsMarkPage","submission","setSubmission","textBox","setTextBox","showTask","taskElement","solnElement","showSolution","markSubmission","markingContent","a","b","equivalent","sort","CourseProgressDifficultyPage","Bronze","Silver","Gold","Platinum","Kryptonite","StudentProgressPage","studentName","setStudentName","classname","UsersManagePage","deleteUser","userResponse","importType","UsersImportPage","charAt","toUpperCase","slice","UserSettingsPage","old_password","new_password","confirm_password","dashboard","ProtectedRoute","App","authDetails","setAuthDetails","path","render","exact","component","Boolean","hostname","match","ReactDOM","StrictMode","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.06e7be67.chunk.js","sourcesContent":["import axios from 'axios'\nimport qs from 'qs';\nimport _ from 'lodash';\n\nimport { toast } from 'react-toastify';\n\naxios.defaults.baseURL = \"http://127.0.0.1:8080\"\naxios.defaults.headers.put['Content-Type'] = 'application/json';\naxios.defaults.headers.post['Content-Type'] = 'application/json';\naxios.defaults.headers.delete['Content-Type'] = 'application/json';\n\n// temporarily cancel all requests until backend is ready\nconst CancelToken = axios.CancelToken;\n\naxios.interceptors.request.use((request) => {\n    // if (request.method === 'put' || request.method === 'post' || request.method === 'delete') {\n    //     request.data = qs.stringify(request.data);\n    // }\n    return request;\n});\n\nconst errorHandler = (error) => {\n    // great gist https://gist.github.com/saqueib/a495af17d7c0e2fd5c2316b0822ebac3\n\n    // if has response show the error\n    console.error(error);\n\n    let message = 'An error occurred.';\n\n    if (error.response) {\n        console.log(error.response.data)\n        message = _.get(error, 'response.data.message') || message;\n    }\n    console.log(message)\n\n    // toast.error(message); // This isn't working\n    var errorBlock = document.getElementById('error')\n    errorBlock.innerHTML = message\n    errorBlock.style.display = 'block'\n\n    return Promise.reject({ ...error })\n}\n\nconst responseHandler = (response) => {\n    return response;\n}\n\naxios.interceptors.response.use(responseHandler, errorHandler);\n","import React from 'react'\n\nconst AuthContext = React.createContext()\n\nexport const AuthProvider = AuthContext.Provider;\nexport const AuthConsumer = AuthContext.Consumer;\nexport default AuthContext;\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport AuthContext from '../AuthContext'\nimport axios from 'axios'\n\nfunction Layout({navtype, body}, ...props) {\n  const token = React.useContext(AuthContext)\n\n  function logout() {\n    axios.post('/auth/logout', {token})\n      .then((response) => {\n        console.log(response)\n        window.location.href = '/login'\n      })\n  }\n\n  console.log(navtype)\n\n  if (navtype == 'teacher') {\n    return (\n      <>\n        <div id='navbar'>\n          <h3>Osiris</h3>\n          <h4><Link to={{\n            pathname: '/user/settings',\n            userType: 'teacher'\n        }}>Profile</Link></h4>\n          <h4><Link to='/teacher'>Dashboard</Link></h4>\n          <h4><Link to='/courses'>Courses</Link></h4>\n          <h4><Link to='/classes'>Classes</Link></h4>\n          <h4><Link to='/topics'>Topics</Link></h4>\n          <h4><Link to='/users'>Users</Link></h4>\n          <div name='logout'><h4><Link onClick={logout}>LOGOUT</Link></h4></div>\n        </div>\n\n        <div id='error'></div>\n        {body}\n        <div className='footer'>\n          Osiris 1.0.0<br />\n          Developed By <a href='mailto:nick.p@iinet.net.au'>Nick Patrikeos</a>.\n        </div>\n      </>\n    );\n  } else if (navtype == 'student') {\n    return (\n      <>\n        <div id='navbar'>\n          <h3>Osiris</h3>\n          <h4><Link to={{\n            pathname: '/user/settings',\n            userType: 'teacher'\n        }}>Profile</Link></h4>\n          <h4><Link to='/student'>Dashboard</Link></h4>\n          <div name='logout'><h4><Link onClick={logout}>LOGOUT</Link></h4></div>\n        </div>\n        <div id='error'></div>\n        {body}\n        <div className='footer'>\n          Osiris 4.0.0<br />\n          Developed By <a href='mailto:nick.p@iinet.net.au'>Nick Patrikeos</a>.\n        </div>\n      </>\n    );\n  } else {\n    return (\n      <>\n        <div id='navbar'>\n          <h3>Osiris</h3>\n        </div>\n        <div id='error'></div>\n        {body}\n        <div className='footer'>\n          Osiris 1.0.0<br />\n          Developed By <a href='mailto:nick.p@iinet.net.au'>Nick Patrikeos</a>.\n        </div>\n      </>\n    )\n  }\n}\n\nexport default Layout\n","import React from 'react'\nimport axios from 'axios'\nimport '../App.css'\nimport Layout from '../components/Layout'\n\nfunction LoginPage({ setAuth, ...props }) {\n\n  function handleSubmit(event) {\n    event.preventDefault()\n\n    const username = event.target[0].value;\n    const password = event.target[1].value\n\n    if (!username || !password) return;\n\n    axios.post('/auth/login', { username, password })\n      .then((response) => {\n        const data = response.data\n        setAuth(data.token, data.u_id)\n\n        if (data.user_type == 'teacher') {\n          props.history.push('/teacher')\n        } else if (data.user_type == 'student') {\n          props.history.push('/student')\n        }\n      })\n      .catch((err) => {});\n  }\n\n  return (\n    <Layout navtype='' body={\n      <div id='logindiv'>\n          <h1>Login</h1>\n          <form onSubmit={handleSubmit}>\n              <input type='text' name='username' placeholder=\"*Username\" />\n              <br />\n              <input type='password' name='password' placeholder=\"*Password\" />\n              <br />\n              <input type='submit' value='Login' />\n          </form>\n      </div>\n    }/>\n  )\n\n}\n\nexport default LoginPage\n","import React from 'react'\n\nexport let stepSubscribers = []\n\nexport const subscribeToStep = (subscriber, interval=1) => {\n  if (stepSubscribers.find(o => o.subscriber == subscriber) != undefined) return;\n  stepSubscribers.push({subscriber, interval})\n}\n\nexport const unsubscribeToStep = (unsubscriber) => stepSubscribers = stepSubscribers.filter(o => o.subscriber != unsubscriber)\n\nexport const step = (iter) => {\n  stepSubscribers.forEach(o => {\n    if (!iter || iter % o.interval == 0) {\n      o.subscriber()\n    }\n  });\n}\n\nexport const useStep = (subscriber, watches=[], interval=1) => {\n  const shouldSubscribe = subscriber && typeof subscriber == 'function'\n  React.useEffect(() => {\n    if (shouldSubscribe) {\n      subscriber();\n      subscribeToStep(subscriber, interval)\n      return () => unsubscribeToStep(subscriber)\n    }\n  }, watches)\n  return step\n}\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom';\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\n\nfunction TeacherDashboardPage(props) {\n\n  const [classes, setClasses] = React.useState([])\n  const [name, setName] = React.useState([])\n  const token = React.useContext(AuthContext)\n\n  const fetchClassesData = () => {\n    const getClasses = axios.get('/classes/teacher', {params: { token }})\n      .then((classResponse) => {\n        const classData = classResponse.data.classes\n        const nameData = classResponse.data.name\n        console.log(classData)\n        setClasses(classData)\n        setName(nameData)\n      })\n      .catch((err) => {})\n  }\n\n  const step = useStep(fetchClassesData, [], 2)\n\n  return (\n    <Layout\n      navtype=\"teacher\"\n      body={\n        <>\n          <div className='teacherDashboardSection'>\n              <h1>Dashboard</h1>\n              <p>Welcome to Osiris, {name}.</p>\n              <h3>My Classes</h3>\n              <hr />\n              <table id='myClasses'>\n                  <tr><td>Name</td><td>Actions</td></tr>\n                  {classes.map(({ class_id, name }, index) => (\n                    <tr>\n                      <td>{name}</td>\n                      <td><Link to={{\n                        pathname: '/classes/manage',\n                        class_id: class_id\n                      }}>Manage</Link></td>\n                    </tr>\n                  ))}\n              </table>\n          </div>\n\n          <div className='teacherDashboardSection'>\n              <h3>Recent Submissions</h3>\n              <hr />\n              <table id='recentSubmissions'>\n                  <tr><td>Student</td><td>Task</td><td>Actions</td></tr>\n                  {classes.map(({ submissions }, index) => (\n                    <>\n                      {submissions.map(({ submission_id, student, task}, index) => (\n                        <tr>\n                          <td>{student.name}</td>\n                          <td>{task.name}</td>\n                          <td><Link to={{\n                            pathname: '/submissions/mark',\n                            submission_id: submission_id\n                          }}>View Submission</Link></td>\n                        </tr>\n                      ))}\n                    </>\n                  ))}\n              </table>\n          </div>\n        </>\n\n      }\n    />\n  );\n}\n\nexport default TeacherDashboardPage\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom';\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\n\nfunction StudentDashboardPage(props) {\n\n  const [classes, setClasses] = React.useState([])\n  const token = React.useContext(AuthContext)\n\n  const fetchClassesData = () => {\n    const getClasses = axios.get('/classes/student', {params: { token }})\n      .then((classResponse) => {\n        const classData = classResponse.data.classes\n        console.log(classData)\n        setClasses(classData)\n      })\n      .catch((err) => {})\n  }\n\n  const step = useStep(fetchClassesData, [], 2)\n\n  return (\n    <Layout navtype='student'\n    body={\n      <>\n        <div class='headerSection'>\n            <h1>Dashboard</h1>\n        </div>\n\n        <hr/>\n\n        <div id='enrolments'>\n            <h3>My Enrolments</h3>\n            {classes.map(({ class_id, course, name, teachers, progress }, index) => (\n              <div className='enrolmentBox'>\n                <h3>{name}</h3> with {\n                  teachers.map(({name}, index) => (<>{name}{ (index != teachers.length - 1) ? ', ' : ''} </>))\n                }\n                <div className='progressDash'>\n                  <div className='unmarkedDash' style={{width: progress.course.unmarked + '%'}}></div>\n                  <div className='correctDash' style={{width: progress.course.correct + '%'}}></div>\n                  <div className='incorrectDash' style={{width: progress.course.incorrect + '%'}}></div>\n                </div>\n                <div className='studentButton'>\n                  <Link to={{\n                    pathname: '/courses/view/student',\n                    course_id: course.course_id,\n                  }}>View Class</Link></div>\n              </div>\n            ))}\n        </div>\n\n        <div class='viewAllClasses'>\n            You can view other classes and submit for activities, but they will not be marked.\n            <br/><br/>\n            <div className='studentButton'>\n              <Link to={{\n                  pathname: '/classes/view/student'\n              }}>View all Classes</Link>\n            </div>\n        </div>\n      </>\n    }/>\n  )\n}\n\nexport default StudentDashboardPage\n","import React from 'react'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom';\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\n\nfunction TopicsList() {\n  const [topics, setTopics] = React.useState([])\n\n  const token = React.useContext(AuthContext)\n\n  const fetchTopicsData = () => {\n    const getTopics = axios.get('/topics/list', {params: { token }})\n      .then((topicResponse) => {\n        const topicData = topicResponse.data.topics\n        console.log(topicData)\n        setTopics(topicData)\n      }\n    );\n  }\n\n  function deleteTopic(topic_id) {\n\n    axios.delete('/topics/delete', { data: { token, topic_id }})\n      .then((response) => {\n        const data = response.data\n        window.location.reload()\n      })\n      .catch((err) => {})\n  }\n\n  const step = useStep(fetchTopicsData, [], 2)\n\n  return (\n    <>\n      <table id='topicsList'>\n        <thead>\n          <tr>\n            <td>Topic</td><td>Courses</td><td>Actions</td>\n          </tr>\n        </thead>\n        <tbody>\n          {topics.map(({ topic_id, name, courses}, index) => (\n            <tr>\n              <td>{name}</td><td>{courses.map(({ course_id, name }, index ) => (\n                <>\n                  <Link to={{\n                    pathname: '/courses/manage',\n                    course_id: course_id\n                  }}>{name}</Link>{(index != courses.length - 1) ? ', ' : ''}\n                </>\n              ))}</td>\n              <td>\n                <Link to={{\n                  pathname: '/topics/manage',\n                  topic_id: topic_id\n                }}>Manage </Link>\n                <Link to={{\n                  pathname: '/topics/edit',\n                  topic_id: topic_id,\n                  topic_name: name\n                }}>Edit </Link>\n                <Link to='/topic/duplicate'>Duplicate </Link>\n                <Link onClick={() => deleteTopic(topic_id)}>Delete</Link>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n  </>\n  );\n}\n\nexport default TopicsList;\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport TopicsList from '../components/TopicsList'\nimport '../App.css'\nimport { Link } from 'react-router-dom'\n\nfunction TopicsListPage(props) {\n  return (\n    <Layout\n      navtype='teacher'\n      body={\n        <>\n          <div class='headerSection'>\n              <h1>Topics</h1>\n\n              <Link to='/topics/add'><div className='teacherButton'>Add Topic\n              </div></Link>\n          </div>\n\n          <hr />\n\n          <TopicsList/>\n        </>\n      }\n    />\n  );\n}\n\nexport default TopicsListPage\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\n\nfunction TopicsAddPage(props) {\n\n  const token = React.useContext(AuthContext)\n\n  function handleSubmit(event) {\n    event.preventDefault()\n    console.log(token)\n\n    const name = event.target[0].value\n\n    axios.post('/topics/add', { token, name })\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n        props.history.push('/topics')\n      })\n      .catch((err) => {})\n  }\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div class='headerSection'>\n            <h1>Topics</h1>\n        </div>\n        <hr/>\n\n        <form name='addTopicForm' onSubmit={handleSubmit}>\n            <input type='text' placeholder='*Title' name='name' /><br/>\n            <input type='submit' value='Create Topic' />\n            <Link to='/topics'>Cancel</Link>\n        </form>\n      </>\n    }/>\n  )\n}\n\nexport default TopicsAddPage;\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\n\nfunction TopicsEditPage(props) {\n\n  const token = React.useContext(AuthContext)\n\n  var topic_id;\n  console.log(props.location.topic_id)\n  if (props.location.topic_id != undefined) {\n    topic_id = props.location.topic_id\n    localStorage.setItem('currentTopic', topic_id)\n  } else {\n    topic_id = localStorage.getItem('currentTopic')\n  }\n  console.log(topic_id)\n\n  function handleSubmit(event) {\n    event.preventDefault()\n\n    const name = event.target[0].value\n\n    axios.put('/topics/edit', { token, topic_id, name })\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n        props.history.push('/topics')\n      })\n      .catch((err) => {})\n  }\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div class='headerSection'>\n            <h1>Topics</h1>\n        </div>\n        <hr/>\n\n        <form name='editTopicForm' onSubmit={handleSubmit}>\n            <input type='text' defaultValue={props.location.topic_name} name='name' /><br/>\n            <input type='submit' value='Update Topic' />\n            <Link to='/topics'>Cancel</Link>\n        </form>\n      </>\n    }/>\n  )\n}\n\nexport default TopicsEditPage\n","import React from 'react'\n\nvar dragSrcEl;\nvar tableRows;\n\nexport function startReorder(tableID) {\n  tableRows = document.querySelectorAll(tableID)\n\n  for (var row = 0; row < tableRows.length; row++) {\n    tableRows[row].draggable = 'true'\n  }\n\n  [].forEach.call(tableRows, function(tableRow) {\n    tableRow.addEventListener('dragstart', handleDragStart, false)\n    tableRow.addEventListener('dragenter', handleDragEnter, false)\n    tableRow.addEventListener('dragover', handleDragOver, false)\n    tableRow.addEventListener('dragleave', handleDragLeave, false)\n    tableRow.addEventListener('drop', handleDrop, false)\n    tableRow.addEventListener('dragend', handleDragEnd, false)\n  })\n}\n\nexport function finishReorder(tableID) {\n  tableRows = document.querySelectorAll(tableID)\n\n  for (var row = 0; row < tableRows.length; row++) {\n    tableRows[row].draggable = 'false'\n  }\n\n  [].forEach.call(tableRows, function(tableRow) {\n    tableRow.removeEventListener('dragstart', handleDragStart, false)\n    tableRow.removeEventListener('dragenter', handleDragEnter, false)\n    tableRow.removeEventListener('dragover', handleDragOver, false)\n    tableRow.removeEventListener('dragleave', handleDragLeave, false)\n    tableRow.removeEventListener('drop', handleDrop, false)\n    tableRow.removeEventListener('dragend', handleDragEnd, false)\n  })\n}\n\nfunction handleDragStart(element) {\n  this.style.opacity = '0.4'\n  dragSrcEl = this\n  element.dataTransfer.effectAllowed = 'none'\n  element.dataTransfer.setData('text/html', this.innerHTML)\n}\n\nfunction handleDragOver(element) {\n  if (element.preventDefault) {\n    element.preventDefault()\n  }\n\n  element.dataTransfer.dropEffect = 'move'\n\n  return false\n}\n\nfunction handleDragEnter(element) {\n  this.classList.add('over')\n}\n\nfunction handleDragLeave(element) {\n  this.classList.remove('over')\n}\n\nfunction handleDrop(element) {\n  if (element.stopPropagation) {\n    element.stopPropagation()\n  }\n\n   if (dragSrcEl != this) {\n    dragSrcEl.innerHTML = this.innerHTML\n    this.innerHTML = element.dataTransfer.getData('text/html')\n    let swap = dragSrcEl.id\n    dragSrcEl.id = this.id\n    this.id = swap\n  }\n\n  return false\n}\n\nfunction handleDragEnd(element) {\n  this.style.opacity = '1';\n\n  [].forEach.call(tableRows, function(tableRow) {\n    tableRow.classList.remove('over')\n  })\n  console.log('Drag Ended')\n}\n\nexport function getTimeDifference(timeSubmitted, currentTime) {\n    var difference = currentTime - timeSubmitted\n\n    if (difference < 60) {\n        return \"A few seconds ago\"\n    } else if (difference < 120) {\n        return \"A minute ago\"\n    } else if (difference < 3600) {\n        var mins = Math.floor(difference / 60)\n        return mins + \" minutes ago\"\n    } else if (difference < 7200) {\n        return \"An hour ago\"\n    } else if (difference < 86400) {\n        var hours = Math.floor(difference / 3600)\n        return hours + \" hours ago\"\n    } else if (difference < 172800) {\n        return \"A day ago\"\n    } else if (difference < 2592000) {\n        var days = Math.floor(difference / 172800)\n        return days + \" days ago\"\n    } else if (difference < 5184000) {\n        return \"A month ago\"\n    } else if (difference < 31104000) {\n        var months = Math.floor(difference / 2592000)\n        return months + \" months ago\"\n    } else if (difference < 62208000) {\n        return \"A year ago\"\n    } else {\n        var years = Math.floor(difference / 31104000)\n        return years + \"years ago\"\n    }\n}\n\nexport function taskType(type) {\n    switch (type) {\n        case \"multiple-choice-single\":\n          return \"Multiple Choice - Single Answer\"\n        case \"multiple-choice-multiple\":\n          return \"Multiple Choice - Multiple Answers\"\n        case \"standard\":\n          return \"Standard\"\n        case \"content\":\n          return \"Content Only\"\n        case \"short-answer\":\n          return \"Short Answer\"\n    }\n}\n","import React from 'react'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\nimport { startReorder, finishReorder, getTimeDifference, taskType } from '../utils/helperFunctions'\n\nfunction ManageTopic({ topic_id }, ...props) {\n\n  const [topic, setTopic] = React.useState({\n    name: \"\", topic_id: 0,\n    taskgroups: [], courses: []})\n  const [currentTime, setCurrentTime] = React.useState()\n\n  const token = React.useContext(AuthContext)\n\n  const fetchTopicData = () => {\n\n    const getTopic = axios.get('/topics/details', {params: { token, topic_id }})\n    .then((topicResponse) => {\n      const topicData = topicResponse.data.topic\n      const timeData = topicResponse.data.currentTime\n      console.log(topicData)\n      setTopic(topicData)\n      setCurrentTime(timeData)\n      console.log(topic)\n    })\n  }\n\n  function deleteTaskGroup(taskgroup_id) {\n    axios.delete('/taskgroups/delete', {data: { token, taskgroup_id }})\n      .then((response) => {\n        const data = response.data\n        window.location.reload()\n      })\n      .catch((err) => {})\n  }\n\n  function deleteTask(task_id) {\n    axios.delete('/tasks/delete', {data: { token, task_id }})\n      .then((response) => {\n        const data = response.data\n        window.location.reload()\n      })\n      .catch((err) => {})\n  }\n\n  function reorderTaskGroups() {\n    var element = document.getElementById('reorderTaskGroupsButton')\n\n    console.log(element.name)\n\n    if (element.name == 'notReordering' || element.name == undefined) {\n      element.name = 'reordering'\n      element.style.backgroundColor = '#dd514c'\n      element.style.color = 'white'\n      element.innerHTML = 'Finish Reordering'\n\n      startReorder('#taskGroupList tr')\n\n    } else {\n\n      element.name = 'notReordering'\n      element.innerHTML = 'Reorder Task Groups'\n      element.style.backgroundColor = 'white'\n      element.style.color = 'black'\n\n      finishReorder('#taskGroupList tr')\n\n      var tableRows = document.querySelectorAll('#taskGroupList tr')\n      console.log(tableRows)\n      var newTaskGroupList = []\n\n      for (var row = 0; row < tableRows.length; row++) {\n        console.log(tableRows[row].id)\n        newTaskGroupList.push(tableRows[row].id)\n      }\n\n      var topic_id = topic.topic_id\n      axios.put('/taskgroups/reorder', { token, topic_id, newTaskGroupList })\n        .then((response) => {\n          console.log(response)\n          window.location.reload()\n        })\n        .catch((err) => {})\n\n    }\n\n  }\n\n  function reorderTasks(taskgroup_id) {\n    var element = document.getElementById('reorderTasksButton' + taskgroup_id)\n\n    if (element.name == 'notReordering' || element.name == undefined) {\n      element.name = 'reordering'\n      element.style.backgroundColor = '#dd514c'\n      element.style.color = 'white'\n      element.innerHTML = 'Finish Reordering'\n\n      startReorder('#tasksList' + taskgroup_id + ' tr')\n\n  } else {\n      element.name = 'notReordering'\n      element.innerHTML = 'Reorder Tasks'\n      element.style.backgroundColor = 'white'\n      element.style.color = 'black'\n\n      finishReorder('#tasksList' + taskgroup_id + ' tr')\n\n      var tableRows = document.querySelectorAll('#tasksList' + taskgroup_id + ' tr')\n      var newTaskList = []\n\n      for (var row = 0; row < tableRows.length; row++) {\n        newTaskList.push(tableRows[row].id)\n      }\n\n      axios.put('/tasks/reorder', { token, taskgroup_id, newTaskList })\n        .then((response) => {\n          console.log(response)\n          window.location.reload()\n        })\n        .catch((err) => {})\n\n    }\n  }\n\n  const step = useStep(fetchTopicData, [], 2)\n\n  return (\n    <>\n      <div className='headerSection'>\n        <h1>Topics</h1>\n      </div>\n\n      <h4>Title</h4>\n      <p id='topicTitle'>{topic.name}</p>\n      <h4>Courses</h4>\n      <p id='topicCourses'>\n      {topic.courses.map(({ course_id, name}, index) => (\n        <>\n          <Link to={{\n            pathname: '/courses/manage',\n            course_id: course_id\n          }}>{name}</Link>{ (index != topic.courses.length - 1) ? \", \" : \"\" }\n        </>\n      ))}\n      </p>\n\n      <h2>Task Groups</h2>\n      <Link to={{\n        pathname: '/taskgroups/add',\n        topic_id: topic_id,\n        topic_name: topic.name\n      }}>\n        <div className='teacherButton'>New Task Group</div>\n      </Link>\n      <div className='teacherButton' id='reorderTaskGroupsButton' onClick={reorderTaskGroups} name='notReordering'>Reorder Task Groups</div>\n\n      <hr />\n\n      <table id='taskGroupList'>\n          <thead><td>Title</td><td>Tasks</td><td>Submission Type</td><td>Last Modified</td><td>Actions</td></thead>\n          {topic.taskgroups.map(({ taskgroup_id, name, tasks, modified, submit_multiple}, index) => (\n            <tr id={taskgroup_id}>\n              <td>{name}</td>\n              <td>{tasks.length}</td>\n              <td>{ submit_multiple ? 'Multiple Tasks' : 'Single Tasks'}</td>\n              <td>{getTimeDifference(modified, currentTime)}</td>\n              <td>\n                <Link to={{\n                  pathname: '/taskgroups/edit',\n                  topic_name: topic.name,\n                  taskgroup_id: taskgroup_id,\n                  taskgroup_name: name\n                }}>Edit </Link>\n                <Link to={{\n                  pathname: '/taskgroups/move',\n                  taskgroup_id: taskgroup_id,\n                }}>Move </Link>\n                <Link onClick={() => deleteTaskGroup(taskgroup_id)}>Delete</Link>\n              </td>\n            </tr>\n          ))}\n      </table>\n\n      <div id='tasksList'>\n      {topic.taskgroups.map(({taskgroup_id, name, tasks}, index) => (\n        <>\n          <h3>{name}</h3>\n          <div className='teacherButton'>\n            <Link to={{\n              pathname: '/tasks/add',\n              taskgroup_id: taskgroup_id,\n              topic_name: topic.name,\n              taskgroup_name: name\n            }}>New Task</Link>\n          </div>\n          <div className='reorderTasksButton' id={'reorderTasksButton' + taskgroup_id} onClick={() => reorderTasks(taskgroup_id)}>Reorder Tasks</div>\n\n          <table id={'tasksList' + taskgroup_id}>\n            <thead><td>Name</td><td>Difficulty</td><td>Task Type</td><td>Last Modified</td><td>Actions</td></thead>\n            {tasks.map(({task_id, name, difficulty, modified, answer_type}, index) => (\n              <tr id={task_id}>\n                <td><Link to={{\n                  pathname: '/tasks/view',\n                  task_id: task_id,\n                  topic_name: topic.name,\n                }}>{name}</Link></td>\n                <td>{difficulty}</td>\n                <td>{taskType(answer_type)}</td>\n                <td>{getTimeDifference(modified, currentTime)}</td>\n                <td>\n                  <Link to={{\n                    pathname: '/tasks/edit',\n                    task_id: task_id,\n                    topic_name: topic.name\n                  }}>Edit </Link>\n                  <Link to={{\n                    pathname: '/tasks/move',\n                    task_id: task_id,\n                    topic_name: topic.name\n                  }}>Move </Link>\n                  <Link to={{\n                    pathname: '/tasks/attachments',\n                    task_id: task_id,\n                    task_name: name,\n                    topic_name: topic.name\n                  }}>Attachments </Link>\n                  <Link onClick={() => deleteTask(task_id)}>Delete</Link>\n                </td>\n              </tr>\n            ))}\n          </table>\n        </>\n      ))}\n      </div>\n\n    </>\n  )\n}\n\n\n// <div className='teacherButton' id='reorderTasksButton'>Reorder Tasks</div>\nexport default ManageTopic\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport ManageTopic from '../components/ManageTopic'\nimport '../App.css'\nimport { Link } from 'react-router-dom'\n\nfunction TopicsManagePage(props) {\n  console.log(props.location.topic_id)\n\n  var topic_id;\n  if (props.location.topic_id != undefined) {\n    localStorage.setItem('currentTopic', props.location.topic_id)\n    topic_id = props.location.topic_id\n  } else {\n    topic_id = localStorage.getItem('currentTopic')\n  }\n\n  return (\n    <Layout\n      navtype='teacher'\n      body={\n        <ManageTopic\n        topic_id={topic_id}/>\n      }\n    />\n  )\n}\n\nexport default TopicsManagePage\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\n\nfunction TaskgroupsAddPage(props) {\n\n  const token = React.useContext(AuthContext)\n\n  var topic_id;\n  if (props.location.topic_id != undefined) {\n    localStorage.setItem('currentTopic', props.location.topic_id)\n    topic_id = props.location.topic_id\n  } else {\n    topic_id = localStorage.getItem('currentTopic')\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault()\n    console.log(token)\n\n    const name = event.target[0].value\n    const submit_multiple = event.target[1].checked\n\n    console.log(submit_multiple)\n\n    axios.post('/taskgroups/add', { token, topic_id, name, submit_multiple })\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n        props.history.push('/topics/manage')\n      })\n      .catch((err) => {})\n  }\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div class='headerSection'>\n            <h1>Task Groups</h1>\n            <h2>Topic: {props.location.topic_name}</h2>\n        </div>\n        <hr/>\n\n        <form name='addTaskGroupForm' onSubmit={handleSubmit}>\n            <input type='text' placeholder='*Title' name='name' /><br/>\n            <h4>Allow submissions for multiple tasks</h4>\n            <input type='checkbox' name='can_submit' /><br/>\n            <input type='submit' value='Create Task Group' />\n        </form>\n\n        <br/>\n        <Link to='/topics/manage'>Cancel</Link>\n      </>\n    }/>\n  )\n}\n\nexport default TaskgroupsAddPage;\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\n\nfunction TaskgroupsEditPage(props) {\n\n  const token = React.useContext(AuthContext)\n\n  var taskgroup_id;\n  if (props.location.taskgroup_id != undefined) {\n    localStorage.setItem('currentTaskgroup', props.location.taskgroup_id)\n    taskgroup_id = props.location.taskgroup_id\n  } else {\n    taskgroup_id = localStorage.getItem('currentTaskgroup')\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault()\n\n    const name = event.target[0].value\n\n    axios.put('/taskgroups/edit', { token, taskgroup_id, name })\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n        props.history.push('/topics/manage')\n      })\n      .catch((err) => {})\n  }\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div class='headerSection'>\n            <h1>Task Groups</h1>\n            <h2>Topic: {props.location.topic_name}</h2>\n        </div>\n        <hr/>\n\n        <form name='editTaskGroupForm' onSubmit={handleSubmit}>\n            <input type='text' name='name' defaultValue={props.location.taskgroup_name}/><br/>\n            <input type='submit' value='Update Task Group' />\n            <Link to='/topics/manage'>Cancel</Link>\n        </form>\n      </>\n    }/>\n  )\n}\n\nexport default TaskgroupsEditPage\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport { useStep } from '../utils/update'\nimport axios from 'axios'\n\nfunction TaskgroupsMovePage(props) {\n\n  const token = React.useContext(AuthContext)\n  const [topics, setTopics] = React.useState([])\n\n  var topic_id;\n  if (props.location.topic_id != undefined) {\n    localStorage.setItem('currentTopic', props.location.topic_id)\n    topic_id = props.location.topic_id\n  } else {\n    topic_id = localStorage.getItem('currentTopic')\n  }\n\n  var taskgroup_id;\n  if (props.location.taskgroup_id != undefined) {\n    localStorage.setItem('currentTaskgroup', props.location.taskgroup_id)\n    taskgroup_id = props.location.taskgroup_id\n  } else {\n    taskgroup_id = localStorage.getItem('currentTaskgroup')\n  }\n\n  const fetchTopicsData = () => {\n    const getTopics = axios.get('/topics/list', {params: { token }})\n    .then((topicsResponse) => {\n      const topicsData = topicsResponse.data.topics\n      console.log(topicsData)\n      setTopics(topicsData)\n    })\n  }\n\n  const step = useStep(fetchTopicsData, [], 2)\n\n  function handleSubmit(event) {\n    event.preventDefault()\n    console.log(event.target)\n    const newTopic = event.target[0].value\n\n    axios.put('/taskgroups/move', { token, taskgroup_id, newTopic })\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n        props.history.push('/topics/manage')\n      })\n      .catch((err) => {})\n  }\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div class='headerSection'>\n            <h1>Task Groups</h1>\n        </div>\n        <hr/>\n\n        <form onSubmit={handleSubmit} >\n          <h4>Task Group</h4>\n          <select id='taskgroup_id'>\n          {topics.map(({ topic_id, name }, index) => (\n            <option value={topic_id}>{name}</option>\n          ))}\n          </select><br/>\n          <input type='submit' value='Move Task Group'/>\n        </form>\n\n        <Link to='/topics/manage'>Cancel</Link>\n      </>\n    }/>\n  )\n}\n\nexport default TaskgroupsMovePage\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\n\nfunction TasksAddPage(props) {\n\n  const token = React.useContext(AuthContext)\n\n  var taskgroup_id;\n  if (props.location.taskgroup_id != undefined) {\n    localStorage.setItem('currentTaskgroup', props.location.taskgroup_id)\n    taskgroup_id = props.location.taskgroup_id\n  } else {\n    taskgroup_id = localStorage.getItem('currentTaskgroup')\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault()\n    console.log(event.target)\n    const name = event.target[0].value\n    const type = event.target[1].value\n    const difficulty = event.target[2].value\n    const description = event.target[3].value\n    const hint = event.target[4].value\n    const solution = event.target[5].value\n\n    axios.post('/tasks/add', { token, taskgroup_id, name, difficulty, type, description, hint, solution })\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n        props.history.push('/topics/manage')\n      })\n      .catch((err) => {})\n  }\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div class='headerSection'>\n            <h1>Tasks</h1>\n            <h2>Topic: {props.location.topic_name}</h2>\n            <h2>Task Group: {props.location.taskgroup_name}</h2>\n        </div>\n        <hr/>\n\n        <form name='addTask' onSubmit={handleSubmit}>\n          <input type='text' placeholder='*Title' name='name' /><br/><br/>\n\n          <h4>Task Type</h4>\n          <select id='type'>\n            <option value='standard'>Standard</option>\n            <option value='content'>Content only (no answer)</option>\n            <option value='multiple-choice-single'>Multiple Choice (Single Answer)</option>\n            <option value='multiple-choice-multiple'>Multiple Choice (Multiple Answers)</option>\n            <option value='short-answer'>Short Answer</option>\n          </select>\n          <br/>\n\n          <h4>*Difficulty</h4><br/>\n\n          <select id=\"difficulty\">\n              <option value=\"Bronze\">Bronze</option>\n              <option value=\"Silver\">Silver</option>\n              <option value=\"Gold\">Gold</option>\n              <option value='Platinum'>Platinum</option>\n              <option value='Kryptonite'>Kryptonite</option>\n              <option value='Unspecified'>Unspecified</option>\n          </select><br/><br/>\n\n          <textarea name='description' placeholder=\"Description\"></textarea><br/><br/>\n\n          <textarea name='hint' placeholder=\"Hint\"></textarea><br/><br/>\n\n          <textarea name='solution' placeholder=\"Solution\"></textarea><br/><br/>\n\n          <input type='submit' value='Create Task' />\n          <Link to='/topics/manage'>Cancel</Link>\n        </form>\n      </>\n    }/>\n  )\n}\n\nexport default TasksAddPage;\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\nimport { Converter } from 'showdown'\nimport ReactHTMLParser from 'react-html-parser'\n\nfunction TasksViewPage(props) {\n\n  const showdownHighlight = require('showdown-highlight')\n\n  var task_id;\n  if (props.location.task_id != undefined) {\n    task_id = props.location.task_id\n    localStorage.setItem('currentTask', props.location.task_id)\n  } else {\n    task_id = localStorage.getItem('currentTask')\n  }\n\n  const [task, setTask] = React.useState({\n    task_id: 0,\n    taskgroup: \"\",\n    name: \"\",\n    difficulty: \"\",\n    description: \"\",\n    hint: \"\",\n    solution: \"\",\n    attachments: [],\n    answer_type: \"\",\n    choices: [],\n    correct_answer: -1\n  })\n  const token = React.useContext(AuthContext)\n\n  const fetchTaskData = () => {\n    const getTask = axios.get('/tasks/details', {params: { token, task_id }})\n      .then((taskResponse) => {\n        const taskData = taskResponse.data.task\n        console.log(taskData)\n        setTask(taskData)\n      })\n  }\n\n  var answerBox\n  if (task.answer_type == 'multiple-choice-single') {\n      answerBox = (\n          <>\n            <h4>Choices</h4>\n            {task.choices.map((element, index) => (\n                <>\n                    <input type='radio' name='correctAnswer' id={'answer' + (index + 1)} checked={(task.correct_answer == index)}/>\n                    <label for={'answer' + (index + 1)}>{element}</label><br/>\n                </>\n            ))}\n          </>\n      )\n  } else if (task.answer_type == 'multiple-choice-multiple') {\n      answerBox = (\n          <>\n            <h4>Choices</h4>\n            {task.choices.map((element, index) => (\n                <>\n                    <input type='checkbox' name='correctAnswer' id={'answer' + (index + 1)} checked={(task.correct_answer.includes(index))}/>\n                    <label for={'answer' + (index + 1)}>{element}</label><br/>\n                </>\n            ))}\n          </>\n      )\n  }\n\n  const step = useStep(fetchTaskData, [], 2)\n  var converter = new Converter({extensions: [showdownHighlight]})\n  console.log(converter.makeHtml(task.description).replace(/(?:\\r\\n|\\r|\\n)/g, '<br>'))\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div class='headerSection'>\n            <h4 id='topicTitle'>{props.location.topic_name}</h4>\n            <h4 id='taskGroupTitle'>{task.taskgroup}</h4>\n            <h1>Tasks</h1>\n        </div>\n        <hr/>\n\n        <div>\n            <h3 id='taskName'>{task.name}</h3>\n\n            <h4>Difficulty</h4>\n            <p id='difficulty'>{task.difficulty}</p>\n\n            <h4>Description</h4>\n            <p id='description'>{ReactHTMLParser(converter.makeHtml(task.description).replace(/(?:\\r\\n|\\r|\\n)/g, '<br>'))}</p>\n\n            <h4>Hint</h4>\n            <p id='hint'>{ReactHTMLParser(converter.makeHtml(task.hint).replace(/(?:\\r\\n|\\r|\\n)/g, '<br>'))}</p>\n\n            {answerBox}\n\n            { (task.answer_type != 'content') ? (<><h4>Solution</h4>\n            <p id='solution'>{task.solution}</p></>) : (<></>) }\n\n            <h4>Attachments</h4>\n            <div id='attachments'>\n            {task.attachments.map(({attachment_id, cover_name, url}, index) => (\n              <div className='attachment'>\n                <h4>Attachment</h4>\n                {cover_name} <a href={url}>Download</a><br/>\n              </div>\n            ))}\n            </div>\n        </div>\n\n        <Link to='/topics/manage'>Back</Link>\n\n      </>\n    }/>\n  )\n\n}\n\n\nexport default TasksViewPage;\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\nimport { useStep } from '../utils/update'\nimport { taskType } from '../utils/helperFunctions'\n\nfunction TasksEditPage(props) {\n\n  const [task, setTask] = React.useState({\n    task_id: 0,\n    taskgroup: \"\",\n    name: \"\",\n    difficulty: \"\",\n    description: \"\",\n    hint: \"\",\n    solution: \"\",\n    answer_type: \"\",\n    choices: [],\n    correct_answer: -1\n  })\n  const [numChoices, setNumChoices] = React.useState()\n  const token = React.useContext(AuthContext)\n\n  var task_id;\n  if (props.location.task_id != undefined) {\n    localStorage.setItem('currentTask', props.location.task_id)\n    task_id = props.location.task_id\n  } else {\n    task_id = localStorage.getItem('currentTask')\n  }\n\n  const fetchTaskData = () => {\n    const getTask = axios.get('/tasks/details', {params: { token, task_id }})\n      .then((taskResponse) => {\n        const taskData = taskResponse.data.task\n        console.log(taskData)\n        setTask(taskData)\n        setNumChoices(taskData.choices.length)\n      })\n  }\n\n  const step = useStep(fetchTaskData, [], 2)\n\n  function handleSubmit(event) {\n    event.preventDefault()\n    console.log(event.target)\n    const name = event.target[0].value\n    const difficulty = event.target[1].value\n    const description = event.target[2].value\n    const hint = event.target[3].value\n\n    var choices = []\n    var correct_answers = [];\n    for (var c = 0; c < numChoices; c++) {\n        choices.push(document.getElementById('choice' + (c + 1)).value)\n        if (document.getElementById('answer' + (c + 1)).checked) {\n            correct_answers.push(c)\n        }\n    }\n\n    var solution\n    if (task.answer_type == 'multiple-choice-single' || task.answer_type == 'multiple-choice-multiple') {\n        solution = event.target[(numChoices * 2) + 6].value\n    } else {\n        solution = event.target[4].value\n    }\n\n    axios.put('/tasks/edit', { token, task_id, name, difficulty, description, hint, solution, choices, correct_answers })\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n        props.history.push('/topics/manage')\n      })\n      .catch((err) => {})\n  }\n\n  function setChoices() {\n      var n = document.getElementById('numChoices').value\n      if (n >= 0) {\n          setNumChoices(n)\n      } else {\n          console.log('Invalid number of choices')\n      }\n  }\n\n  var answerBox\n  if (task.answer_type == 'multiple-choice-single') {\n      if (numChoices == task.choices.length) {\n          answerBox = (\n              <>\n                <h4>Choices</h4><br/>\n                <p>Choose the correct answer.</p>\n                {task.choices.map((element, index) => (\n                    <>\n                        <input type='radio' name='correctAnswer' id={'answer' + (index + 1)} defaultChecked={(task.correct_answer == index)}/>\n                        <input type='text' id={'choice' + (index + 1)} defaultValue={element} /><br/>\n                    </>\n                ))}\n                <h4>Number of Choices</h4>\n                <input type='text' id='numChoices'/><br/>\n                <input type='button' onClick={setChoices} value='Reset Choices' />\n                <br/><br/>\n              </>\n          )\n      } else {\n          var nums = []\n          for (var i = 0; i < numChoices; i++) {\n              nums.push(i)\n          }\n          answerBox = (\n              <>\n                <h4>Choices</h4><br/>\n                <p>Choose the correct answer.</p>\n                {nums.map((element, index) => (\n                    <><input type='radio' name='correctAnswer' id={'answer' + (index + 1)} />\n                    <input type='text' id={'choice' + (index + 1)} placeholder={'Choice ' + (index + 1)} /><br/></>\n                ))}\n                <h4>Number of Choices</h4>\n                <input type='text' id='numChoices'/><br/>\n                <input type='button' onClick={setChoices} value='Reset Choices' />\n                <br/><br/>\n              </>\n          )\n      }\n  } else if (task.answer_type == 'multiple-choice-multiple') {\n      if (numChoices == task.choices.length) {\n          answerBox = (\n              <>\n                <h4>Choices</h4><br/>\n                <p>Choose the correct answer.</p>\n                {task.choices.map((element, index) => (\n                    <>\n                        <input type='checkbox' name='correctAnswer' id={'answer' + (index + 1)} defaultChecked={(task.correct_answer == index)}/>\n                        <input type='text' id={'choice' + (index + 1)} defaultValue={element} /><br/>\n                    </>\n                ))}\n                <h4>Number of Choices</h4>\n                <input type='text' id='numChoices'/><br/>\n                <input type='button' onClick={setChoices} value='Reset Choices' />\n                <br/><br/>\n              </>\n          )\n      } else {\n          var nums = []\n          for (var i = 0; i < numChoices; i++) {\n              nums.push(i)\n          }\n          answerBox = (\n              <>\n                <h4>Choices</h4><br/>\n                <p>Choose the correct answers.</p>\n                {nums.map((element, index) => (\n                    <><input type='checkbox' name='correctAnswer' id={'answer' + (index + 1)} />\n                    <input type='text' id={'choice' + (index + 1)} placeholder={'Choice ' + (index + 1)} /><br/></>\n                ))}\n                <h4>Number of Choices</h4>\n                <input type='text' id='numChoices'/><br/>\n                <input type='button' onClick={setChoices} value='Reset Choices' />\n                <br/><br/>\n              </>\n          )\n      }\n  } else if (task.answer_type == 'content') {\n      answerBox = <></>\n  }\n\n  console.log(answerBox)\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div class='headerSection'>\n            <h1>Tasks</h1>\n            <h2>Topic: {props.location.topic_name}</h2>\n            <h2>Task Group: {task.taskgroup}</h2>\n            <h4>Task Type: {taskType(task.answer_type)}</h4>\n        </div>\n        <hr/>\n\n        <form name='addTask' onSubmit={handleSubmit}>\n          <input type='text' placeholder='*Title' name='name' defaultValue={task.name}/><br/><br/>\n          <h4>*Difficulty</h4>\n\n          <select id=\"difficulty\">\n              <option value=\"Bronze\">Bronze</option>\n              <option value=\"Silver\">Silver</option>\n              <option value=\"Gold\">Gold</option>\n              <option value='Platinum'>Platinum</option>\n              <option value='Kryptonite'>Kryptonite</option>\n              <option value='Unspecified'>Unspecified</option>\n          </select><br/><br/>\n\n          <textarea name='description' placeholder=\"Description\" defaultValue={task.description}></textarea><br/><br/>\n\n          <textarea name='hint' placeholder=\"Hint\" defaultValue={task.hint}></textarea><br/><br/>\n\n          {answerBox}\n\n          {(task.answer_type != 'content') ? (<><textarea name='solution' placeholder=\"Solution\" defaultValue={task.solution}></textarea><br/><br/></>) : <></>}\n\n\n          <input type='submit' value='Update Task' />\n          <Link to='/topics/manage'>Cancel</Link>\n        </form>\n      </>\n    }/>\n  )\n}\n\nexport default TasksEditPage;\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\nimport { useStep } from '../utils/update'\n\nfunction TasksMovePage(props) {\n\n  const [topic, setTopic] = React.useState({ name: \"\", topic_id: 0, taskgroups: []})\n  const token = React.useContext(AuthContext)\n\n  var topic_id;\n  if (props.location.topic_id != undefined) {\n    localStorage.setItem('currentTopic', props.location.topic_id)\n    topic_id = props.location.topic_id\n  } else {\n    topic_id = localStorage.getItem('currentTopic')\n  }\n\n  var task_id;\n  if (props.location.task_id != undefined) {\n    localStorage.setItem('currentTask', props.location.task_id)\n    task_id = props.location.task_id\n  } else {\n    task_id = localStorage.getItem('currentTask')\n  }\n\n  const fetchTopicData = () => {\n    const getTopic = axios.get('/topics/details', {params: { token, topic_id }})\n    .then((topicResponse) => {\n      const topicData = topicResponse.data.topic\n      console.log(topicData)\n      setTopic(topicData)\n      console.log(topic)\n    })\n  }\n\n  const step = useStep(fetchTopicData, [], 2)\n\n  function handleSubmit(event) {\n    event.preventDefault()\n    console.log(event.target)\n    const newTaskgroup = event.target[0].value\n\n    axios.put('/tasks/move', { token, task_id, newTaskgroup })\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n        props.history.push('/topics/manage')\n      })\n      .catch((err) => {})\n  }\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div class='headerSection'>\n            <h4>{props.location.topic_name}</h4>\n            <h1>Tasks</h1>\n        </div>\n        <hr/>\n\n        <form onSubmit={handleSubmit} >\n          <h4>Task Group</h4>\n          <select id='task_id'>\n          {topic.taskgroups.map(({ taskgroup_id, name }, index) => (\n            <option value={taskgroup_id}>{name}</option>\n          ))}\n          </select><br/>\n          <input type='submit' value='Move Task'/>\n        </form>\n\n        <Link to='/topics/manage'>Cancel</Link>\n      </>\n    }/>\n  )\n}\n\nexport default TasksMovePage;\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\nimport { useStep } from '../utils/update'\n\nfunction AttachmentsManagePage(props) {\n\n  var task_id\n  if (props.location.task_id != undefined) {\n    task_id = props.location.task_id\n    localStorage.setItem('currentTask', task_id)\n  } else {\n    task_id = localStorage.getItem('currentTask')\n  }\n\n  const [attachments, setAttachments] = React.useState([])\n  const [newAttachments, setNewAttachments] = React.useState(0)\n  const token = React.useContext(AuthContext)\n  var file = false\n\n  const fetchAttachmentsData = () => {\n    axios.get('/tasks/attachments', { params: { token, task_id }})\n      .then((attachmentsResponse) => {\n        const attachmentsData = attachmentsResponse.data.attachments\n        console.log(attachmentsData)\n        setAttachments(attachmentsData)\n      })\n      .catch((err) => {})\n  }\n\n  function addNewAttachment(event) {\n    event.preventDefault()\n    console.log(newAttachments)\n    document.getElementById('addAttachmentButton').style.display = 'none'\n    setNewAttachments(newAttachments + 1)\n  }\n\n  function removeNewAttachment(event) {\n    event.preventDefault()\n    document.getElementById('addAttachmentButton').style.display = 'block'\n    setNewAttachments(newAttachments - 1)\n  }\n\n  function setFile(event) {\n    file = event.target.files[0]\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault()\n\n    console.log(event)\n    const cover_name = event.target[0].value\n\n    if (!file) {\n      console.log('No file chosen')\n      return\n    }\n\n    const attachment = file\n    console.log(cover_name, attachment)\n\n    var form = new FormData()\n    form.append('token', token)\n    form.append('task_id', task_id)\n    form.append('cover_name', cover_name)\n    form.append('attachment', attachment)\n\n    axios.post('/tasks/attachments/add', form, { headers: { 'content-type': 'multipart/form-data' }})\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n        window.location.reload()\n      })\n      .catch((err) => {})\n  }\n\n  function deleteAttachment(attachment_id) {\n    axios.delete('/tasks/attachments/delete', { data: { token, attachment_id }})\n      .then((response) => {\n        const data = response.data\n        window.location.reload()\n      })\n      .catch((err) => {})\n  }\n\n  const step = useStep(fetchAttachmentsData, [], 2)\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div className='headerSection'>\n            <h4 id='topicTitle'>{props.location.topic_name}</h4>\n            <h4 id='taskTitle'>{props.location.task_name}</h4>\n            <h1>Attachments</h1>\n            <div onClick={addNewAttachment} id='addAttachmentButton' class='teacherButton'>Add Attachment</div>\n        </div>\n        <hr/>\n\n\n        <div id='attachments'>\n        {attachments.map(({attachment_id, cover_name, url}, index) => (\n          <div className='attachment'>\n            <h4>Attachment</h4>\n            {cover_name} <a href={url}>Download</a><br/><br/>\n            <a onClick={() => deleteAttachment(attachment_id)}>Remove Attachment</a>\n          </div>\n        ))}\n        {[...Array(newAttachments)].map((element, index) => (\n          <div className='attachment'>\n            <form name='addAttachment' onSubmit={handleSubmit} encType='multipart/form-data'>\n              <input type='text' name='name' /><br/>\n              <div className='filebox'>\n                <input type='file' name='attachment' id={'attachment' + index} onChange={setFile} />\n                <label for={'attachment' + index}>Choose File</label><br/>\n              </div>\n              <br/>\n              <input type='submit' id='addAttachmentButton' value='Add Attachment' />\n              <a onClick={removeNewAttachment}>Remove Attachment</a>\n            </form>\n          </div>\n        ))}\n        </div>\n\n        <Link to='/topics/manage'>Back</Link>\n      </>\n    }/>\n  )\n}\n\nexport default AttachmentsManagePage\n","import React from 'react'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\nimport { getTimeDifference } from '../utils/helperFunctions'\n\nfunction CoursesList() {\n  const [courses, setCourses] = React.useState([])\n  const [currentTime, setCurrentTime] = React.useState([])\n  const token = React.useContext(AuthContext)\n\n  const fetchCoursesData = () => {\n    const getCourses = axios.get('/courses/list', {params: { token }})\n      .then((courseResponse) => {\n        const courseData = courseResponse.data.courses\n        const timeData = courseResponse.data.currentTime\n        console.log(courseData, timeData)\n        setCourses(courseData)\n        setCurrentTime(timeData)\n      })\n  }\n\n  function deleteCourse(course_id) {\n\n    axios.delete('/courses/delete', { data: { token, course_id }})\n      .then((response) => [\n        window.location.reload()\n      ])\n      .catch((err) => {})\n  }\n\n  const step = useStep(fetchCoursesData, [], 2)\n\n  return (\n    <>\n      <table id='coursesList'>\n        <thead>\n          <tr>\n            <td>Course</td><td>Last Modified</td><td>Actions</td>\n          </tr>\n        </thead>\n        <tbody>\n          {courses.map(({ course_id, name, modified}, index) => (\n            <tr>\n              <td><Link to={{\n                pathname: '/courses/view/teacher',\n                course_id: course_id\n              }}>{name}</Link></td>\n              <td>{getTimeDifference(modified, currentTime)}</td>\n              <td>\n                <Link to={{\n                  pathname: '/courses/manage',\n                  course_id: course_id\n                }}>Manage </Link>\n                <Link to={{\n                  pathname: '/courses/edit',\n                  course_id: course_id,\n                  course_name: name\n                }}>Edit </Link>\n                <Link onClick={() => deleteCourse(course_id)}>Delete</Link>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n  </>\n  )\n}\n\nexport default CoursesList;\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport CoursesList from '../components/CoursesList'\nimport '../App.css'\nimport { Link } from 'react-router-dom'\n\nfunction CoursesListPage(props) {\n  return (\n    <Layout\n      navtype='teacher'\n      body={\n        <>\n          <div class='headerSection'>\n              <h1>Courses</h1>\n\n              <Link to='/courses/add'><div className='teacherButton'>Add Course\n              </div></Link>\n          </div>\n\n          <hr />\n\n          <CoursesList/>\n        </>\n      }\n    />\n  );\n}\n\nexport default CoursesListPage\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\n\nfunction CoursesAddPage(props) {\n  const token = React.useContext(AuthContext)\n\n  function handleSubmit(event) {\n    event.preventDefault()\n\n    const name = event.target[0].value\n\n    axios.post('/courses/add', { token, name })\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n        props.history.push('/courses')\n      })\n      .catch((err) => {})\n  }\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div class='headerSection'>\n            <h1>Courses</h1>\n        </div>\n        <hr/>\n\n        <form name='addCoursesForm' onSubmit={handleSubmit}>\n            <input type='text' placeholder='*Title' name='name' /><br/>\n            <input type='submit' value='Create Course' />\n            <Link to='/courses'>Cancel</Link>\n        </form>\n      </>\n    }/>\n  )\n}\n\nexport default CoursesAddPage\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\n\nfunction CoursesEditPage(props) {\n\n  const token = React.useContext(AuthContext)\n\n  var course_id\n  if (props.location.course_id != undefined) {\n    course_id = props.location.course_id\n    localStorage.setItem('currentCourse', course_id)\n  } else {\n    course_id = localStorage.getItem('currentCourse')\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault()\n\n    const name = event.target[0].value\n\n    axios.put('/courses/edit', { token, course_id, name})\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n        props.history.push('/courses')\n      })\n      .catch((err) => {})\n  }\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div class='headerSection'>\n            <h1>Courses</h1>\n        </div>\n        <hr/>\n\n        <form name='editCourseForm' onSubmit={handleSubmit}>\n            <input type='text' defaultValue={props.location.course_name} name='name' /><br/>\n            <input type='submit' value='Update Course' />\n            <Link to='/courses'>Cancel</Link>\n        </form>\n      </>\n    }/>\n  )\n\n}\n\nexport default CoursesEditPage\n","import React from 'react'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\nimport { startReorder, finishReorder } from '../utils/helperFunctions'\n\nfunction ManageCourse({ course_id }, ...props) {\n\n  const [course, setCourse] = React.useState({\n    course_id: 0,\n    name: \"\",\n    modules: [],\n    classes: []\n  })\n\n  const token = React.useContext(AuthContext)\n\n  const fetchCourseData = () => {\n    const getCourse = axios.get('/courses/details', {params: { token, course_id }})\n      .then((courseResponse) => {\n        const courseData = courseResponse.data.course\n        console.log(courseData)\n        setCourse(courseData)\n      })\n      .catch((err) => {})\n  }\n\n  function removeTopic(module_id) {\n      axios.delete('/courses/topics/remove', {data: { token, module_id }})\n        .then((response) => {\n          const data = response.data\n          console.log(data)\n          window.location.reload()\n        })\n        .catch((err) => {})\n  }\n\n  function reorderTopics() {\n    var element = document.getElementById('reorderTopicsButton')\n\n    if (element.name == 'notReordering' || element.name == undefined) {\n      element.name = 'reordering'\n      element.style.backgroundColor = '#dd514c'\n      element.style.color = 'white'\n      element.innerHTML = 'Finish Reordering'\n\n      startReorder('#topicList tr')\n    } else {\n      element.name = 'notReordering'\n      element.innerHTML = 'Reorder Topics'\n      element.style.backgroundColor = 'white'\n      element.style.color = 'black'\n\n      finishReorder('#topicList tr')\n\n      var tableRows = document.querySelectorAll('#topicList tr')\n      var newTopicList = []\n\n      for (var row = 0; row < tableRows.length; row++) {\n        newTopicList.push(tableRows[row].id)\n      }\n\n      console.log(newTopicList)\n\n      var course_id = course.course_id\n      axios.put('/courses/topics/reorder', { token, course_id, newTopicList })\n        .then((response) => {\n          window.location.reload()\n        })\n        .catch((err) => {})\n    }\n  }\n\n  const step = useStep(fetchCourseData, [], 2)\n\n  return (\n    <>\n      <div className='headerSection'>\n        <h1>Courses</h1>\n      </div>\n\n      <h4>Title</h4>\n      <p id='courseTitle'>{course.name}</p>\n      <h4>Classes</h4>\n      <p id='courseClasses'>{course.classes.map(({ class_id, name}, index) => (\n        <>\n          <Link to={{\n            pathname: '/classes/manage',\n            class_id: class_id\n          }}>{name}</Link>{ (index != course.classes.length - 1) ? ', ':''}\n        </>\n      ))}</p>\n\n      <h2>Topics</h2>\n      <Link to={{\n        pathname: '/courses/topics/add',\n        course_id: course_id,\n        course_name: course.name\n      }}>\n        <div class='teacherButton'>Add Topic</div>\n      </Link>\n      <div class='teacherButton' id='reorderTopicsButton' onClick={reorderTopics} name='notReordering'>Reorder Topics</div>\n\n      <hr />\n\n      <table id='topicList'>\n          <thead><td>Name</td><td>Topic</td><td>Actions</td></thead>\n          {course.modules.map(({ topic_id, topic_name, module_id, module_name }, index) => (\n            <tr id={module_id}>\n              <td>{module_name}</td>\n              <td>{topic_name}</td>\n              <td>\n                <Link to={{\n                  pathname: '/courses/topics/rename',\n                  module_id: module_id,\n                  module_name: module_name\n                }}>Rename </Link>\n                <Link to={{\n                  pathname: '/topics/manage',\n                  topic_id: topic_id,\n                }}>Manage </Link>\n                <Link onClick={() => removeTopic(module_id)}>Remove</Link>\n              </td>\n            </tr>\n          ))}\n      </table>\n\n    </>\n  )\n\n}\n\nexport default ManageCourse;\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport ManageCourse from '../components/ManageCourse'\nimport '../App.css'\nimport { Link } from 'react-router-dom'\n\nfunction CoursesManagePage(props) {\n\n  var course_id\n  if (props.location.course_id != undefined) {\n    course_id = props.location.course_id\n    localStorage.setItem('currentCourse', course_id)\n  } else {\n    course_id = localStorage.getItem('currentCourse')\n  }\n\n  return (\n    <Layout\n      navtype='teacher'\n      body={\n        <ManageCourse course_id={course_id} />\n      }/>\n  )\n\n}\n\nexport default CoursesManagePage\n","import React from 'react'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\nimport { Converter } from 'showdown'\nimport ReactHTMLParser from 'react-html-parser'\nimport { getTimeDifference } from '../utils/helperFunctions'\n\nfunction ViewCourse({ course_id, user_type }, ...props) {\n\n  const [course, setCourse] = React.useState({\n    course_id: 0,\n    name: \"\",\n    modules: []\n  })\n  const [currentTopic, setCurrentTopic] = React.useState({\n    topic_id: 0,\n    module_id: 0,\n    module_name: '',\n    taskgroups: [],\n  })\n  const [currentTask, setCurrentTask] = React.useState({\n    task_id: 0,\n    taskgroup_name: \"\",\n    taskgroup_id: 0,\n    name: \"\",\n    difficulty: \"\",\n    description: \"\",\n    hint: \"\",\n    solution: \"\",\n    attachments: [],\n    submit_multiple: false,\n    answer_type: \"\",\n    choices: [],\n  })\n  const [submissions, setSubmissions] = React.useState([])\n  const [progress, setProgress] = React.useState([])\n  // var [submissionsFetched, setSubmissionsFetched] = React.useState(false)\n  const [numFiles, setNumFiles] = React.useState();\n  const showdownHighlight = require('showdown-highlight')\n\n  const token = React.useContext(AuthContext)\n  var files = [];\n\n  const fetchCourseData = () => {\n    const getCourse = axios.get('/courses/details', {params: { token, course_id }})\n      .then((courseResponse) => {\n        const courseData = courseResponse.data.course\n        console.log(courseData)\n        setCourse(courseData)\n      })\n      .catch((err) => {})\n  }\n\n  const fetchSubmissionData = () => {\n    const task_id = currentTask.task_id\n    const getSubmissions = axios.get('/courses/submissions', {params: { token, course_id }})\n      .then((submissionsResponse) => {\n        const submissionData = submissionsResponse.data.submissions\n        const progressData = submissionsResponse.data.progress\n        console.log(submissionData)\n        console.log(progressData)\n        setSubmissions(submissionData)\n        setProgress(progressData)\n      })\n      .catch((err) => {})\n  }\n\n  function getTopic(module_id) {\n    for (var t = 0; t < course.modules.length; t++) {\n      if (course.modules[t].module_id == module_id) {\n        return course.modules[t]\n      }\n    }\n  }\n\n  function getTask(module_id, taskgroup_id, task_id) {\n    for (var t = 0; t < course.modules.length; t++) {\n      if (course.modules[t].module_id == module_id) {\n        for (var tg = 0; tg < course.modules[t].taskgroups.length; tg++) {\n          if (course.modules[t].taskgroups[tg].taskgroup_id == taskgroup_id) {\n            for (var tk = 0; tk < course.modules[t].taskgroups[tg].tasks.length; tk++) {\n              if (course.modules[t].taskgroups[tg].tasks[tk].task_id == task_id) {\n                return course.modules[t].taskgroups[tg].tasks[tk]\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  function showTopic(module_id) {\n    var elements = document.getElementById('topicTabs').childNodes\n    for (var e = 0; e < elements.length; e++) {\n      if (elements[e].id == 'md' + module_id) {\n        elements[e].style.borderTop = '1px solid lightgray'\n        elements[e].style.borderLeft = '1px solid lightgray'\n        elements[e].style.borderRight = '1px solid lightgray'\n      } else {\n        elements[e].style.border = '0px'\n      }\n    }\n\n    var topic = getTopic(module_id)\n\n    setCurrentTopic(topic)\n  }\n\n  function displayTaskgroup(taskgroup_id) {\n    var element = document.getElementById('tg' + taskgroup_id)\n    var elements = element.childNodes\n\n    console.log(element.name)\n\n    if (element.name == 'undisplayed' || element.name == undefined) {\n      for (var e = 1; e < elements.length; e++) {\n        elements[e].style.display = 'block'\n        console.log(elements[e].style.display)\n      }\n      element.name = 'displayed'\n\n    } else if (element.name == 'displayed') {\n      for (var e = 1; e < elements.length; e++) {\n        elements[e].style.display = 'none'\n      }\n      element.name = 'undisplayed'\n    }\n  }\n\n  function displayTask(module_id, taskgroup_id, task_id) {\n    var task = getTask(module_id, taskgroup_id, task_id)\n    console.log(task)\n    setCurrentTask(task)\n    setNumFiles(1)\n    files = []\n    taskgroup_list = []\n\n    var element = document.getElementById('hint')\n    element.innerHTML = 'Show Hint'\n    element.name = 'hintHide'\n    element.style.width = '80px'\n\n    var label = document.getElementById('0')\n    if (label != null) {\n        label.innerHTML = 'Choose File'\n    }\n  }\n\n  function showHint() {\n    var element = document.getElementById('hint')\n    element.innerHTML = '<h4>Hint</h4>' + converter.makeHtml(currentTask.hint).replace(/(?:\\r\\n|\\r|\\n)/g, '<br>')\n    element.name = 'hintShow'\n    element.style.width = '100%'\n    element.className = 'hintShow'\n  }\n\n  function setFile(event) {\n    files.push(event.target.files[0])\n    document.getElementById(event.target.id.replace('submission', '')).innerHTML = event.target.files[0].name\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault()\n\n    var form = new FormData()\n    form.append('token', token)\n\n    if (currentTask.answer_type == 'standard') {\n\n        if (files.length == 0) {\n          console.log('No files chosen')\n          return\n        }\n\n        var taskgroup_submit_list = []\n        for (var i = 0; i < taskgroup_list.length; i++) {\n            console.log(event.target[i].name)\n            if (event.target[i].checked) {\n                taskgroup_submit_list.push(taskgroup_list[i][0])\n            }\n        }\n\n        console.log(taskgroup_submit_list, files)\n        form.append('tasks', taskgroup_submit_list)\n\n\n        for (var i = 0; i < numFiles; i++) {\n            form.append('file' + i, files[i])\n        }\n    } else if (currentTask.answer_type == 'multiple-choice-single') {\n        for (var c = 0; c < currentTask.choices.length; c++) {\n            if (document.getElementById('answer' + (c + 1)).checked) {\n                form.append('selected_answer', c)\n                break\n            }\n        }\n        form.append('tasks', [currentTask.task_id])\n    } else if (currentTask.answer_type == 'multiple-choice-multiple') {\n        var selected = []\n        for (var c = 0; c < currentTask.choices.length; c++) {\n            if (document.getElementById('answer' + (c + 1)).checked) {\n                selected.push(c)\n            }\n        }\n        form.append('selected_answer', selected)\n        form.append('tasks', [currentTask.task_id])\n    } else if (currentTask.answer_type == 'short-answer') {\n        const answer = event.target[0].value\n        console.log(answer)\n        form.append('selected_answer', answer)\n        form.append('tasks', [currentTask.task_id])\n    }\n\n    console.log(files)\n\n\n    axios.post('/tasks/submit', form, { headers: { 'content-type': 'multipart/form-data' }})\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n        window.location.reload()\n      })\n      .catch((err) => {})\n  }\n\n  function taskSubmissions() {\n    var subs = []\n    for (var sb = 0; sb < submissions.length; sb++) {\n      if (submissions[sb].tasks.includes(currentTask.task_id)) {\n        subs.push(submissions[sb])\n      }\n    }\n    return subs\n  }\n\n  function taskSubmissionState(task_id) {\n    var subs = []\n    for (var sb = 0; sb < submissions.length; sb++) {\n      if (submissions[sb].tasks.includes(task_id)) {\n        subs.push(submissions[sb])\n      }\n    }\n\n    if (subs.length > 0) {\n      return subs[subs.length - 1].status\n    } else {\n      return ''\n    }\n\n  }\n\n  function addFile() {\n      setNumFiles(numFiles + 1)\n      document.getElementById('0').innerHTML = 'Choose File'\n  }\n\n  function removeFile(index) {\n      if (numFiles == 1) return;\n      setNumFiles(numFiles - 1)\n      document.getElementById('0').innerHTML = 'Choose File'\n  }\n\n  const step1 = useStep(fetchCourseData, [], 2)\n  const step2 = useStep(fetchSubmissionData, [], 2)\n\n  var converter = new Converter({extensions: [showdownHighlight]})\n\n  var hint;\n  if (currentTask.hint) {\n    hint = (\n      <><div className='teacherButton' id='hint' name='hintHide' onClick={() => showHint()}>Show Hint</div><br/></>\n    )\n  } else {\n    hint = <div className='teacherButton' id='hint' style={{display: 'none'}}></div>\n  }\n\n  var submissionBlock;\n  const taskSubs = taskSubmissions()\n  console.log(taskSubs)\n\n  if (user_type == 'student' && currentTask.task_id != 0) {\n    if (currentTask.answer_type == 'multiple-choice-single') {\n\n      if (taskSubs.length > 0) {\n          var choice = taskSubs[taskSubs.length - 1].selected_answer\n          var status = taskSubs[taskSubs.length - 1].status\n\n          submissionBlock = (\n              <>\n              <div className='submissionBox'>\n                <form name='submit_task_form' onSubmit={handleSubmit}>\n                  <div className='submissionDisplay' name={status}>\n                    {currentTask.choices.map((element, index) => (\n                        <>\n                            <input type='radio' name='correctAnswer' id={'answer' + (index + 1)} defaultChecked={index == choice} />\n                            <label for={'answer' + (index + 1)}>{element}</label><br/>\n                        </>\n                    ))}\n                    {taskSubs[taskSubs.length - 1].comment}\n                  </div>\n                  <input type='submit' value='Submit'/>\n                </form>\n              </div>\n              </>\n          )\n      } else {\n          submissionBlock = (\n              <div className='submissionBox'>\n                <hr/>\n                <form name='submit_task_form' onSubmit={handleSubmit}>\n                    {currentTask.choices.map((element, index) => (\n                        <>\n                            <input type='radio' name='correctAnswer' id={'answer' + (index + 1)} />\n                            <label for={'answer' + (index + 1)}>{element}</label><br/>\n                        </>\n                    ))}\n                  <input type='submit' value='Submit'/>\n                </form>\n              </div>\n\n          )\n      }\n\n  } else if (currentTask.answer_type == 'multiple-choice-multiple') {\n\n    if (taskSubs.length > 0) {\n        var choices = taskSubs[taskSubs.length - 1].selected_answer\n        var status = taskSubs[taskSubs.length - 1].status\n\n        submissionBlock = (\n            <>\n            <div className='submissionBox'>\n              <form name='submit_task_form' onSubmit={handleSubmit}>\n                <div className='submissionDisplay' name={status}>\n                  {currentTask.choices.map((element, index) => (\n                      <>\n                          <input type='checkbox' name='correctAnswer' id={'answer' + (index + 1)} defaultChecked={choices.includes(index)} />\n                          <label for={'answer' + (index + 1)}>{element}</label><br/>\n                      </>\n                  ))}\n                  {taskSubs[taskSubs.length - 1].comment}\n                </div>\n                <input type='submit' value='Submit'/>\n              </form>\n            </div>\n            </>\n        )\n    } else {\n        submissionBlock = (\n            <div className='submissionBox'>\n              <hr/>\n              <form name='submit_task_form' onSubmit={handleSubmit}>\n                  {currentTask.choices.map((element, index) => (\n                      <>\n                          <input type='checkbox' name='correctAnswer' id={'answer' + (index + 1)} />\n                          <label for={'answer' + (index + 1)}>{element}</label><br/>\n                      </>\n                  ))}\n                <input type='submit' value='Submit'/>\n              </form>\n            </div>\n\n        )\n    }\n\n  } else if (currentTask.answer_type == 'standard') {\n\n        console.log(taskSubs)\n        var existingSubmissions;\n\n        if (taskSubs.length > 0) {\n\n            existingSubmissions = (\n            <>\n              <h4>Submissions</h4>\n              {taskSubs.map(({ time, currentTime, status, comment, files }, index) => (\n                <div className='submissionDisplay' name={status}>{comment}<br/>\n                  <strong> {status}</strong><br/>\n                  {files.map(({ cover_name, url }, index) => (\n                      <><a href={url}>{cover_name}</a><br/></>\n                  ))}\n                  <span>{getTimeDifference(time, currentTime)}</span>\n                </div>\n              ))}\n            </>\n            )\n        } else {\n          existingSubmissions = <></>\n        }\n\n        var fileboxes = []\n        for (var i = 0; i < numFiles; i++) {\n            if (i != 0) {\n                fileboxes.push(<div className='filebox'>\n                                <input type='file' name={'submission' + i} id={'submission' + i} onChange={setFile} /><br/>\n                                <label for={'submission' + i} id={i}>Choose File</label>\n                                <div className='redTeacherButton' id='removeFileButton' onClick={() => removeFile(i)}>Remove File</div>\n                               </div>)\n            } else {\n                fileboxes.push(<div className='filebox'>\n                                <input type='file' name={'submission' + i} id={'submission' + i} onChange={setFile} /><br/>\n                                <label for={'submission' + i} id={i}>Choose File</label>\n                               </div>)\n            }\n        }\n\n        var multipleSubmit;\n        var taskgroup_list = []\n\n        if (currentTask.submit_multiple) {\n            for (var tg = 0; tg < currentTopic.taskgroups.length; tg++) {\n                console.log(tg)\n                if (currentTopic.taskgroups[tg].taskgroup_id == currentTask.taskgroup_id) {\n                    for (var tk = 0; tk < currentTopic.taskgroups[tg].tasks.length; tk++) {\n                        taskgroup_list.push([currentTopic.taskgroups[tg].tasks[tk].task_id, currentTopic.taskgroups[tg].tasks[tk].name])\n                    }\n                    break;\n                }\n            }\n\n            multipleSubmit = (\n                <>\n                    <h4>Submit for Multiple Tasks</h4><br/>\n                    {taskgroup_list.map((element, index) => (<>\n                        <input type=\"checkbox\" name={'task' + element[0]} />   {element[1]} <br/>\n                    </>))}\n                </>\n            )\n        } else {\n            taskgroup_list.push([currentTask.task_id, currentTask.name])\n            multipleSubmit = (<input id='singleSubmit' type='checkbox' name={'task' + currentTask.task_id} checked/>)\n        }\n\n        console.log(taskgroup_list)\n\n        submissionBlock = (\n          <div className='submissionBox'>\n            <h4>Submit Your Solution</h4>\n            <hr/>\n            <form name='submit_task_form' onSubmit={handleSubmit}>\n              {multipleSubmit}\n              <p>Files</p>\n              {fileboxes.map((element, index) => (\n                  <>{element}<br/></>\n              ))}\n              <br/><br/>\n              <div className='greenTeacherButton' id='addFileButton' onClick={addFile}>Add File</div><br/><br/>\n              <input type='submit' value='Submit'/>\n            </form>\n          </div>\n\n        )\n    } else if (currentTask.answer_type == 'short-answer') {\n        if (taskSubs.length > 0) {\n            var answer = taskSubs[taskSubs.length - 1].selected_answer\n            var status = taskSubs[taskSubs.length - 1].status\n            console.log(answer)\n\n            submissionBlock = (\n                <>\n                <div className='submissionBox'>\n                  <form name='submit_task_form' onSubmit={handleSubmit}>\n                    <div className='submissionDisplay' name={status}>\n                      <textarea name='selected_answer' value={answer}></textarea><br/>\n                      {taskSubs[taskSubs.length - 1].comment}\n                    </div>\n                    <input type='submit' value='Submit'/>\n                  </form>\n                </div>\n                </>\n            )\n        } else {\n            submissionBlock = (\n                <div className='submissionBox'>\n                  <form name='submit_task_form' onSubmit={handleSubmit}>\n                      <textarea name='selected_answer'></textarea><br/>\n                    <input type='submit' value='Submit'/>\n                  </form>\n                </div>\n\n            )\n        }\n    } else {\n        submissionBlock = <></>\n    }\n  } else {\n    if (currentTask.answer_type == 'multiple-choice-single') {\n        submissionBlock = (\n            <div className='submissionBox'>\n              <form name='submit_task_form' onSubmit={handleSubmit}>\n                  {currentTask.choices.map((element, index) => (\n                      <>\n                          <input type='radio' name='correctAnswer' id={'answer' + (index + 1)} />\n                          <label for={'answer' + (index + 1)}>{element}</label><br/>\n                      </>\n                  ))}\n              </form>\n            </div>\n        )\n    } else if (currentTask.answer_type == 'multiple-choice-multiple') {\n        submissionBlock = (\n            <div className='submissionBox'>\n              <form name='submit_task_form' onSubmit={handleSubmit}>\n                  {currentTask.choices.map((element, index) => (\n                      <>\n                          <input type='checkbox' name='correctAnswer' id={'answer' + (index + 1)} />\n                          <label for={'answer' + (index + 1)}>{element}</label><br/>\n                      </>\n                  ))}\n              </form>\n            </div>\n        )\n    } else if (currentTask.answer_type == 'short-answer') {\n        submissionBlock = (\n            <div className='submissionBox'>\n              <form name='submit_task_form' onSubmit={handleSubmit}>\n                  <textarea name='selected_answer'></textarea>\n              </form>\n            </div>\n        )\n    }\n  }\n\n  return (\n    <>\n      <div>\n          <h1 id='courseName'>{course.name}</h1>\n      </div>\n\n      <hr/>\n\n      <table id='topicProgress'>\n        <tr>\n        {course.modules.map(({ module_name }, index) => (\n          <td>{module_name}</td>\n        ))}\n        </tr>\n        <tr id='progressDashRow'>\n        {progress.map(({ unmarked, correct, incorrect, progress }, index) => (\n          <td>\n            <div className='progressDash'>\n              <div className='unmarkedDash' style={{width: progress.unmarked + '%'}}></div>\n              <div className='correctDash' style={{width: progress.correct + '%'}}></div>\n              <div className='incorrectDash' style={{width: progress.incorrect + '%'}}></div>\n            </div>\n          </td>\n        ))}\n        </tr>\n\n      </table>\n\n      <div id='topicTabs'>\n      {course.modules.map(({ module_id, module_name, topic_id }, index) => (\n        <div class='topicTab' id={\"md\" + module_id} onClick={() => showTopic(module_id)}>\n          {module_name}\n        </div>\n      ))}\n      </div>\n\n      <div id=\"taskGroupBox\">\n          <div id='taskgroupList'>\n          {currentTopic.taskgroups.map(({ taskgroup_id, name, tasks }, index) => (\n            <span className='taskGroupList' name='undisplayed' id={\"tg\" + taskgroup_id}>\n              <span className='taskGroupName' onClick={() => displayTaskgroup(taskgroup_id)}>\n              {name}\n              </span>\n              {tasks.map(({ task_id, name, difficulty }, index) => (\n                <>\n                  <span style={{display: 'none'}} id={\"tk\" + task_id} onClick={() => displayTask(currentTopic.module_id, taskgroup_id, task_id)}\n                  className={difficulty} name={taskSubmissionState(task_id)}>{name}</span>\n                </>\n              ))}\n            </span>\n          ))}\n          </div>\n\n          <div id='taskBox'>\n          {\n            <>\n              <h1 id='taskName'>{currentTask.name}</h1>\n              <span id='description'>{ReactHTMLParser(converter.makeHtml(currentTask.description).replace(/(?:\\r\\n|\\r|\\n)/g, '<br>'))}</span>\n            </>\n          }\n          {hint}\n          <br/>\n          <br/>\n          {submissionBlock}\n          {existingSubmissions}\n          </div>\n      </div>\n    </>\n  )\n\n}\n\nexport default ViewCourse\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\nimport { useStep } from '../utils/update'\nimport ViewCourse from '../components/ViewCourse'\n\nfunction CoursesViewPageTeacher(props) {\n\n  var course_id\n  if (props.location.course_id != undefined) {\n    course_id = props.location.course_id\n    localStorage.setItem('currentCourse', props.location.course_id)\n  } else {\n    course_id = localStorage.getItem('currentCourse')\n  }\n\n  return (\n    <Layout navtype='teacher' body={\n      <ViewCourse course_id={course_id} user_type='teacher' />\n  }/>\n  )\n\n}\n\nexport default CoursesViewPageTeacher\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\nimport { useStep } from '../utils/update'\nimport ViewCourse from '../components/ViewCourse'\n\nfunction CoursesViewPageStudent(props) {\n\n  var course_id\n  if (props.location.course_id != undefined) {\n    course_id = props.location.course_id\n    localStorage.setItem('currentCourse', props.location.course_id)\n  } else {\n    course_id = localStorage.getItem('currentCourse')\n  }\n\n  return (\n    <Layout navtype='student' body={\n      <ViewCourse course_id={course_id} user_type='student' />\n  }/>\n  )\n\n}\n\nexport default CoursesViewPageStudent\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\nimport { useStep } from '../utils/update'\n\nfunction ModulesAddPage(props) {\n\n  var course_id\n  if (props.location.course_id != undefined) {\n    course_id = props.location.course_id\n    localStorage.setItem('currentCourse', course_id)\n  } else {\n    course_id = localStorage.getItem('currentCourse')\n  }\n\n  const [topics, setTopics] = React.useState([])\n  const token = React.useContext(AuthContext)\n\n  const fetchTopicsData = () => {\n    const getTopics = axios.get('/topics/list', {params: { token }})\n      .then((topicResponse) => {\n        const topicData = topicResponse.data.topics\n        console.log(topicData)\n        setTopics(topicData)\n      }\n    );\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault()\n\n    const name = event.target[0].value\n    const topic_id = event.target[1].value\n\n    axios.post('/courses/topics/add', { token, course_id, topic_id, name })\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n        props.history.push('/courses/manage')\n      })\n      .catch((err) => {})\n  }\n\n  const step = useStep(fetchTopicsData, [], 2)\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div class='headerSection'>\n            <h1>Topics</h1>\n        </div>\n        <hr/>\n\n        <form name='addModuleForm' onSubmit={handleSubmit}>\n            <input type='text' placeholder='*Title' name='name' /><br/>\n            <select name='topic'>\n            {topics.map(({ topic_id, name}, index) => (\n              <option value={topic_id}>{name}</option>\n            ))}\n            </select><br/>\n            <input type='submit' value='Add Topic' /><br/><br/>\n            <Link to='/courses/manage'>Cancel</Link>\n        </form>\n      </>\n    }/>)\n}\n\nexport default ModulesAddPage\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\n\nfunction ModulesRenamePage(props) {\n\n  const token = React.useContext(AuthContext)\n\n  var module_id\n  if (props.location.module_id != undefined) {\n    module_id = props.location.module_id\n    localStorage.setItem('currentModule', module_id)\n  } else {\n    module_id = localStorage.getItem('currentModule')\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault()\n\n    const name = event.target[0].value\n\n    axios.put('/courses/topics/rename', { token, module_id, name })\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n        props.history.push('/courses/manage')\n      })\n  }\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div class='headerSection'>\n            <h1>Courses</h1>\n        </div>\n        <hr/>\n\n        <form name='renameTopicForm' onSubmit={handleSubmit}>\n            <input type='text' defaultValue={props.location.module_name} name='name' /><br/>\n            <input type='submit' value='Update Topic' />\n            <Link to='/courses/manage'>Cancel</Link>\n        </form>\n      </>\n    }/>\n  )\n}\n\nexport default ModulesRenamePage\n","import React from 'react'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom';\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\n\nfunction ClassesList() {\n\n  const [classes, setClasses] = React.useState([])\n  const token = React.useContext(AuthContext)\n\n  const fetchClassesData = () => {\n    const getClasses = axios.get('/classes/list', {params: { token }})\n      .then((classResponse) => {\n        const classData = classResponse.data.classes\n        console.log(classData)\n        setClasses(classData)\n      })\n      .catch((err) => {})\n  }\n\n  function deleteClass(class_id) {\n    axios.delete('/classes/delete', {data: { token, class_id }})\n      .then((response) => {\n        const data = response.data\n        window.location.reload()\n      })\n      .catch((err) => {})\n  }\n\n  const step = useStep(fetchClassesData, [], 2)\n\n  return (\n    <div>\n        <table id='classList'>\n            <tr><td>Title</td><td>Year</td><td>Course</td><td>Teachers</td><td>Actions</td></tr>\n            {classes.map(({ class_id, name, year, course, teachers }, index) => (\n              <tr>\n                <td>{name}</td>\n                <td>{year}</td>\n                <td><Link to={{\n                  pathname: '/courses/manage',\n                  course_id: course.course_id\n                }}>{course.name}</Link></td>\n                <td>{teachers.map((name, index) => (<>{name}{ (index != teachers.length - 1) ? ', ':  ''}</>))}</td>\n                <td>\n                  <Link to={{\n                    pathname: '/classes/manage',\n                    class_id: class_id\n                  }}>Manage </Link>\n                  <Link to={{\n                    pathname: '/classes/edit',\n                    class_id: class_id,\n                  }}>Edit </Link>\n                  <Link onClick={() => deleteClass(class_id)}>Delete</Link>\n                </td>\n              </tr>\n            ))}\n        </table>\n    </div>\n  );\n}\n\nexport default ClassesList;\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport ClassesList from '../components/ClassesList'\nimport '../App.css'\nimport { Link } from 'react-router-dom'\n\nfunction ClassesListPage(props) {\n  return (\n    <Layout\n      navtype='teacher'\n      body={\n        <>\n          <div class='headerSection'>\n              <h1>Classes</h1>\n\n              <Link to='/classes/add'><div className='teacherButton'>Add Class\n              </div></Link>\n          </div>\n\n          <hr />\n\n          <ClassesList/>\n        </>\n      }\n    />\n  );\n}\n\nexport default ClassesListPage;\n","import React from 'react'\nimport axios from 'axios'\nimport Layout from '../components/Layout'\nimport ClassesList from '../components/ClassesList'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\nimport { Link } from 'react-router-dom'\n\nfunction ClassesListPageStudent(props) {\n    const [classes, setClasses] = React.useState([])\n    const token = React.useContext(AuthContext)\n\n    const fetchClassesData = () => {\n      const getClasses = axios.get('/classes/list', {params: { token }})\n        .then((classResponse) => {\n          const classData = classResponse.data.classes\n          console.log(classData)\n          setClasses(classData)\n        })\n        .catch((err) => {})\n    }\n\n    const step = useStep(fetchClassesData, [], 2)\n\n    return (\n        <Layout navtype='student' body={\n          <>\n              <div class='headerSection'>\n                  <h1>All Classes</h1>\n              </div>\n              <hr/>\n              {classes.map(({ class_id, course, name, teachers, progress }, index) => (\n                <div className='enrolmentBox'>\n                  <h3>{name}</h3> with {\n                    teachers.map((name, index) => (<>{name}{ (index != teachers.length - 1) ? ', ' : ''} </>))\n                  }\n\n                  <div className='studentButton'>\n                    <Link to={{\n                      pathname: '/courses/view/student',\n                      course_id: course.course_id,\n                    }}>View Class</Link></div>\n                </div>\n              ))}\n        </>\n      }/>\n    );\n}\n\nexport default ClassesListPageStudent\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\nimport { useStep } from '../utils/update'\n\nfunction ClassesAddPage(props) {\n\n  const token = React.useContext(AuthContext)\n\n  const [courses, setCourses] = React.useState([])\n\n  const fetchCoursesData = () => {\n    const getCourses = axios.get('/courses/list', {params: { token }})\n      .then((courseResponse) => {\n        const courseData = courseResponse.data.courses\n        console.log(courseData)\n        setCourses(courseData)\n      })\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault()\n\n    const name = event.target[0].value\n    const year = event.target[1].value\n    const course = event.target[2].value\n\n    axios.post('/classes/add', { token, name, year, course })\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n        props.history.push('/classes')\n      })\n      .catch((err) => {})\n  }\n\n  const step = useStep(fetchCoursesData, [], 2)\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div class='headerSection'>\n            <h1>Classes</h1>\n        </div>\n        <hr/>\n\n        <form name='addClassForm' onSubmit={handleSubmit}>\n            <input type='text' placeholder='*Title' name='name' /><br/>\n            <input type='text' placeholder='Year' defaultValue='2020' name='year' /><br/>\n            <select name='courses'>\n            {courses.map(({course_id, name}, index) => (\n              <option value={course_id}>{name}</option>\n            ))}\n            </select><br/>\n            <input type='submit' value='Create Class' />\n            <Link to='/classes'>Cancel</Link>\n        </form>\n      </>\n    }/>\n  )\n}\n\nexport default ClassesAddPage\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\nimport { useStep } from '../utils/update'\n\nfunction ClassesEditPage(props) {\n\n  const [cls, setClass] = React.useState({\n    class_id: 0,\n    name: '',\n    year: '',\n    teachers: []\n  })\n  const [newTeacher, setNewTeacher] = React.useState(false)\n  const [teachers, setTeachers] = React.useState([])\n  const token = React.useContext(AuthContext)\n  var [teachersRemoved, setTeachersRemoved] = React.useState([])\n\n  var class_id;\n  console.log(props.location.class_id)\n  if (props.location.class_id != undefined) {\n    class_id = props.location.class_id\n    localStorage.setItem('currentClass', class_id)\n  } else {\n    class_id = localStorage.getItem('currentClass')\n  }\n\n  const fetchClassData = () => {\n    const getCourse = axios.get('/classes/details', {params: { token, class_id }})\n      .then((classResponse) => {\n        const classData = classResponse.data.class\n        console.log(classData)\n        setClass(classData)\n      })\n      .catch((err) => {})\n  }\n\n  const fetchTeacherData = () => {\n    console.log(cls.teachers)\n    var class_id = cls.class_id\n    const getTeachers = axios.get('/users/teachers/other', {params: { token, class_id }} )\n      .then((teacherResponse) => {\n        const teacherData = teacherResponse.data.teachers\n        console.log(teacherData)\n        setTeachers(teacherData)\n      })\n      .catch((err) => {})\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault()\n\n    const name = event.target[0].value\n    const year = event.target[1].value\n\n    var teachers = []\n\n    console.log(cls.teachers)\n\n    for (var i = 0; i < cls.teachers.length; i++) {\n      console.log(teachersRemoved.includes(cls.teachers[i]))\n      if (teachersRemoved.includes(cls.teachers[i].username) != true) {\n        teachers.push(cls.teachers[i].username)\n      }\n    }\n\n    if (newTeacher) {\n      teachers.push(event.target[event.target.length - 2].value)\n    }\n\n    console.log(teachers, teachersRemoved)\n    axios.put('/classes/edit', { token, class_id, name, year, teachers })\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n        props.history.push('/classes')\n      })\n      .catch((err) => {})\n  }\n\n  function addNewTeacher() {\n    setNewTeacher(true)\n  }\n\n  function removeNewTeacher() {\n    setNewTeacher(false)\n  }\n\n  function removeTeacher(username) {\n    teachersRemoved.push(username)\n    document.getElementById(username).style.display = 'none'\n  }\n\n  const step1 = useStep(fetchClassData, [], 1)\n  const step2 = useStep(fetchTeacherData, [], 3)\n\n  var newTeacherSection;\n  if (newTeacher) {\n    console.log(teachers)\n    newTeacherSection = (\n      <div className='attachment'>\n        <select name='teacher'>\n        {teachers.map(({ username, name }, index) => (\n          <option value={username}>{name}</option>\n        ))}\n        </select>\n        <Link onClick={removeNewTeacher}>Remove Teacher</Link>\n      </div>\n    )\n  } else {\n    newTeacherSection = <></>\n  }\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div class='headerSection'>\n            <h1>Classes</h1>\n        </div>\n        <hr/>\n\n        <div onClick={addNewTeacher} class='teacherButton'>Add Teacher</div>\n\n\n        <form name='editClassForm' onSubmit={handleSubmit}>\n            <input type='text' defaultValue={cls.name} name='name' /><br/>\n            <input type='text' defaultValue={cls.year} name='year' /><br/>\n            <div id='teachers'>\n            {cls.teachers.map(({username, name}, index) => (\n              <div className='attachment' id={username}>\n                {name}<br/>\n                <Link onClick={() => removeTeacher(username)}>Remove Teacher</Link>\n              </div>\n            ))}\n            {newTeacherSection}\n            </div>\n            <input type='submit' value='Update Class' />\n            <Link to='/classes'>Cancel</Link>\n        </form>\n      </>\n    }/>\n  )\n}\n\nexport default ClassesEditPage\n","import React from 'react'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\nimport { startReorder, finishReorder } from '../utils/helperFunctions'\n\nfunction ManageClass({ class_id }, ...props) {\n\n  const [cls, setClass] = React.useState({\n    class_id: 0,\n    name: \"\",\n    course: 0,\n    teachers: [],\n    students: []\n  })\n\n  const token = React.useContext(AuthContext)\n\n  const fetchClassData = () => {\n    const getCourse = axios.get('/classes/details', {params: { token, class_id }})\n      .then((classResponse) => {\n        const classData = classResponse.data.class\n        console.log(classData)\n        setClass(classData)\n      })\n      .catch((err) => {})\n  }\n\n  function removeStudent(username) {\n    axios.delete('/classes/enrolments/remove', {data: { token, class_id, username }})\n      .then((response) => {\n        const data = response.data\n        window.location.reload()\n      })\n      .catch((err) => {})\n  }\n\n  const step = useStep(fetchClassData, [], 1)\n\n  return (\n    <>\n      <div class='headerSection'>\n          <h1>Classes</h1>\n      </div>\n\n      <hr/>\n\n      <h4>Title</h4>\n      <p id='classTitle'>{cls.name}</p>\n      <h4>Course</h4>\n      <Link id='classCourse' to={{\n        pathname: '/courses/manage',\n        course_id: cls.course.course_id\n      }}>{cls.course.name}</Link>\n      <h4>Teachers</h4>\n      <p id='classTeachers'>\n      {cls.teachers.map(({name}, index) => (\n        <>\n          {name}{(index != cls.teachers.length - 1) ? ', ' : ''}\n        </>\n      ))}</p>\n\n      <h2>Students</h2>\n\n      <div class='teacherButton' id='progressReportButton'><Link to={{\n        pathname: '/classes/progress',\n        course_id: cls.course.course_id\n      }}>Progress Report</Link></div>\n\n      <div class='teacherButton'>\n          <Link to='/classes/enrolments/add'>Add Enrolment</Link>\n      </div>\n      <div class='teacherButton' id='importEnrolmentsButton'>\n          <Link to='/classes/enrolments/import'>Import Enrolments</Link>\n      </div>\n\n      <h/>\n\n      <table id='studentList'>\n          <tr><td>Name</td><td>Student ID</td><td>Actions</td></tr>\n          {cls.students.map(({ username, name }, index) => (\n            <tr>\n              <td>{name}</td>\n              <td>{username}</td>\n              <td><Link onClick={() => removeStudent(username)}>Remove</Link></td>\n            </tr>\n          ))}\n      </table>\n    </>\n  )\n\n}\n\nexport default ManageClass\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport ManageClass from '../components/ManageClass'\nimport '../App.css'\nimport { Link } from 'react-router-dom'\n\nfunction ClassesManagePage(props) {\n\n  var class_id\n  if (props.location.class_id != undefined) {\n    class_id = props.location.class_id\n    localStorage.setItem('currentClass', class_id)\n  } else {\n    class_id = localStorage.getItem('currentClass')\n  }\n\n  return (\n    <Layout\n      navtype='teacher'\n      body={\n        <ManageClass class_id={class_id} />\n      }/>\n  )\n\n}\n\nexport default ClassesManagePage\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\nimport { useStep } from '../utils/update'\n\nfunction EnrolmentsAddPage(props) {\n\n  const token = React.useContext(AuthContext)\n  const [students, setStudents] = React.useState([])\n\n  var class_id;\n  if (props.location.class_id != undefined) {\n    class_id = props.location.class_id\n    localStorage.setItem('currentClass', class_id)\n  } else {\n    class_id = localStorage.getItem('currentClass')\n  }\n\n  const fetchStudentData = () => {\n    const getTeachers = axios.get('/users/students/other', {params: { token, class_id }} )\n      .then((studentResponse) => {\n        const studentData = studentResponse.data.students\n        console.log(studentData)\n        setStudents(studentData)\n      })\n      .catch((err) => {})\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault()\n\n    const username = event.target[0].value\n\n    axios.post('/classes/enrolments/add', { token, class_id, username })\n    .then((response) => {\n      const data = response.data\n      console.log(data)\n      props.history.push('/classes/manage')\n    })\n    .catch((err) => {})\n  }\n\n  const step = useStep(fetchStudentData, [], 2)\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div class='headerSection'>\n            <h4 id=\"className\"></h4>\n            <h1>Classes</h1>\n        </div>\n        <hr/>\n\n        <form name='addEnrolmentForm' onSubmit={handleSubmit}>\n            <select id='students'>\n            {students.map(({username, name}, index) => (\n              <option value={username}>{name}</option>\n            ))}\n            </select><br/>\n            <input type='submit' value='Add Enrolment' />\n            <Link to='/classes/manage'>Cancel</Link>\n        </form>\n      </>\n    }/>\n\n  )\n\n}\n\nexport default EnrolmentsAddPage\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\nimport { useStep } from '../utils/update'\n\nfunction EnrolmentsImportPage(props) {\n\n  const token = React.useContext(AuthContext)\n  var file = false\n\n  var class_id;\n  if (props.location.class_id != undefined) {\n    class_id = props.location.class_id\n    localStorage.setItem('currentClass', class_id)\n  } else {\n    class_id = localStorage.getItem('currentClass')\n  }\n\n  function setFile(event) {\n    file = event.target.files[0]\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault()\n\n    if (!file) {\n      console.log('No file chosen')\n      return\n    }\n\n    var form = new FormData()\n    form.append('token', token)\n    form.append('class_id', class_id)\n    form.append('file', file)\n\n    axios.post('/classes/enrolments/import', form, { headers: { 'content-type': 'multipart/form-data' }})\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n        props.history.push('/classes/manage')\n      })\n      .catch((err) => {})\n  }\n\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div class='headerSection'>\n            <h4 id=\"className\"></h4>\n            <h1>Classes</h1>\n        </div>\n        <hr/>\n\n        <form name='addEnrolmentForm' onSubmit={handleSubmit}>\n            <div className='notice'>The file should be formatted as a CSV containing a single column of student ID values. There should be no header row.</div>\n            <input type='file' name='attachment' onChange={setFile} /><br/>\n            <input type='submit' value='Import Students' />\n            <Link to='/classes/manage'>Cancel</Link>\n        </form>\n      </>\n    }/>\n\n  )\n\n}\n\nexport default EnrolmentsImportPage\n","import React from 'react'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom';\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\n\nfunction CourseProgressPage(props) {\n\n  var class_id\n  if (props.location.class_id != undefined) {\n    class_id = props.location.class_id\n    localStorage.setItem('currentClass', class_id)\n  } else {\n    class_id = localStorage.getItem('currentClass')\n  }\n\n  const token = React.useContext(AuthContext)\n\n  const [cls, setClass] = React.useState({\n    class_id: 0,\n    name: \"\",\n    course: {\n      topics: []\n    },\n    teachers: [],\n    students: [],\n    progress: [],\n  })\n  const [topics, setTopics] = React.useState([])\n\n  const fetchClassData = () => {\n    const getCourse = axios.get('/classes/details', {params: { token, class_id }})\n      .then((classResponse) => {\n        const classData = classResponse.data.class\n        console.log(classData)\n        setClass(classData)\n      })\n      .catch((err) => {})\n  }\n\n  const step = useStep(fetchClassData, [], 1)\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div class='headerSection'>\n            <h1>Progress Report</h1>\n        </div>\n\n        <div className='teacherButton'>\n          <Link to={{\n            pathname: '/classes/progress/difficulty',\n            class_id: class_id\n          }}>Difficulty Report</Link>\n        </div>\n\n        <hr/>\n\n        <h4>Class</h4>\n        <Link to={{\n          pathname: '/classes/manage',\n          class_id: cls.class_id\n        }}>{cls.name}</Link>\n        <h4>Course</h4>\n        <Link to={{\n          pathname: '/courses/manage',\n          course_id: cls.course.course_id\n        }}>{cls.course.name}</Link>\n\n        <table id=\"topicProgress\">\n          <thead>\n            <td><h4>Student</h4></td>\n            {cls.course.topics.map(({ topic_id, name }, index) => (\n              <td class='topicName'><Link to={{\n                pathname: '/classes/topics/progress',\n                class_id: cls.class_id,\n                topic_id: topic_id\n              }}>{name}</Link></td>\n            ))}\n          </thead>\n          {cls.students.map(({ username, name, progress }, index) => (\n            <tr>\n              <td><Link to={{\n                  pathname: '/students/progress',\n                  student_id: username,\n                  course_id: cls.course.course_id,\n                  class_id: cls.class_id\n              }}>{name}</Link></td>\n              {progress.map(({ module, progress }, index) => (\n                <td>\n                  <div className='progressDash'>\n                    <div className='unmarkedDash' style={{width: progress.unmarked + '%'}}></div>\n                    <div className='correctDash' style={{width: progress.correct + '%'}}></div>\n                    <div className='incorrectDash' style={{width: progress.incorrect + '%'}}></div>\n                  </div>\n                </td>\n              ))}\n            </tr>\n          ))}\n        </table>\n      </>\n    }/>\n  )\n\n}\n\nexport default CourseProgressPage\n","import React from 'react'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom';\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\n\nfunction TopicProgressPage(props) {\n\n  var class_id\n  if (props.location.class_id != undefined) {\n    class_id = props.location.class_id\n    localStorage.setItem('currentClass', class_id)\n  } else {\n    class_id = localStorage.getItem('currentClass')\n  }\n\n  var topic_id\n  if (props.location.topic_id != undefined) {\n    topic_id = props.location.topic_id\n    localStorage.setItem('currentTopic', topic_id)\n  } else {\n    topic_id = localStorage.getItem('currentTopic')\n  }\n\n  const [cls, setClass] = React.useState({\n    class_id: 0,\n    name: \"\",\n    course: {\n      topics: []\n    },\n    teachers: [],\n    students: [],\n    progress: [],\n  })\n  const [topic, setTopic] = React.useState({\n    name: '',\n    topic_id: 0,\n    taskgroups: []\n  })\n\n  const token = React.useContext(AuthContext)\n\n  const fetchClassData = () => {\n    const getCourse = axios.get('/classes/topic/details', {params: { token, class_id, topic_id }})\n      .then((classResponse) => {\n        const classData = classResponse.data.class\n        console.log(classData)\n        setClass(classData)\n      })\n      .catch((err) => {})\n  }\n\n  const fetchTopicData = () => {\n    const getTopic = axios.get('/topics/details', {params: { token, topic_id }})\n    .then((topicResponse) => {\n      const topicData = topicResponse.data.topic\n      console.log(topicData)\n      setTopic(topicData)\n      fetchClassData()\n    })\n  }\n\n  const step1 = useStep(fetchClassData, [], 1)\n  const step2 = useStep(fetchTopicData, [], 1)\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div class='headerSection'>\n            <h1>Progress Report</h1>\n        </div>\n\n        <hr/>\n\n        <h4>Class</h4>\n        <Link to={{\n          pathname: '/classes/manage',\n          class_id: cls.class_id\n        }}>{cls.name}</Link>\n        <h4>Course</h4>\n        <Link to={{\n          pathname: '/courses/manage',\n          course_id: cls.course.course_id\n        }}>{cls.course.name}</Link>\n        <h4>Topic</h4>\n        <Link to={{\n          pathname: '/classes/progress',\n          topic_id: topic.topic_id,\n          class_id: cls.class_id\n        }}>{topic.name}</Link>\n\n        <table id=\"taskgroupProgress\">\n          <thead>\n            <td><h4>Student</h4></td>\n            {topic.taskgroups.map(({ taskgroup_id, name }, index) => (\n              <td class='topicName'><Link to={{\n                pathname: '/classes/topics/taskgroups/progress',\n                class_id: cls.class_id,\n                taskgroup_id: taskgroup_id\n              }}>{name}</Link></td>\n            ))}\n          </thead>\n          {cls.students.map(({ username, name, progress }, index) => (\n            <tr>\n              <td><Link to={{\n                  pathname: '/students/progress',\n                  student_id: username,\n                  course_id: cls.course.course_id,\n                  class_id: cls.class_id\n              }}>{name}</Link></td>\n                {progress.map(({ taskgroup, progress }, index) => (\n                <td>\n                  <div className='progressDash'>\n                    <div className='unmarkedDash' style={{width: progress.unmarked + '%'}}></div>\n                    <div className='correctDash' style={{width: progress.correct + '%'}}></div>\n                    <div className='incorrectDash' style={{width: progress.incorrect + '%'}}></div>\n                  </div>\n                </td>\n                ))}\n            </tr>\n          ))}\n        </table>\n      </>\n    }/>\n  )\n}\n\nexport default TopicProgressPage\n","import React from 'react'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom';\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\n\nfunction TaskgroupProgressPage(props) {\n\n  var class_id\n  if (props.location.class_id != undefined) {\n    class_id = props.location.class_id\n    localStorage.setItem('currentClass', class_id)\n  } else {\n    class_id = localStorage.getItem('currentClass')\n  }\n\n  var taskgroup_id\n  if (props.location.taskgroup_id != undefined) {\n    taskgroup_id = props.location.taskgroup_id\n    localStorage.setItem('currentTaskgroup', taskgroup_id)\n  } else {\n    taskgroup_id = localStorage.getItem('currentTaskgroup')\n  }\n\n  const [cls, setClass] = React.useState({\n    class_id: 0,\n    name: \"\",\n    course: {\n      topics: []\n    },\n    teachers: [],\n    students: [],\n    progress: [],\n  })\n\n  const [taskgroup, setTaskgroup] = React.useState({\n    name: '',\n    taskgroup_id: 0,\n    tasks: [],\n    topic: {\n      name: '',\n      topic_id: 0\n    }\n  })\n\n  const token = React.useContext(AuthContext)\n\n  const fetchClassData = (topic_id) => {\n    const getCourse = axios.get('/classes/taskgroup/details', {params: { token, class_id, taskgroup_id }})\n      .then((classResponse) => {\n        const classData = classResponse.data.class\n        console.log(classData)\n        setClass(classData)\n      })\n      .catch((err) => {})\n  }\n\n  const fetchTaskgroupData = () => {\n    const getTaskgroup = axios.get('/taskgroups/details', {params: { token, taskgroup_id }})\n    .then((taskgroupResponse) => {\n      const taskgroupData = taskgroupResponse.data.taskgroup\n      console.log(taskgroupData)\n      setTaskgroup(taskgroupData)\n    })\n  }\n\n  function getAnswerType(task_id) {\n      for (var tk = 0; tk < taskgroup.tasks.length; tk++) {\n          if (taskgroup.tasks[tk].task_id == task_id) {\n              return taskgroup.tasks[tk].answer_type\n          }\n      }\n  }\n\n  const step1 = useStep(fetchClassData, [], 1)\n  const step2 = useStep(fetchTaskgroupData, [], 1)\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div class='headerSection'>\n            <h1>Progress Report</h1>\n        </div>\n\n        <hr/>\n\n        <h4>Class</h4>\n        <Link to={{\n          pathname: '/classes/manage',\n          class_id: cls.class_id\n        }}>{cls.name}</Link>\n        <h4>Course</h4>\n        <Link to={{\n          pathname: '/courses/manage',\n          course_id: cls.course.course_id\n        }}>{cls.course.name}</Link>\n        <h4>Topic</h4>\n        <Link to={{\n          pathname: '/classes/progress',\n          topic_id: taskgroup.topic.topic_id,\n          class_id: cls.class_id\n        }}>{taskgroup.topic.name}</Link>\n        <h4>Task Group</h4>\n        {taskgroup.name}\n\n        <table id=\"taskProgress\">\n          <thead>\n            <td><h4>Student</h4></td>\n            {taskgroup.tasks.map(({ taskgroup_id, name, answer_type }, index) => (\n              <>{(answer_type != 'content') ? <td className='taskName'><h4>{name}</h4></td> : <></> }</>\n            ))}\n            <td><h4>Submitted</h4></td>\n            <td><h4>Correct</h4></td>\n          </thead>\n          {cls.students.map(({ username, name, progress, submitted, correct, total }, index) => (\n            <tr>\n              <td><Link to={{\n                  pathname: '/students/progress',\n                  student_id: username,\n                  course_id: cls.course.course_id,\n                  class_id: cls.class_id\n              }}>{name}</Link>\n              </td>\n              {progress.tasks.map(({ task, submissions }, index) => (\n                <>\n                    { (getAnswerType(task) != 'content') ? (\n                    <td>\n                      <div className='progressDash'>\n                        { (submissions.length != 0) ? (\n                          <Link to={{\n                            pathname: '/submissions/mark',\n                            submission_id: submissions[0].submission_id\n                        }}><div className={submissions[0].status + 'Dash'} style={{width: '100%', color: 'white'}}>View Submission</div></Link>\n                        ) : (<></>) }\n                      </div>\n                    </td>) : (<></>) }\n                </>\n              ))}\n              <td>{progress.submitted} / {progress.total} ({Math.round(100 * progress.submitted / progress.total, 2)} %)</td>\n              <td>{progress.correct} / {progress.total} ({Math.round(100 * progress.correct / progress.total, 2)} %)</td>\n            </tr>\n          ))}\n        </table>\n      </>\n    }/>\n  )\n\n}\n\nexport default TaskgroupProgressPage\n","import React from 'react'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom';\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\nimport { Converter } from 'showdown'\nimport ReactHTMLParser from 'react-html-parser'\n\nfunction SubmissionsMarkPage(props) {\n\n  var submission_id\n  if (props.location.submission_id != undefined) {\n    submission_id = props.location.submission_id\n    localStorage.setItem('currentSubmission', submission_id)\n  } else {\n    submission_id = localStorage.getItem('currentSubmission')\n  }\n\n  const token = React.useContext(AuthContext)\n  const [submission, setSubmission] = React.useState({\n    submission_id: 0,\n    comment: '',\n    files: [],\n    status: '',\n    task: {\n      description: '',\n      solution: '',\n      answer_type: '',\n      choices: []\n    },\n    url: '',\n    selected_answer: -1,\n  })\n  const [textBox, setTextBox] = React.useState(submission.task.description)\n\n  const fetchSubmissionData = () => {\n    const getSubmissions = axios.get('/submissions/details', {params: { token, submission_id }})\n      .then((submissionsResponse) => {\n        const submissionData = submissionsResponse.data.submission\n        console.log(submissionData)\n        setSubmission(submissionData)\n      })\n      .catch((err) => {})\n  }\n\n  function equivalent(a, b) {\n      if (a.length != b.length) return false\n\n      for (var i = 0; i < a.length; i++) {\n          if (a[i] != b[i]) {\n              return false\n          }\n      }\n      return true\n  }\n\n  function showTask() {\n    setTextBox(submission.task.description)\n    var taskElement = document.getElementById('showTask')\n    var solnElement = document.getElementById('showSolution')\n\n    taskElement.style.borderTop = '1px solid lightgray'\n    taskElement.style.borderLeft = '1px solid lightgray'\n    taskElement.style.borderRight = '1px solid lightgray'\n    solnElement.style.border = '0px'\n  }\n\n  function showSolution() {\n    setTextBox(submission.task.solution)\n    var taskElement = document.getElementById('showTask')\n    var solnElement = document.getElementById('showSolution')\n\n    solnElement.style.borderTop = '1px solid lightgray'\n    solnElement.style.borderLeft = '1px solid lightgray'\n    solnElement.style.borderRight = '1px solid lightgray'\n    taskElement.style.border = '0px'\n  }\n\n  function markSubmission(status) {\n    axios.put('/submissions/mark', { token, submission_id, status })\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n        window.location.reload()\n      })\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault()\n\n    var comment = event.target[0].value\n\n    axios.post('/submissions/comment', { token, submission_id, comment })\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n        window.location.reload()\n      })\n  }\n\n  const step = useStep(fetchSubmissionData, [], 1)\n  var converter = new Converter()\n\n  var markingContent\n  if (submission.task.answer_type == 'multiple-choice-single') {\n      markingContent = (\n          <>\n          <h4>Answer</h4>\n          {submission.task.choices.map((element, index) => (\n              <>\n                  <input type='radio' name='givenAnswer' id={'answer' + (index + 1)} checked={index == submission.selected_answer} />\n                  <label for={'answer' + (index + 1)}>{element}</label><br/>\n              </>\n          ))}<br/>\n\n          <h4>Correct Answer</h4>\n          {submission.task.choices.map((element, index) => (\n              <>\n                  <input type='radio' name='correctAnswer' id={'answer' + (index + 1)} checked={index == submission.task.correct_answer} />\n                  <label for={'answer' + (index + 1)}>{element}</label><br/>\n              </>\n          ))}<br/>\n\n          <strong>Status</strong>: {submission.status}\n\n          <div id='topicTabs'>\n            <div className='topicTab' id='showTask' onClick={showTask}>Task</div>\n            <div className='topicTab' id='showSolution' onClick={showSolution}>Solution</div>\n          </div>\n\n          <div className='studentButton' onClick={() => markSubmission((submission.selected_answer == submission.task.correct_answer) ? \"correct\" : \"incorrect\")}>Mark</div>\n\n          </>\n      )\n  } else if (submission.task.answer_type == 'multiple-choice-multiple') {\n      markingContent = (\n          <>\n          <h4>Answer</h4>\n          {submission.task.choices.map((element, index) => (\n              <>\n                  <input type='checkbox' name='givenAnswer' id={'answer' + (index + 1)} checked={submission.selected_answer.includes(index)} />\n                  <label for={'answer' + (index + 1)}>{element}</label><br/>\n              </>\n          ))}<br/>\n\n          <h4>Correct Answer</h4>\n          {submission.task.choices.map((element, index) => (\n              <>\n                  <input type='checkbox' name='correctAnswer' id={'answer' + (index + 1)} checked={submission.task.correct_answer.includes(index)} />\n                  <label for={'answer' + (index + 1)}>{element}</label><br/>\n              </>\n          ))}<br/>\n\n          <strong>Status</strong>: {submission.status}\n\n          <div id='topicTabs'>\n            <div className='topicTab' id='showTask' onClick={showTask}>Task</div>\n            <div className='topicTab' id='showSolution' onClick={showSolution}>Solution</div>\n          </div>\n\n          <div className='studentButton' onClick={() => markSubmission((equivalent(submission.selected_answer.sort(), submission.task.correct_answer.sort())) ? \"correct\" : \"incorrect\")}>Mark</div>\n\n          </>\n      )\n  } else if (submission.task.answer_type == 'standard') {\n      markingContent = (\n          <>\n          <h4>Submission</h4>\n          {submission.files.map(({url, cover_name}, index) => (\n              <><a href={url}>{cover_name}</a><br/></>\n          ))}\n          <br/><br/>\n\n          <strong>Status</strong>: {submission.status}\n\n\n          <div id='topicTabs'>\n            <div className='topicTab' id='showTask' onClick={showTask}>Task</div>\n            <div className='topicTab' id='showSolution' onClick={showSolution}>Solution</div>\n          </div>\n\n          <div className='greenTeacherButton' onClick={() => markSubmission('correct')}>Correct</div>\n          <div className='redTeacherButton' onClick={() => markSubmission('incorrect')}>Incorrect</div>\n\n          </>\n      )\n  } else if (submission.task.answer_type == 'short-answer') {\n      markingContent = (\n          <>\n          <h4>Submission</h4>\n          <p>{submission.selected_answer}</p>\n          <br/><br/>\n\n          <strong>Status</strong>: {submission.status}\n\n\n          <div id='topicTabs'>\n            <div className='topicTab' id='showTask' onClick={showTask}>Task</div>\n            <div className='topicTab' id='showSolution' onClick={showSolution}>Solution</div>\n          </div>\n\n          <div className='greenTeacherButton' onClick={() => markSubmission('correct')}>Correct</div>\n          <div className='redTeacherButton' onClick={() => markSubmission('incorrect')}>Incorrect</div>\n\n          </>\n      )\n  }\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div className='headerSection'>\n          <h1>Submissions</h1>\n        </div>\n        <hr/>\n        <div className='viewSubmission'>\n\n        <div className='teacherButton' id='closeWindow' onClick={() => markSubmission('unmarked')}>\n          Reset Marking\n        </div>\n\n          <h4>Task</h4>\n          {submission.task.name}\n\n          {markingContent}\n\n          <div id='taskSolutionContent'>\n            {ReactHTMLParser(converter.makeHtml(textBox).replace(/(?:\\r\\n|\\r|\\n)/g, '<br>'))}\n          </div>\n\n          <h4>Comments</h4>\n          <form name='addCommentForm' onSubmit={handleSubmit}>\n            <input type='text' name='comment' defaultValue={submission.comment}/>\n            <input type='submit' value='Add Comment'/>\n          </form>\n          <Link to='/classes/topics/taskgroups/progress'>Back</Link>\n        </div>\n      </>\n    }/>\n  )\n\n}\n\nexport default SubmissionsMarkPage\n","import React from 'react'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom';\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\n\nfunction CourseProgressDifficultyPage(props) {\n\n  var class_id\n  if (props.location.class_id != undefined) {\n    class_id = props.location.class_id\n    localStorage.setItem('currentClass', class_id)\n  } else {\n    class_id = localStorage.getItem('currentClass')\n  }\n\n  const token = React.useContext(AuthContext)\n\n  const [cls, setClass] = React.useState({\n    class_id: 0,\n    name: \"\",\n    course: {\n      topics: []\n    },\n    teachers: [],\n    students: [],\n    progress: [],\n  })\n  const [topics, setTopics] = React.useState([])\n\n  const fetchClassData = () => {\n    const getCourse = axios.get('/classes/details', {params: { token, class_id }})\n      .then((classResponse) => {\n        const classData = classResponse.data.class\n        console.log(classData)\n        setClass(classData)\n      })\n      .catch((err) => {})\n  }\n\n  const step = useStep(fetchClassData, [], 1)\n\n  return (<Layout navtype='teacher' body={\n    <>\n      <div class='headerSection'>\n          <h1>Difficulty Report</h1>\n      </div>\n\n      <div className='teacherButton'>\n        <Link to={{\n          pathname: '/classes/progress/',\n          class_id: class_id\n        }}>Progress Report</Link>\n      </div>\n\n      <hr/>\n\n      <h4>Class</h4>\n      <Link to={{\n        pathname: '/classes/manage',\n        class_id: cls.class_id\n      }}>{cls.name}</Link>\n      <h4>Course</h4>\n      <Link to={{\n        pathname: '/courses/manage',\n        course_id: cls.course.course_id\n      }}>{cls.course.name}</Link>\n\n      <table id=\"topicProgress\">\n        <thead>\n          <td><h4>Student</h4></td>\n          {cls.course.topics.map(({ topic_id, name }, index) => (\n            <td class='topicName'><h4>{name}</h4></td>\n          ))}\n          <td>Course</td>\n        </thead>\n        {cls.students.map(({ username, name, progress, difficulty }, index) => (\n          <tr>\n            <td>{name}</td>\n            {difficulty.topics.map(({ module, progress }, index) => (\n              <td>\n                <div className='progressBlock'>\n                  { (progress.Bronze != null) ? (<div className='progressSlice'><div className='difficultyBronze' style={{width: progress.Bronze + '%'}}></div></div>) : (<></>) }\n                  { (progress.Silver != null) ? (<div className='progressSlice'><div className='difficultySilver' style={{width: progress.Silver + '%'}}></div></div>) : (<></>) }\n                  { (progress.Gold != null) ? (<div className='progressSlice'><div className='difficultyGold' style={{width: progress.Gold + '%'}}></div></div>) : (<></>) }\n                  { (progress.Platinum != null) ? (<div className='progressSlice'><div className='difficultyPlatinum' style={{width: progress.Platinum + '%'}}></div></div>) : (<></>) }\n                  { (progress.Kryptonite != null) ? (<div className='progressSlice'><div className='difficultyKryptonite' style={{width: progress.Kryptonite + '%'}}></div></div>) : (<></>) }\n                </div>\n              </td>\n            ))}\n            <td>\n              <div className='progressBlock'>\n                { (difficulty.course.Bronze != null) ? (<div className='progressSlice'><div className='difficultyBronze' style={{width: difficulty.course.Bronze + '%'}}></div></div>) : (<></>) }\n                { (difficulty.course.Silver != null) ? (<div className='progressSlice'><div className='difficultySilver' style={{width: difficulty.course.Silver + '%'}}></div></div>) : (<></>) }\n                { (difficulty.course.Gold != null) ? (<div className='progressSlice'><div className='difficultyGold' style={{width: difficulty.course.Gold + '%'}}></div></div>) : (<></>) }\n                { (difficulty.course.Platinum != null) ? (<div className='progressSlice'><div className='difficultyPlatinum' style={{width: difficulty.course.Platinum + '%'}}></div></div>) : (<></>) }\n                { (difficulty.course.Kryptonite != null) ? (<div className='progressSlice'><div className='difficultyKryptonite' style={{width: difficulty.course.Kryptonite + '%'}}></div></div>) : (<></>) }\n              </div>\n            </td>\n          </tr>\n        ))}\n      </table>\n    </>\n  }/>)\n}\n\nexport default CourseProgressDifficultyPage\n\n//\n//{ }\n//{ (progress.kryptonite != null) ? (<div className='difficultyKryptonite'></div>) : (</></>)}\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\nimport { useStep } from '../utils/update'\nimport { Converter } from 'showdown'\n\nfunction StudentProgressPage(props) {\n\n    var course_id\n    var student_id\n    var class_id\n\n    if (props.location.course_id != undefined) {\n      course_id = props.location.course_id\n      localStorage.setItem('currentCourse', props.location.course_id)\n    } else {\n      course_id = localStorage.getItem('currentCourse')\n    }\n\n    if (props.location.student_id != undefined) {\n        student_id = props.location.student_id\n        localStorage.setItem('currentStudent', props.location.student_id)\n    } else {\n        student_id = localStorage.getItem('currentStudent')\n    }\n\n    if (props.location.class_id != undefined) {\n        class_id = props.location.class_id\n        localStorage.setItem('currentClass', props.location.class_id)\n    } else {\n        class_id = localStorage.getItem('currentClass')\n    }\n\n    const [studentName, setStudentName] = React.useState(\"\")\n    const [course, setCourse] = React.useState({\n      course_id: 0,\n      name: \"\",\n      modules: [],\n      classname: \"\"\n    })\n    const [currentTopic, setCurrentTopic] = React.useState({\n      topic_id: 0,\n      module_id: 0,\n      module_name: '',\n      taskgroups: [],\n    })\n    const [currentTask, setCurrentTask] = React.useState({\n      task_id: 0,\n      taskgroup: \"\",\n      name: \"\",\n      difficulty: \"\",\n      description: \"\",\n      hint: \"\",\n      solution: \"\",\n      attachments: []\n    })\n\n    const [submissions, setSubmissions] = React.useState([])\n    const [progress, setProgress] = React.useState([])\n\n    const token = React.useContext(AuthContext)\n\n    const fetchCourseData = () => {\n      const getCourse = axios.get('/courses/details/class', {params: { token, course_id, class_id }})\n        .then((courseResponse) => {\n          const courseData = courseResponse.data.course\n          console.log(courseData)\n          setCourse(courseData)\n        })\n        .catch((err) => {})\n    }\n\n    const fetchSubmissionData = () => {\n      const task_id = currentTask.task_id\n      const getSubmissions = axios.get('/courses/submissions/student', {params: { token, course_id, student_id }})\n        .then((submissionsResponse) => {\n          const submissionData = submissionsResponse.data.submissions\n          const progressData = submissionsResponse.data.progress\n          const name = submissionsResponse.data.name\n          console.log(submissionData)\n          console.log(progressData)\n          setSubmissions(submissionData)\n          setProgress(progressData)\n          setStudentName(name)\n        })\n        .catch((err) => {})\n    }\n\n    function getTopic(module_id) {\n      for (var t = 0; t < course.modules.length; t++) {\n        if (course.modules[t].module_id == module_id) {\n          return course.modules[t]\n        }\n      }\n    }\n\n    function getTask(module_id, taskgroup_id, task_id) {\n      for (var t = 0; t < course.modules.length; t++) {\n        if (course.modules[t].module_id == module_id) {\n          for (var tg = 0; tg < course.modules[t].taskgroups.length; tg++) {\n            if (course.modules[t].taskgroups[tg].taskgroup_id == taskgroup_id) {\n              for (var tk = 0; tk < course.modules[t].taskgroups[tg].tasks.length; tk++) {\n                if (course.modules[t].taskgroups[tg].tasks[tk].task_id == task_id) {\n                  return course.modules[t].taskgroups[tg].tasks[tk]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    function showTopic(module_id) {\n      var elements = document.getElementById('topicTabs').childNodes\n      for (var e = 0; e < elements.length; e++) {\n        if (elements[e].id == 'md' + module_id) {\n          elements[e].style.borderTop = '1px solid lightgray'\n          elements[e].style.borderLeft = '1px solid lightgray'\n          elements[e].style.borderRight = '1px solid lightgray'\n        } else {\n          elements[e].style.border = '0px'\n        }\n      }\n\n      var topic = getTopic(module_id)\n\n      setCurrentTopic(topic)\n    }\n\n    function displayTaskgroup(taskgroup_id) {\n      var element = document.getElementById('tg' + taskgroup_id)\n      var elements = element.childNodes\n\n      console.log(element.name)\n\n      if (element.name == 'undisplayed' || element.name == undefined) {\n        for (var e = 1; e < elements.length; e++) {\n          elements[e].style.display = 'block'\n          console.log(elements[e].style.display)\n        }\n        element.name = 'displayed'\n\n      } else if (element.name == 'displayed') {\n        for (var e = 1; e < elements.length; e++) {\n          elements[e].style.display = 'none'\n        }\n        element.name = 'undisplayed'\n      }\n    }\n\n    function displayTask(module_id, taskgroup_id, task_id) {\n      var task = getTask(module_id, taskgroup_id, task_id)\n      console.log(task)\n      setCurrentTask(task)\n    }\n\n    function taskSubmissions() {\n      var subs = []\n      for (var sb = 0; sb < submissions.length; sb++) {\n        if (submissions[sb].tasks.includes(currentTask.task_id)) {\n          subs.push(submissions[sb])\n        }\n      }\n      return subs\n    }\n\n    function taskSubmissionState(task_id) {\n      var subs = []\n      for (var sb = 0; sb < submissions.length; sb++) {\n        if (submissions[sb].task == task_id) {\n          subs.push(submissions[sb])\n        }\n      }\n      console.log('subs', subs)\n      if (subs.length > 0) {\n        return subs[subs.length - 1].status\n      } else {\n        return ''\n      }\n\n    }\n\n    const step1 = useStep(fetchCourseData, [], 2)\n    const step2 = useStep(fetchSubmissionData, [], 2)\n\n    var converter = new Converter()\n    const taskSubs = taskSubmissions()\n    var submissionBlock\n\n    if (currentTask.task_id != 0) {\n        if (currentTask.answer_type == 'multiple-choice-single') {\n\n          if (taskSubs.length > 0) {\n              var choice = taskSubs[taskSubs.length - 1].selected_answer\n              var status = taskSubs[taskSubs.length - 1].status\n\n              submissionBlock = (\n                  <>\n                  <div className='submissionBox'>\n                      <div className='submissionDisplay' name={status}>\n                        {currentTask.choices.map((element, index) => (\n                            <>\n                                <input type='radio' name='correctAnswer' id={'answer' + (index + 1)} checked={index == choice} />\n                                <label for={'answer' + (index + 1)}>{element}</label><br/>\n                            </>\n                        ))}\n                      </div>\n                  </div>\n                  </>\n              )\n          }\n      } else {\n        if (taskSubs.length > 0) {\n          submissionBlock = (\n            <>\n              <h4>Submissions</h4>\n              {taskSubs.map(({ time, status, url, comment }, index) => (\n                <div className='submissionDisplay' name={status}>{comment}\n                  <strong> {status}</strong> <a href={url}>Download</a>\n                </div>\n              ))}\n            </>\n          )\n        }\n      }\n    }\n\n    return (\n        <Layout navtype='teacher' body={\n          <>\n            <div>\n                <h1 id='courseName'>Student</h1>\n            </div>\n\n            <hr/>\n            <h4>Name</h4>\n            {studentName}\n\n            <h4>Class</h4>\n            <Link to={{\n                pathname: '/classes/topics/progress',\n                class_id: class_id\n            }}>{course.classname}</Link>\n\n\n            <table id='topicProgress'>\n              <tr>\n              {course.modules.map(({ module_name }, index) => (\n                <td>{module_name}</td>\n              ))}\n              </tr>\n              <tr id='progressDashRow'>\n              {progress.map(({ unmarked, correct, incorrect, progress }, index) => (\n                <td>\n                  <div className='progressDash'>\n                    <div className='unmarkedDash' style={{width: progress.unmarked + '%'}}></div>\n                    <div className='correctDash' style={{width: progress.correct + '%'}}></div>\n                    <div className='incorrectDash' style={{width: progress.incorrect + '%'}}></div>\n                  </div>\n                </td>\n              ))}\n              </tr>\n\n            </table>\n\n            <div id='topicTabs'>\n            {course.modules.map(({ module_id, module_name, topic_id }, index) => (\n              <div class='topicTab' id={\"md\" + module_id} onClick={() => showTopic(module_id)}>\n                {module_name}\n              </div>\n            ))}\n            </div>\n\n            <div id=\"taskGroupBox\">\n                <div id='taskgroupList'>\n                {currentTopic.taskgroups.map(({ taskgroup_id, name, tasks }, index) => (\n                  <span className='taskGroupList' name='undisplayed' id={\"tg\" + taskgroup_id}>\n                    <span className='taskGroupName' onClick={() => displayTaskgroup(taskgroup_id)}>\n                    {name}\n                    </span>\n                    {tasks.map(({ task_id, name, difficulty }, index) => (\n                      <>\n                        <span style={{display: 'none'}} id={\"tk\" + task_id} onClick={() => displayTask(currentTopic.module_id, taskgroup_id, task_id)}\n                        className={difficulty} name={taskSubmissionState(task_id)}>{name}</span>\n                      </>\n                    ))}\n                  </span>\n                ))}\n                </div>\n\n                <div id='taskBox'>\n                {\n                  <>\n                    <h1>{currentTask.name}</h1>\n                  </>\n                }\n                <br/>\n                <br/>\n                {submissionBlock}\n                </div>\n            </div>\n          </>\n      }/>\n    )\n}\n\nexport default StudentProgressPage\n","import React from 'react'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom';\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { useStep } from '../utils/update'\n\nfunction UsersManagePage(props) {\n\n  const [students, setStudents] = React.useState([])\n  const [teachers, setTeachers] = React.useState([])\n  const token = React.useContext(AuthContext)\n\n  const fetchUsersData = () => {\n      const getUsers = axios.get('/users/listall', {params: { token }})\n      .then((userResponse) => {\n          const studentData = userResponse.data.students\n          const teacherData = userResponse.data.teachers\n          setStudents(studentData)\n          setTeachers(teacherData)\n      })\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault()\n\n  }\n\n  function deleteUser(username) {\n      axios.delete('/users/delete', {data: {token, username}})\n        .then((response) => {\n            const data = response.data\n        })\n        .catch((err) => {})\n  }\n\n  const step = useStep(fetchUsersData, [], 1)\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n          <div class='headerSection'>\n              <h1>Users</h1>\n          </div>\n\n          <h2>Teachers</h2>\n          <Link to={{\n              pathname: '/users/import',\n              importType: 'teacher'\n          }}>\n            <div className='teacherButton'>Import Teachers</div>\n          </Link>\n\n          <hr/>\n\n          <table id='teacherList'>\n            <thead><td>Username</td><td>Name</td><td>Classes</td><td>Actions</td></thead>\n            {teachers.map(({ username, name, classes }, index) => (\n                <tr>\n                  <td>{username}</td>\n                  <td>{name}</td>\n                  <td>{classes.map((name, index) => (\n                      <>{name}{ (index != classes.length - 1) ? \", \" : \"\"}</>\n                  ))}</td>\n                  <td><Link onClick={() => deleteUser(username)}>Delete</Link></td>\n                </tr>\n            ))}\n          </table>\n\n          <h2>Students</h2>\n          <Link to={{\n              pathname: '/users/import',\n              importType: 'student'\n          }}>\n            <div className='teacherButton'>Import Students</div>\n          </Link>\n\n          <hr/>\n\n          <table id='studentList'>\n            <thead><td>Username</td><td>Name</td><td>Classes</td><td>Actions</td></thead>\n            {students.map(({ username, name, classes }, index) => (\n                <tr>\n                  <td>{username}</td>\n                  <td>{name}</td>\n                  <td>{classes.map((name, index) => (\n                      <>{name}{ (index != classes.length - 1) ? \", \" : \"\"}</>\n                  ))}</td>\n                  <td><Link onClick={() => deleteUser(username)}>Delete</Link></td>\n                </tr>\n            ))}\n          </table>\n\n      </>\n    }/>\n  )\n\n}\n\nexport default UsersManagePage\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\nimport { useStep } from '../utils/update'\n\nfunction UsersImportPage(props) {\n\n  const token = React.useContext(AuthContext)\n  var file = false\n\n  var importType;\n  if (props.location.importType != undefined) {\n    importType = props.location.importType\n  } else {\n    importType = 'student'\n  }\n\n  function setFile(event) {\n    file = event.target.files[0]\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault()\n\n    if (!file) {\n      console.log('No file chosen')\n      return\n    }\n\n    var form = new FormData()\n    form.append('token', token)\n    form.append('type', importType)\n    form.append('file', file)\n\n    axios.post('/users/import', form, { headers: { 'content-type': 'multipart/form-data' }})\n      .then((response) => {\n        const data = response.data\n        console.log(data)\n        props.history.push('/users')\n      })\n      .catch((err) => {})\n  }\n\n\n  return (\n    <Layout navtype='teacher' body={\n      <>\n        <div class='headerSection'>\n            <h4 id=\"className\"></h4>\n            <h1>Users</h1>\n        </div>\n        <hr/>\n\n        <form name='addImportForm' onSubmit={handleSubmit}>\n            <div className='notice'>The file should be formatted as a CSV containing column of {importType} username values and a column of names. There should be no header row.</div>\n            <input type='file' name='attachment' onChange={setFile} /><br/>\n            <input type='submit' value={'Import ' + importType.charAt(0).toUpperCase() + importType.slice(1) + 's'} />\n            <br/>\n            <Link to='/users'>Cancel</Link>\n        </form>\n      </>\n    }/>\n\n  )\n\n}\n\nexport default UsersImportPage\n","import React from 'react'\nimport Layout from '../components/Layout'\nimport '../App.css'\nimport AuthContext from '../AuthContext'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\nimport { useStep } from '../utils/update'\n\nfunction UserSettingsPage(props) {\n\n  const token = React.useContext(AuthContext)\n  var file = false\n\n  var userType;\n  if (props.location.userType != undefined) {\n    userType = props.location.userType\n  } else {\n    userType = 'student'\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault()\n\n    const old_password = event.target[0].value\n    const new_password = event.target[1].value\n    const confirm_password = event.target[2].value\n\n    axios.put('/user/password', { token, old_password, new_password, confirm_password })\n      .then((response) => {\n        const dashboard = response.data.type\n        console.log(dashboard)\n        props.history.push('/' + dashboard)\n      })\n      .catch((err) => {})\n  }\n\n\n  return (\n    <Layout navtype={userType} body={\n      <>\n        <div class='headerSection'>\n            <h4 id=\"className\"></h4>\n            <h1>Settings</h1>\n        </div>\n        <hr/>\n\n        <form name='passwordChangeForm' onSubmit={handleSubmit}>\n            <h4>Change Password</h4><br/>\n            <input type='text' type='password' name='oldPassword' placeholder='Old Password' /><br/>\n            <input type='text' type='password' name='newPassword' placeholder='New Password' /><br/>\n            <input type='text' type='password' name='newPasswordConfirm' placeholder='Confirm New Password' /><br/>\n            <input type='submit' value='Update Password' />\n            <br/>\n        </form>\n      </>\n    }/>\n\n  )\n\n}\n\nexport default UserSettingsPage\n","import React from 'react'\nimport { Redirect, Route } from 'react-router-dom'\nimport AuthContext from '../AuthContext'\n\nfunction ProtectedRoute(props) {\n  const token = React.useContext(AuthContext)\n\n  if (!token) {\n    return <Redirect to='/login' />\n  }\n\n  return <Route {...props} />\n}\n\nexport default ProtectedRoute;\n","import React from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\n\nimport './App.css';\nimport './axios'\n\nimport LoginPage from './pages/LoginPage'\n\nimport TeacherDashboardPage from './pages/TeacherDashboardPage'\nimport StudentDashboardPage from './pages/StudentDashboardPage'\n\nimport TopicsListPage from './pages/TopicsListPage'\nimport TopicsAddPage from './pages/TopicsAddPage'\nimport TopicsEditPage from './pages/TopicsEditPage'\nimport TopicsManagePage from './pages/TopicsManagePage'\n\nimport TaskgroupsAddPage from './pages/TaskgroupsAddPage'\nimport TaskgroupsEditPage from './pages/TaskgroupsEditPage'\nimport TaskgroupsMovePage from './pages/TaskgroupsMovePage'\n\nimport TasksAddPage from './pages/TasksAddPage'\nimport TasksViewPage from './pages/TasksViewPage'\nimport TasksEditPage from './pages/TasksEditPage'\nimport TasksMovePage from './pages/TasksMovePage'\nimport AttachmentsManagePage from './pages/AttachmentsManagePage'\n\nimport CoursesListPage from './pages/CoursesListPage'\nimport CoursesAddPage from './pages/CoursesAddPage'\nimport CoursesEditPage from './pages/CoursesEditPage'\nimport CoursesManagePage from './pages/CoursesManagePage'\nimport CoursesViewPageTeacher from './pages/CoursesViewPageTeacher'\nimport CoursesViewPageStudent from './pages/CoursesViewPageStudent'\n\nimport ModulesAddPage from './pages/ModulesAddPage'\nimport ModulesRenamePage from './pages/ModulesRenamePage'\n\nimport ClassesListPage from './pages/ClassesListPage'\nimport ClassesListPageStudent from './pages/ClassesListPageStudent'\nimport ClassesAddPage from './pages/ClassesAddPage'\nimport ClassesEditPage from './pages/ClassesEditPage'\nimport ClassesManagePage from './pages/ClassesManagePage'\n\nimport EnrolmentsAddPage from './pages/EnrolmentsAddPage'\nimport EnrolmentsImportPage from './pages/EnrolmentsImportPage'\n\nimport CourseProgressPage from './pages/CourseProgressPage'\nimport TopicProgressPage from './pages/TopicProgressPage'\nimport TaskgroupProgressPage from './pages/TaskgroupProgressPage'\nimport SubmissionsMarkPage from './pages/SubmissionsMarkPage'\nimport CourseProgressDifficultyPage from './pages/CourseProgressDifficultyPage'\nimport StudentProgressPage from './pages/StudentProgressPage'\n\nimport UsersManagePage from './pages/UsersManagePage'\nimport UsersImportPage from './pages/UsersImportPage'\nimport UserSettingsPage from './pages/UserSettingsPage'\n\nimport ProtectedRoute from './components/ProtectedRoute'\n\nimport { AuthProvider } from './AuthContext'\n\nfunction App() {\n\n  const [authDetails, setAuthDetails] = React.useState(\n    localStorage.getItem('token')\n  )\n\n  function setAuth(token, username) {\n    localStorage.setItem('token', token)\n    localStorage.setItem('username', username)\n    setAuthDetails(token)\n  }\n\n  return (\n    <AuthProvider value={authDetails}>\n      <Router>\n        <Switch>\n          <Route path='/login' render={(props) => {\n            return <LoginPage {...props} setAuth={setAuth} />\n          }}/>\n          <ProtectedRoute exact path='/teacher' component={TeacherDashboardPage} />\n\n          <ProtectedRoute exact path='/topics' component={TopicsListPage} />\n          <ProtectedRoute exact path='/topics/add' component={TopicsAddPage} />\n          <ProtectedRoute exact path='/topics/edit' component={TopicsEditPage} />\n          <ProtectedRoute exact path='/topics/manage' component={TopicsManagePage} />\n\n          <ProtectedRoute exact path='/taskgroups/add' component={TaskgroupsAddPage} />\n          <ProtectedRoute exact path='/taskgroups/edit' component={TaskgroupsEditPage} />\n          <ProtectedRoute exact path='/taskgroups/move' component={TaskgroupsMovePage} />\n          <ProtectedRoute exact path='/tasks/add' component={TasksAddPage} />\n          <ProtectedRoute exact path='/tasks/view' component={TasksViewPage} />\n          <ProtectedRoute exact path='/tasks/edit' component={TasksEditPage} />\n          <ProtectedRoute exact path='/tasks/attachments' component={AttachmentsManagePage} />\n          <ProtectedRoute exact path='/tasks/move' component={TasksMovePage} />\n\n          <ProtectedRoute exact path='/courses' component={CoursesListPage} />\n          <ProtectedRoute exact path='/courses/add' component={CoursesAddPage} />\n          <ProtectedRoute exact path='/courses/edit' component={CoursesEditPage} />\n          <ProtectedRoute exact path='/courses/manage' component={CoursesManagePage} />\n          <ProtectedRoute exact path='/courses/topics/add' component={ModulesAddPage}/>\n          <ProtectedRoute exact path='/courses/topics/rename' component={ModulesRenamePage} />\n          <ProtectedRoute exact path='/courses/view/teacher' component={CoursesViewPageTeacher} />\n\n          <ProtectedRoute exact path='/classes' component={ClassesListPage} />\n          <ProtectedRoute exact path='/classes/add' component={ClassesAddPage} />\n          <ProtectedRoute exact path='/classes/edit' component={ClassesEditPage} />\n          <ProtectedRoute exact path='/classes/manage' component={ClassesManagePage} />\n          <ProtectedRoute exact path='/classes/enrolments/add' component={EnrolmentsAddPage}/>\n          <ProtectedRoute exact path='/classes/enrolments/import' component={EnrolmentsImportPage}/>\n\n          <ProtectedRoute exact path='/student' component={StudentDashboardPage} />\n          <ProtectedRoute exact path='/courses/view/student' component={CoursesViewPageStudent} />\n          <ProtectedRoute exact path='/classes/view/student' component={ClassesListPageStudent} />\n\n          <ProtectedRoute exact path='/classes/progress' component={CourseProgressPage} />\n          <ProtectedRoute exact path='/classes/topics/progress' component={TopicProgressPage} />\n          <ProtectedRoute exact path='/classes/topics/taskgroups/progress' component={TaskgroupProgressPage} />\n          <ProtectedRoute exact path='/submissions/mark' component={SubmissionsMarkPage}/>\n          <ProtectedRoute exact path='/classes/progress/difficulty' component={CourseProgressDifficultyPage}/>\n          <ProtectedRoute exact path='/students/progress' component={StudentProgressPage} />\n\n          <ProtectedRoute exact path='/users' component={UsersManagePage} />\n          <ProtectedRoute exact path='/users/import' component={UsersImportPage} />\n          <ProtectedRoute exact path='/user/settings' component={UserSettingsPage} />\n        </Switch>\n      </Router>\n    </AuthProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}