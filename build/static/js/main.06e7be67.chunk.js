(this["webpackJsonpgallifrey-frontend"]=this["webpackJsonpgallifrey-frontend"]||[]).push([[0],{115:function(e,t){},324:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(54),c=a.n(r),o=(a(66),a(3)),s=a(1),i=a(12),m=(a(4),a(55)),u=a(2),d=a.n(u),p=(a(84),a(56)),E=a.n(p);d.a.defaults.baseURL="http://127.0.0.1:8080",d.a.defaults.headers.put["Content-Type"]="application/json",d.a.defaults.headers.post["Content-Type"]="application/json",d.a.defaults.headers.delete["Content-Type"]="application/json";d.a.CancelToken;d.a.interceptors.request.use((function(e){return e}));d.a.interceptors.response.use((function(e){return e}),(function(e){console.error(e);var t="An error occurred.";e.response&&(console.log(e.response.data),t=E.a.get(e,"response.data.message")||t),console.log(t);var a=document.getElementById("error");return a.innerHTML=t,a.style.display="block",Promise.reject(Object(m.a)({},e))}));var h=a(60),g=l.a.createContext(),v=g.Provider,f=(g.Consumer,g);var b=function(e){var t=e.navtype,a=e.body,n=l.a.useContext(f);function r(){d.a.post("/auth/logout",{token:n}).then((function(e){console.log(e),window.location.href="/login"}))}return console.log(t),"teacher"==t?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"navbar"},l.a.createElement("h3",null,"Osiris"),l.a.createElement("h4",null,l.a.createElement(s.b,{to:{pathname:"/user/settings",userType:"teacher"}},"Profile")),l.a.createElement("h4",null,l.a.createElement(s.b,{to:"/teacher"},"Dashboard")),l.a.createElement("h4",null,l.a.createElement(s.b,{to:"/courses"},"Courses")),l.a.createElement("h4",null,l.a.createElement(s.b,{to:"/classes"},"Classes")),l.a.createElement("h4",null,l.a.createElement(s.b,{to:"/topics"},"Topics")),l.a.createElement("h4",null,l.a.createElement(s.b,{to:"/users"},"Users")),l.a.createElement("div",{name:"logout"},l.a.createElement("h4",null,l.a.createElement(s.b,{onClick:r},"LOGOUT")))),l.a.createElement("div",{id:"error"}),a,l.a.createElement("div",{className:"footer"},"Osiris 1.0.0",l.a.createElement("br",null),"Developed By ",l.a.createElement("a",{href:"mailto:nick.p@iinet.net.au"},"Nick Patrikeos"),".")):"student"==t?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"navbar"},l.a.createElement("h3",null,"Osiris"),l.a.createElement("h4",null,l.a.createElement(s.b,{to:{pathname:"/user/settings",userType:"teacher"}},"Profile")),l.a.createElement("h4",null,l.a.createElement(s.b,{to:"/student"},"Dashboard")),l.a.createElement("div",{name:"logout"},l.a.createElement("h4",null,l.a.createElement(s.b,{onClick:r},"LOGOUT")))),l.a.createElement("div",{id:"error"}),a,l.a.createElement("div",{className:"footer"},"Osiris 4.0.0",l.a.createElement("br",null),"Developed By ",l.a.createElement("a",{href:"mailto:nick.p@iinet.net.au"},"Nick Patrikeos"),".")):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"navbar"},l.a.createElement("h3",null,"Osiris")),l.a.createElement("div",{id:"error"}),a,l.a.createElement("div",{className:"footer"},"Osiris 1.0.0",l.a.createElement("br",null),"Developed By ",l.a.createElement("a",{href:"mailto:nick.p@iinet.net.au"},"Nick Patrikeos"),"."))};var k=function(e){var t=e.setAuth,a=Object(h.a)(e,["setAuth"]);return l.a.createElement(b,{navtype:"",body:l.a.createElement("div",{id:"logindiv"},l.a.createElement("h1",null,"Login"),l.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n=e.target[0].value,l=e.target[1].value;n&&l&&d.a.post("/auth/login",{username:n,password:l}).then((function(e){var n=e.data;t(n.token,n.u_id),"teacher"==n.user_type?a.history.push("/teacher"):"student"==n.user_type&&a.history.push("/student")})).catch((function(e){}))}},l.a.createElement("input",{type:"text",name:"username",placeholder:"*Username"}),l.a.createElement("br",null),l.a.createElement("input",{type:"password",name:"password",placeholder:"*Password"}),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Login"})))})},y=[],_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;void 0==y.find((function(t){return t.subscriber==e}))&&y.push({subscriber:e,interval:t})},w=function(e){return y=y.filter((function(t){return t.subscriber!=e}))},S=function(e){y.forEach((function(t){e&&e%t.interval!=0||t.subscriber()}))},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e&&"function"==typeof e;return l.a.useEffect((function(){if(n)return e(),_(e,a),function(){return w(e)}}),t),S};var T=function(e){var t=l.a.useState([]),a=Object(o.a)(t,2),n=a[0],r=a[1],c=l.a.useState([]),i=Object(o.a)(c,2),m=i[0],u=i[1],p=l.a.useContext(f);return C((function(){d.a.get("/classes/teacher",{params:{token:p}}).then((function(e){var t=e.data.classes,a=e.data.name;console.log(t),r(t),u(a)})).catch((function(e){}))}),[],2),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"teacherDashboardSection"},l.a.createElement("h1",null,"Dashboard"),l.a.createElement("p",null,"Welcome to Osiris, ",m,"."),l.a.createElement("h3",null,"My Classes"),l.a.createElement("hr",null),l.a.createElement("table",{id:"myClasses"},l.a.createElement("tr",null,l.a.createElement("td",null,"Name"),l.a.createElement("td",null,"Actions")),n.map((function(e,t){var a=e.class_id,n=e.name;return l.a.createElement("tr",null,l.a.createElement("td",null,n),l.a.createElement("td",null,l.a.createElement(s.b,{to:{pathname:"/classes/manage",class_id:a}},"Manage")))})))),l.a.createElement("div",{className:"teacherDashboardSection"},l.a.createElement("h3",null,"Recent Submissions"),l.a.createElement("hr",null),l.a.createElement("table",{id:"recentSubmissions"},l.a.createElement("tr",null,l.a.createElement("td",null,"Student"),l.a.createElement("td",null,"Task"),l.a.createElement("td",null,"Actions")),n.map((function(e,t){var a=e.submissions;return l.a.createElement(l.a.Fragment,null,a.map((function(e,t){var a=e.submission_id,n=e.student,r=e.task;return l.a.createElement("tr",null,l.a.createElement("td",null,n.name),l.a.createElement("td",null,r.name),l.a.createElement("td",null,l.a.createElement(s.b,{to:{pathname:"/submissions/mark",submission_id:a}},"View Submission")))})))})))))})};var x=function(e){var t=l.a.useState([]),a=Object(o.a)(t,2),n=a[0],r=a[1],c=l.a.useContext(f);return C((function(){d.a.get("/classes/student",{params:{token:c}}).then((function(e){var t=e.data.classes;console.log(t),r(t)})).catch((function(e){}))}),[],2),l.a.createElement(b,{navtype:"student",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Dashboard")),l.a.createElement("hr",null),l.a.createElement("div",{id:"enrolments"},l.a.createElement("h3",null,"My Enrolments"),n.map((function(e,t){e.class_id;var a=e.course,n=e.name,r=e.teachers,c=e.progress;return l.a.createElement("div",{className:"enrolmentBox"},l.a.createElement("h3",null,n)," with ",r.map((function(e,t){var a=e.name;return l.a.createElement(l.a.Fragment,null,a,t!=r.length-1?", ":""," ")})),l.a.createElement("div",{className:"progressDash"},l.a.createElement("div",{className:"unmarkedDash",style:{width:c.course.unmarked+"%"}}),l.a.createElement("div",{className:"correctDash",style:{width:c.course.correct+"%"}}),l.a.createElement("div",{className:"incorrectDash",style:{width:c.course.incorrect+"%"}})),l.a.createElement("div",{className:"studentButton"},l.a.createElement(s.b,{to:{pathname:"/courses/view/student",course_id:a.course_id}},"View Class")))}))),l.a.createElement("div",{class:"viewAllClasses"},"You can view other classes and submit for activities, but they will not be marked.",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"studentButton"},l.a.createElement(s.b,{to:{pathname:"/classes/view/student"}},"View all Classes"))))})};var N=function(){var e=l.a.useState([]),t=Object(o.a)(e,2),a=t[0],n=t[1],r=l.a.useContext(f);return C((function(){d.a.get("/topics/list",{params:{token:r}}).then((function(e){var t=e.data.topics;console.log(t),n(t)}))}),[],2),l.a.createElement(l.a.Fragment,null,l.a.createElement("table",{id:"topicsList"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Topic"),l.a.createElement("td",null,"Courses"),l.a.createElement("td",null,"Actions"))),l.a.createElement("tbody",null,a.map((function(e,t){var a=e.topic_id,n=e.name,c=e.courses;return l.a.createElement("tr",null,l.a.createElement("td",null,n),l.a.createElement("td",null,c.map((function(e,t){var a=e.course_id,n=e.name;return l.a.createElement(l.a.Fragment,null,l.a.createElement(s.b,{to:{pathname:"/courses/manage",course_id:a}},n),t!=c.length-1?", ":"")}))),l.a.createElement("td",null,l.a.createElement(s.b,{to:{pathname:"/topics/manage",topic_id:a}},"Manage "),l.a.createElement(s.b,{to:{pathname:"/topics/edit",topic_id:a,topic_name:n}},"Edit "),l.a.createElement(s.b,{to:"/topic/duplicate"},"Duplicate "),l.a.createElement(s.b,{onClick:function(){return function(e){d.a.delete("/topics/delete",{data:{token:r,topic_id:e}}).then((function(e){e.data;window.location.reload()})).catch((function(e){}))}(a)}},"Delete")))})))))};var F=function(e){return l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Topics"),l.a.createElement(s.b,{to:"/topics/add"},l.a.createElement("div",{className:"teacherButton"},"Add Topic"))),l.a.createElement("hr",null),l.a.createElement(N,null))})};var B=function(e){var t=l.a.useContext(f);return l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Topics")),l.a.createElement("hr",null),l.a.createElement("form",{name:"addTopicForm",onSubmit:function(a){a.preventDefault(),console.log(t);var n=a.target[0].value;d.a.post("/topics/add",{token:t,name:n}).then((function(t){var a=t.data;console.log(a),e.history.push("/topics")})).catch((function(e){}))}},l.a.createElement("input",{type:"text",placeholder:"*Title",name:"name"}),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Create Topic"}),l.a.createElement(s.b,{to:"/topics"},"Cancel")))})};var I,D,A=function(e){var t,a=l.a.useContext(f);return console.log(e.location.topic_id),void 0!=e.location.topic_id?(t=e.location.topic_id,localStorage.setItem("currentTopic",t)):t=localStorage.getItem("currentTopic"),console.log(t),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Topics")),l.a.createElement("hr",null),l.a.createElement("form",{name:"editTopicForm",onSubmit:function(n){n.preventDefault();var l=n.target[0].value;d.a.put("/topics/edit",{token:a,topic_id:t,name:l}).then((function(t){var a=t.data;console.log(a),e.history.push("/topics")})).catch((function(e){}))}},l.a.createElement("input",{type:"text",defaultValue:e.location.topic_name,name:"name"}),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Update Topic"}),l.a.createElement(s.b,{to:"/topics"},"Cancel")))})};function O(e){D=document.querySelectorAll(e);for(var t=0;t<D.length;t++)D[t].draggable="true";[].forEach.call(D,(function(e){e.addEventListener("dragstart",j,!1),e.addEventListener("dragenter",R,!1),e.addEventListener("dragover",M,!1),e.addEventListener("dragleave",G,!1),e.addEventListener("drop",P,!1),e.addEventListener("dragend",H,!1)}))}function L(e){D=document.querySelectorAll(e);for(var t=0;t<D.length;t++)D[t].draggable="false";[].forEach.call(D,(function(e){e.removeEventListener("dragstart",j,!1),e.removeEventListener("dragenter",R,!1),e.removeEventListener("dragover",M,!1),e.removeEventListener("dragleave",G,!1),e.removeEventListener("drop",P,!1),e.removeEventListener("dragend",H,!1)}))}function j(e){this.style.opacity="0.4",I=this,e.dataTransfer.effectAllowed="none",e.dataTransfer.setData("text/html",this.innerHTML)}function M(e){return e.preventDefault&&e.preventDefault(),e.dataTransfer.dropEffect="move",!1}function R(e){this.classList.add("over")}function G(e){this.classList.remove("over")}function P(e){if(e.stopPropagation&&e.stopPropagation(),I!=this){I.innerHTML=this.innerHTML,this.innerHTML=e.dataTransfer.getData("text/html");var t=I.id;I.id=this.id,this.id=t}return!1}function H(e){this.style.opacity="1",[].forEach.call(D,(function(e){e.classList.remove("over")})),console.log("Drag Ended")}function U(e,t){var a=t-e;return a<60?"A few seconds ago":a<120?"A minute ago":a<3600?Math.floor(a/60)+" minutes ago":a<7200?"An hour ago":a<86400?Math.floor(a/3600)+" hours ago":a<172800?"A day ago":a<2592e3?Math.floor(a/172800)+" days ago":a<5184e3?"A month ago":a<31104e3?Math.floor(a/2592e3)+" months ago":a<62208e3?"A year ago":Math.floor(a/31104e3)+"years ago"}function V(e){switch(e){case"multiple-choice-single":return"Multiple Choice - Single Answer";case"multiple-choice-multiple":return"Multiple Choice - Multiple Answers";case"standard":return"Standard";case"content":return"Content Only";case"short-answer":return"Short Answer"}}var z=function(e){var t=e.topic_id,a=l.a.useState({name:"",topic_id:0,taskgroups:[],courses:[]}),n=Object(o.a)(a,2),r=n[0],c=n[1],i=l.a.useState(),m=Object(o.a)(i,2),u=m[0],p=m[1],E=l.a.useContext(f);return C((function(){d.a.get("/topics/details",{params:{token:E,topic_id:t}}).then((function(e){var t=e.data.topic,a=e.data.currentTime;console.log(t),c(t),p(a),console.log(r)}))}),[],2),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"headerSection"},l.a.createElement("h1",null,"Topics")),l.a.createElement("h4",null,"Title"),l.a.createElement("p",{id:"topicTitle"},r.name),l.a.createElement("h4",null,"Courses"),l.a.createElement("p",{id:"topicCourses"},r.courses.map((function(e,t){var a=e.course_id,n=e.name;return l.a.createElement(l.a.Fragment,null,l.a.createElement(s.b,{to:{pathname:"/courses/manage",course_id:a}},n),t!=r.courses.length-1?", ":"")}))),l.a.createElement("h2",null,"Task Groups"),l.a.createElement(s.b,{to:{pathname:"/taskgroups/add",topic_id:t,topic_name:r.name}},l.a.createElement("div",{className:"teacherButton"},"New Task Group")),l.a.createElement("div",{className:"teacherButton",id:"reorderTaskGroupsButton",onClick:function(){var e=document.getElementById("reorderTaskGroupsButton");if(console.log(e.name),"notReordering"==e.name||void 0==e.name)e.name="reordering",e.style.backgroundColor="#dd514c",e.style.color="white",e.innerHTML="Finish Reordering",O("#taskGroupList tr");else{e.name="notReordering",e.innerHTML="Reorder Task Groups",e.style.backgroundColor="white",e.style.color="black",L("#taskGroupList tr");var t=document.querySelectorAll("#taskGroupList tr");console.log(t);for(var a=[],n=0;n<t.length;n++)console.log(t[n].id),a.push(t[n].id);var l=r.topic_id;d.a.put("/taskgroups/reorder",{token:E,topic_id:l,newTaskGroupList:a}).then((function(e){console.log(e),window.location.reload()})).catch((function(e){}))}},name:"notReordering"},"Reorder Task Groups"),l.a.createElement("hr",null),l.a.createElement("table",{id:"taskGroupList"},l.a.createElement("thead",null,l.a.createElement("td",null,"Title"),l.a.createElement("td",null,"Tasks"),l.a.createElement("td",null,"Submission Type"),l.a.createElement("td",null,"Last Modified"),l.a.createElement("td",null,"Actions")),r.taskgroups.map((function(e,t){var a=e.taskgroup_id,n=e.name,c=e.tasks,o=e.modified,i=e.submit_multiple;return l.a.createElement("tr",{id:a},l.a.createElement("td",null,n),l.a.createElement("td",null,c.length),l.a.createElement("td",null,i?"Multiple Tasks":"Single Tasks"),l.a.createElement("td",null,U(o,u)),l.a.createElement("td",null,l.a.createElement(s.b,{to:{pathname:"/taskgroups/edit",topic_name:r.name,taskgroup_id:a,taskgroup_name:n}},"Edit "),l.a.createElement(s.b,{to:{pathname:"/taskgroups/move",taskgroup_id:a}},"Move "),l.a.createElement(s.b,{onClick:function(){return function(e){d.a.delete("/taskgroups/delete",{data:{token:E,taskgroup_id:e}}).then((function(e){e.data;window.location.reload()})).catch((function(e){}))}(a)}},"Delete")))}))),l.a.createElement("div",{id:"tasksList"},r.taskgroups.map((function(e,t){var a=e.taskgroup_id,n=e.name,c=e.tasks;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,n),l.a.createElement("div",{className:"teacherButton"},l.a.createElement(s.b,{to:{pathname:"/tasks/add",taskgroup_id:a,topic_name:r.name,taskgroup_name:n}},"New Task")),l.a.createElement("div",{className:"reorderTasksButton",id:"reorderTasksButton"+a,onClick:function(){return function(e){var t=document.getElementById("reorderTasksButton"+e);if("notReordering"==t.name||void 0==t.name)t.name="reordering",t.style.backgroundColor="#dd514c",t.style.color="white",t.innerHTML="Finish Reordering",O("#tasksList"+e+" tr");else{t.name="notReordering",t.innerHTML="Reorder Tasks",t.style.backgroundColor="white",t.style.color="black",L("#tasksList"+e+" tr");for(var a=document.querySelectorAll("#tasksList"+e+" tr"),n=[],l=0;l<a.length;l++)n.push(a[l].id);d.a.put("/tasks/reorder",{token:E,taskgroup_id:e,newTaskList:n}).then((function(e){console.log(e),window.location.reload()})).catch((function(e){}))}}(a)}},"Reorder Tasks"),l.a.createElement("table",{id:"tasksList"+a},l.a.createElement("thead",null,l.a.createElement("td",null,"Name"),l.a.createElement("td",null,"Difficulty"),l.a.createElement("td",null,"Task Type"),l.a.createElement("td",null,"Last Modified"),l.a.createElement("td",null,"Actions")),c.map((function(e,t){var a=e.task_id,n=e.name,c=e.difficulty,o=e.modified,i=e.answer_type;return l.a.createElement("tr",{id:a},l.a.createElement("td",null,l.a.createElement(s.b,{to:{pathname:"/tasks/view",task_id:a,topic_name:r.name}},n)),l.a.createElement("td",null,c),l.a.createElement("td",null,V(i)),l.a.createElement("td",null,U(o,u)),l.a.createElement("td",null,l.a.createElement(s.b,{to:{pathname:"/tasks/edit",task_id:a,topic_name:r.name}},"Edit "),l.a.createElement(s.b,{to:{pathname:"/tasks/move",task_id:a,topic_name:r.name}},"Move "),l.a.createElement(s.b,{to:{pathname:"/tasks/attachments",task_id:a,task_name:n,topic_name:r.name}},"Attachments "),l.a.createElement(s.b,{onClick:function(){return function(e){d.a.delete("/tasks/delete",{data:{token:E,task_id:e}}).then((function(e){e.data;window.location.reload()})).catch((function(e){}))}(a)}},"Delete")))}))))}))))};var K=function(e){var t;return console.log(e.location.topic_id),void 0!=e.location.topic_id?(localStorage.setItem("currentTopic",e.location.topic_id),t=e.location.topic_id):t=localStorage.getItem("currentTopic"),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(z,{topic_id:t})})};var q=function(e){var t,a=l.a.useContext(f);return void 0!=e.location.topic_id?(localStorage.setItem("currentTopic",e.location.topic_id),t=e.location.topic_id):t=localStorage.getItem("currentTopic"),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Task Groups"),l.a.createElement("h2",null,"Topic: ",e.location.topic_name)),l.a.createElement("hr",null),l.a.createElement("form",{name:"addTaskGroupForm",onSubmit:function(n){n.preventDefault(),console.log(a);var l=n.target[0].value,r=n.target[1].checked;console.log(r),d.a.post("/taskgroups/add",{token:a,topic_id:t,name:l,submit_multiple:r}).then((function(t){var a=t.data;console.log(a),e.history.push("/topics/manage")})).catch((function(e){}))}},l.a.createElement("input",{type:"text",placeholder:"*Title",name:"name"}),l.a.createElement("br",null),l.a.createElement("h4",null,"Allow submissions for multiple tasks"),l.a.createElement("input",{type:"checkbox",name:"can_submit"}),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Create Task Group"})),l.a.createElement("br",null),l.a.createElement(s.b,{to:"/topics/manage"},"Cancel"))})};var W=function(e){var t,a=l.a.useContext(f);return void 0!=e.location.taskgroup_id?(localStorage.setItem("currentTaskgroup",e.location.taskgroup_id),t=e.location.taskgroup_id):t=localStorage.getItem("currentTaskgroup"),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Task Groups"),l.a.createElement("h2",null,"Topic: ",e.location.topic_name)),l.a.createElement("hr",null),l.a.createElement("form",{name:"editTaskGroupForm",onSubmit:function(n){n.preventDefault();var l=n.target[0].value;d.a.put("/taskgroups/edit",{token:a,taskgroup_id:t,name:l}).then((function(t){var a=t.data;console.log(a),e.history.push("/topics/manage")})).catch((function(e){}))}},l.a.createElement("input",{type:"text",name:"name",defaultValue:e.location.taskgroup_name}),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Update Task Group"}),l.a.createElement(s.b,{to:"/topics/manage"},"Cancel")))})};var Y=function(e){var t,a=l.a.useContext(f),n=l.a.useState([]),r=Object(o.a)(n,2),c=r[0],i=r[1];return void 0!=e.location.topic_id?(localStorage.setItem("currentTopic",e.location.topic_id),e.location.topic_id):localStorage.getItem("currentTopic"),void 0!=e.location.taskgroup_id?(localStorage.setItem("currentTaskgroup",e.location.taskgroup_id),t=e.location.taskgroup_id):t=localStorage.getItem("currentTaskgroup"),C((function(){d.a.get("/topics/list",{params:{token:a}}).then((function(e){var t=e.data.topics;console.log(t),i(t)}))}),[],2),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Task Groups")),l.a.createElement("hr",null),l.a.createElement("form",{onSubmit:function(n){n.preventDefault(),console.log(n.target);var l=n.target[0].value;d.a.put("/taskgroups/move",{token:a,taskgroup_id:t,newTopic:l}).then((function(t){var a=t.data;console.log(a),e.history.push("/topics/manage")})).catch((function(e){}))}},l.a.createElement("h4",null,"Task Group"),l.a.createElement("select",{id:"taskgroup_id"},c.map((function(e,t){var a=e.topic_id,n=e.name;return l.a.createElement("option",{value:a},n)}))),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Move Task Group"})),l.a.createElement(s.b,{to:"/topics/manage"},"Cancel"))})};var J=function(e){var t,a=l.a.useContext(f);return void 0!=e.location.taskgroup_id?(localStorage.setItem("currentTaskgroup",e.location.taskgroup_id),t=e.location.taskgroup_id):t=localStorage.getItem("currentTaskgroup"),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Tasks"),l.a.createElement("h2",null,"Topic: ",e.location.topic_name),l.a.createElement("h2",null,"Task Group: ",e.location.taskgroup_name)),l.a.createElement("hr",null),l.a.createElement("form",{name:"addTask",onSubmit:function(n){n.preventDefault(),console.log(n.target);var l=n.target[0].value,r=n.target[1].value,c=n.target[2].value,o=n.target[3].value,s=n.target[4].value,i=n.target[5].value;d.a.post("/tasks/add",{token:a,taskgroup_id:t,name:l,difficulty:c,type:r,description:o,hint:s,solution:i}).then((function(t){var a=t.data;console.log(a),e.history.push("/topics/manage")})).catch((function(e){}))}},l.a.createElement("input",{type:"text",placeholder:"*Title",name:"name"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h4",null,"Task Type"),l.a.createElement("select",{id:"type"},l.a.createElement("option",{value:"standard"},"Standard"),l.a.createElement("option",{value:"content"},"Content only (no answer)"),l.a.createElement("option",{value:"multiple-choice-single"},"Multiple Choice (Single Answer)"),l.a.createElement("option",{value:"multiple-choice-multiple"},"Multiple Choice (Multiple Answers)"),l.a.createElement("option",{value:"short-answer"},"Short Answer")),l.a.createElement("br",null),l.a.createElement("h4",null,"*Difficulty"),l.a.createElement("br",null),l.a.createElement("select",{id:"difficulty"},l.a.createElement("option",{value:"Bronze"},"Bronze"),l.a.createElement("option",{value:"Silver"},"Silver"),l.a.createElement("option",{value:"Gold"},"Gold"),l.a.createElement("option",{value:"Platinum"},"Platinum"),l.a.createElement("option",{value:"Kryptonite"},"Kryptonite"),l.a.createElement("option",{value:"Unspecified"},"Unspecified")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("textarea",{name:"description",placeholder:"Description"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("textarea",{name:"hint",placeholder:"Hint"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("textarea",{name:"solution",placeholder:"Solution"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Create Task"}),l.a.createElement(s.b,{to:"/topics/manage"},"Cancel")))})},$=a(11),Q=a(13),X=a.n(Q);var Z=function(e){var t,n=a(53);void 0!=e.location.task_id?(t=e.location.task_id,localStorage.setItem("currentTask",e.location.task_id)):t=localStorage.getItem("currentTask");var r,c=l.a.useState({task_id:0,taskgroup:"",name:"",difficulty:"",description:"",hint:"",solution:"",attachments:[],answer_type:"",choices:[],correct_answer:-1}),i=Object(o.a)(c,2),m=i[0],u=i[1],p=l.a.useContext(f);"multiple-choice-single"==m.answer_type?r=l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Choices"),m.choices.map((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"radio",name:"correctAnswer",id:"answer"+(t+1),checked:m.correct_answer==t}),l.a.createElement("label",{for:"answer"+(t+1)},e),l.a.createElement("br",null))}))):"multiple-choice-multiple"==m.answer_type&&(r=l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Choices"),m.choices.map((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"checkbox",name:"correctAnswer",id:"answer"+(t+1),checked:m.correct_answer.includes(t)}),l.a.createElement("label",{for:"answer"+(t+1)},e),l.a.createElement("br",null))})))),C((function(){d.a.get("/tasks/details",{params:{token:p,task_id:t}}).then((function(e){var t=e.data.task;console.log(t),u(t)}))}),[],2);var E=new $.Converter({extensions:[n]});return console.log(E.makeHtml(m.description).replace(/(?:\r\n|\r|\n)/g,"<br>")),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h4",{id:"topicTitle"},e.location.topic_name),l.a.createElement("h4",{id:"taskGroupTitle"},m.taskgroup),l.a.createElement("h1",null,"Tasks")),l.a.createElement("hr",null),l.a.createElement("div",null,l.a.createElement("h3",{id:"taskName"},m.name),l.a.createElement("h4",null,"Difficulty"),l.a.createElement("p",{id:"difficulty"},m.difficulty),l.a.createElement("h4",null,"Description"),l.a.createElement("p",{id:"description"},X()(E.makeHtml(m.description).replace(/(?:\r\n|\r|\n)/g,"<br>"))),l.a.createElement("h4",null,"Hint"),l.a.createElement("p",{id:"hint"},X()(E.makeHtml(m.hint).replace(/(?:\r\n|\r|\n)/g,"<br>"))),r,"content"!=m.answer_type?l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Solution"),l.a.createElement("p",{id:"solution"},m.solution)):l.a.createElement(l.a.Fragment,null),l.a.createElement("h4",null,"Attachments"),l.a.createElement("div",{id:"attachments"},m.attachments.map((function(e,t){e.attachment_id;var a=e.cover_name,n=e.url;return l.a.createElement("div",{className:"attachment"},l.a.createElement("h4",null,"Attachment"),a," ",l.a.createElement("a",{href:n},"Download"),l.a.createElement("br",null))})))),l.a.createElement(s.b,{to:"/topics/manage"},"Back"))})};var ee=function(e){var t,a,n=l.a.useState({task_id:0,taskgroup:"",name:"",difficulty:"",description:"",hint:"",solution:"",answer_type:"",choices:[],correct_answer:-1}),r=Object(o.a)(n,2),c=r[0],i=r[1],m=l.a.useState(),u=Object(o.a)(m,2),p=u[0],E=u[1],h=l.a.useContext(f);function g(){var e=document.getElementById("numChoices").value;e>=0?E(e):console.log("Invalid number of choices")}if(void 0!=e.location.task_id?(localStorage.setItem("currentTask",e.location.task_id),t=e.location.task_id):t=localStorage.getItem("currentTask"),C((function(){d.a.get("/tasks/details",{params:{token:h,task_id:t}}).then((function(e){var t=e.data.task;console.log(t),i(t),E(t.choices.length)}))}),[],2),"multiple-choice-single"==c.answer_type)if(p==c.choices.length)a=l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Choices"),l.a.createElement("br",null),l.a.createElement("p",null,"Choose the correct answer."),c.choices.map((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"radio",name:"correctAnswer",id:"answer"+(t+1),defaultChecked:c.correct_answer==t}),l.a.createElement("input",{type:"text",id:"choice"+(t+1),defaultValue:e}),l.a.createElement("br",null))})),l.a.createElement("h4",null,"Number of Choices"),l.a.createElement("input",{type:"text",id:"numChoices"}),l.a.createElement("br",null),l.a.createElement("input",{type:"button",onClick:g,value:"Reset Choices"}),l.a.createElement("br",null),l.a.createElement("br",null));else{for(var v=[],k=0;k<p;k++)v.push(k);a=l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Choices"),l.a.createElement("br",null),l.a.createElement("p",null,"Choose the correct answer."),v.map((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"radio",name:"correctAnswer",id:"answer"+(t+1)}),l.a.createElement("input",{type:"text",id:"choice"+(t+1),placeholder:"Choice "+(t+1)}),l.a.createElement("br",null))})),l.a.createElement("h4",null,"Number of Choices"),l.a.createElement("input",{type:"text",id:"numChoices"}),l.a.createElement("br",null),l.a.createElement("input",{type:"button",onClick:g,value:"Reset Choices"}),l.a.createElement("br",null),l.a.createElement("br",null))}else if("multiple-choice-multiple"==c.answer_type)if(p==c.choices.length)a=l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Choices"),l.a.createElement("br",null),l.a.createElement("p",null,"Choose the correct answer."),c.choices.map((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"checkbox",name:"correctAnswer",id:"answer"+(t+1),defaultChecked:c.correct_answer==t}),l.a.createElement("input",{type:"text",id:"choice"+(t+1),defaultValue:e}),l.a.createElement("br",null))})),l.a.createElement("h4",null,"Number of Choices"),l.a.createElement("input",{type:"text",id:"numChoices"}),l.a.createElement("br",null),l.a.createElement("input",{type:"button",onClick:g,value:"Reset Choices"}),l.a.createElement("br",null),l.a.createElement("br",null));else{for(v=[],k=0;k<p;k++)v.push(k);a=l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Choices"),l.a.createElement("br",null),l.a.createElement("p",null,"Choose the correct answers."),v.map((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"checkbox",name:"correctAnswer",id:"answer"+(t+1)}),l.a.createElement("input",{type:"text",id:"choice"+(t+1),placeholder:"Choice "+(t+1)}),l.a.createElement("br",null))})),l.a.createElement("h4",null,"Number of Choices"),l.a.createElement("input",{type:"text",id:"numChoices"}),l.a.createElement("br",null),l.a.createElement("input",{type:"button",onClick:g,value:"Reset Choices"}),l.a.createElement("br",null),l.a.createElement("br",null))}else"content"==c.answer_type&&(a=l.a.createElement(l.a.Fragment,null));return console.log(a),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Tasks"),l.a.createElement("h2",null,"Topic: ",e.location.topic_name),l.a.createElement("h2",null,"Task Group: ",c.taskgroup),l.a.createElement("h4",null,"Task Type: ",V(c.answer_type))),l.a.createElement("hr",null),l.a.createElement("form",{name:"addTask",onSubmit:function(a){a.preventDefault(),console.log(a.target);for(var n,l=a.target[0].value,r=a.target[1].value,o=a.target[2].value,s=a.target[3].value,i=[],m=[],u=0;u<p;u++)i.push(document.getElementById("choice"+(u+1)).value),document.getElementById("answer"+(u+1)).checked&&m.push(u);n="multiple-choice-single"==c.answer_type||"multiple-choice-multiple"==c.answer_type?a.target[2*p+6].value:a.target[4].value,d.a.put("/tasks/edit",{token:h,task_id:t,name:l,difficulty:r,description:o,hint:s,solution:n,choices:i,correct_answers:m}).then((function(t){var a=t.data;console.log(a),e.history.push("/topics/manage")})).catch((function(e){}))}},l.a.createElement("input",{type:"text",placeholder:"*Title",name:"name",defaultValue:c.name}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h4",null,"*Difficulty"),l.a.createElement("select",{id:"difficulty"},l.a.createElement("option",{value:"Bronze"},"Bronze"),l.a.createElement("option",{value:"Silver"},"Silver"),l.a.createElement("option",{value:"Gold"},"Gold"),l.a.createElement("option",{value:"Platinum"},"Platinum"),l.a.createElement("option",{value:"Kryptonite"},"Kryptonite"),l.a.createElement("option",{value:"Unspecified"},"Unspecified")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("textarea",{name:"description",placeholder:"Description",defaultValue:c.description}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("textarea",{name:"hint",placeholder:"Hint",defaultValue:c.hint}),l.a.createElement("br",null),l.a.createElement("br",null),a,"content"!=c.answer_type?l.a.createElement(l.a.Fragment,null,l.a.createElement("textarea",{name:"solution",placeholder:"Solution",defaultValue:c.solution}),l.a.createElement("br",null),l.a.createElement("br",null)):l.a.createElement(l.a.Fragment,null),l.a.createElement("input",{type:"submit",value:"Update Task"}),l.a.createElement(s.b,{to:"/topics/manage"},"Cancel")))})};var te=function(e){var t,a,n=l.a.useState({name:"",topic_id:0,taskgroups:[]}),r=Object(o.a)(n,2),c=r[0],i=r[1],m=l.a.useContext(f);return void 0!=e.location.topic_id?(localStorage.setItem("currentTopic",e.location.topic_id),t=e.location.topic_id):t=localStorage.getItem("currentTopic"),void 0!=e.location.task_id?(localStorage.setItem("currentTask",e.location.task_id),a=e.location.task_id):a=localStorage.getItem("currentTask"),C((function(){d.a.get("/topics/details",{params:{token:m,topic_id:t}}).then((function(e){var t=e.data.topic;console.log(t),i(t),console.log(c)}))}),[],2),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h4",null,e.location.topic_name),l.a.createElement("h1",null,"Tasks")),l.a.createElement("hr",null),l.a.createElement("form",{onSubmit:function(t){t.preventDefault(),console.log(t.target);var n=t.target[0].value;d.a.put("/tasks/move",{token:m,task_id:a,newTaskgroup:n}).then((function(t){var a=t.data;console.log(a),e.history.push("/topics/manage")})).catch((function(e){}))}},l.a.createElement("h4",null,"Task Group"),l.a.createElement("select",{id:"task_id"},c.taskgroups.map((function(e,t){var a=e.taskgroup_id,n=e.name;return l.a.createElement("option",{value:a},n)}))),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Move Task"})),l.a.createElement(s.b,{to:"/topics/manage"},"Cancel"))})},ae=a(59);var ne=function(e){var t;void 0!=e.location.task_id?(t=e.location.task_id,localStorage.setItem("currentTask",t)):t=localStorage.getItem("currentTask");var a=l.a.useState([]),n=Object(o.a)(a,2),r=n[0],c=n[1],i=l.a.useState(0),m=Object(o.a)(i,2),u=m[0],p=m[1],E=l.a.useContext(f),h=!1;function g(e){e.preventDefault(),document.getElementById("addAttachmentButton").style.display="block",p(u-1)}function v(e){h=e.target.files[0]}function k(e){e.preventDefault(),console.log(e);var a=e.target[0].value;if(h){var n=h;console.log(a,n);var l=new FormData;l.append("token",E),l.append("task_id",t),l.append("cover_name",a),l.append("attachment",n),d.a.post("/tasks/attachments/add",l,{headers:{"content-type":"multipart/form-data"}}).then((function(e){var t=e.data;console.log(t),window.location.reload()})).catch((function(e){}))}else console.log("No file chosen")}return C((function(){d.a.get("/tasks/attachments",{params:{token:E,task_id:t}}).then((function(e){var t=e.data.attachments;console.log(t),c(t)})).catch((function(e){}))}),[],2),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"headerSection"},l.a.createElement("h4",{id:"topicTitle"},e.location.topic_name),l.a.createElement("h4",{id:"taskTitle"},e.location.task_name),l.a.createElement("h1",null,"Attachments"),l.a.createElement("div",{onClick:function(e){e.preventDefault(),console.log(u),document.getElementById("addAttachmentButton").style.display="none",p(u+1)},id:"addAttachmentButton",class:"teacherButton"},"Add Attachment")),l.a.createElement("hr",null),l.a.createElement("div",{id:"attachments"},r.map((function(e,t){var a=e.attachment_id,n=e.cover_name,r=e.url;return l.a.createElement("div",{className:"attachment"},l.a.createElement("h4",null,"Attachment"),n," ",l.a.createElement("a",{href:r},"Download"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",{onClick:function(){return function(e){d.a.delete("/tasks/attachments/delete",{data:{token:E,attachment_id:e}}).then((function(e){e.data;window.location.reload()})).catch((function(e){}))}(a)}},"Remove Attachment"))})),Object(ae.a)(Array(u)).map((function(e,t){return l.a.createElement("div",{className:"attachment"},l.a.createElement("form",{name:"addAttachment",onSubmit:k,encType:"multipart/form-data"},l.a.createElement("input",{type:"text",name:"name"}),l.a.createElement("br",null),l.a.createElement("div",{className:"filebox"},l.a.createElement("input",{type:"file",name:"attachment",id:"attachment"+t,onChange:v}),l.a.createElement("label",{for:"attachment"+t},"Choose File"),l.a.createElement("br",null)),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",id:"addAttachmentButton",value:"Add Attachment"}),l.a.createElement("a",{onClick:g},"Remove Attachment")))}))),l.a.createElement(s.b,{to:"/topics/manage"},"Back"))})};var le=function(){var e=l.a.useState([]),t=Object(o.a)(e,2),a=t[0],n=t[1],r=l.a.useState([]),c=Object(o.a)(r,2),i=c[0],m=c[1],u=l.a.useContext(f);return C((function(){d.a.get("/courses/list",{params:{token:u}}).then((function(e){var t=e.data.courses,a=e.data.currentTime;console.log(t,a),n(t),m(a)}))}),[],2),l.a.createElement(l.a.Fragment,null,l.a.createElement("table",{id:"coursesList"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Course"),l.a.createElement("td",null,"Last Modified"),l.a.createElement("td",null,"Actions"))),l.a.createElement("tbody",null,a.map((function(e,t){var a=e.course_id,n=e.name,r=e.modified;return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(s.b,{to:{pathname:"/courses/view/teacher",course_id:a}},n)),l.a.createElement("td",null,U(r,i)),l.a.createElement("td",null,l.a.createElement(s.b,{to:{pathname:"/courses/manage",course_id:a}},"Manage "),l.a.createElement(s.b,{to:{pathname:"/courses/edit",course_id:a,course_name:n}},"Edit "),l.a.createElement(s.b,{onClick:function(){return function(e){d.a.delete("/courses/delete",{data:{token:u,course_id:e}}).then((function(e){return[window.location.reload()]})).catch((function(e){}))}(a)}},"Delete")))})))))};var re=function(e){return l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Courses"),l.a.createElement(s.b,{to:"/courses/add"},l.a.createElement("div",{className:"teacherButton"},"Add Course"))),l.a.createElement("hr",null),l.a.createElement(le,null))})};var ce=function(e){var t=l.a.useContext(f);return l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Courses")),l.a.createElement("hr",null),l.a.createElement("form",{name:"addCoursesForm",onSubmit:function(a){a.preventDefault();var n=a.target[0].value;d.a.post("/courses/add",{token:t,name:n}).then((function(t){var a=t.data;console.log(a),e.history.push("/courses")})).catch((function(e){}))}},l.a.createElement("input",{type:"text",placeholder:"*Title",name:"name"}),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Create Course"}),l.a.createElement(s.b,{to:"/courses"},"Cancel")))})};var oe=function(e){var t,a=l.a.useContext(f);return void 0!=e.location.course_id?(t=e.location.course_id,localStorage.setItem("currentCourse",t)):t=localStorage.getItem("currentCourse"),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Courses")),l.a.createElement("hr",null),l.a.createElement("form",{name:"editCourseForm",onSubmit:function(n){n.preventDefault();var l=n.target[0].value;d.a.put("/courses/edit",{token:a,course_id:t,name:l}).then((function(t){var a=t.data;console.log(a),e.history.push("/courses")})).catch((function(e){}))}},l.a.createElement("input",{type:"text",defaultValue:e.location.course_name,name:"name"}),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Update Course"}),l.a.createElement(s.b,{to:"/courses"},"Cancel")))})};var se=function(e){var t=e.course_id,a=l.a.useState({course_id:0,name:"",modules:[],classes:[]}),n=Object(o.a)(a,2),r=n[0],c=n[1],i=l.a.useContext(f);return C((function(){d.a.get("/courses/details",{params:{token:i,course_id:t}}).then((function(e){var t=e.data.course;console.log(t),c(t)})).catch((function(e){}))}),[],2),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"headerSection"},l.a.createElement("h1",null,"Courses")),l.a.createElement("h4",null,"Title"),l.a.createElement("p",{id:"courseTitle"},r.name),l.a.createElement("h4",null,"Classes"),l.a.createElement("p",{id:"courseClasses"},r.classes.map((function(e,t){var a=e.class_id,n=e.name;return l.a.createElement(l.a.Fragment,null,l.a.createElement(s.b,{to:{pathname:"/classes/manage",class_id:a}},n),t!=r.classes.length-1?", ":"")}))),l.a.createElement("h2",null,"Topics"),l.a.createElement(s.b,{to:{pathname:"/courses/topics/add",course_id:t,course_name:r.name}},l.a.createElement("div",{class:"teacherButton"},"Add Topic")),l.a.createElement("div",{class:"teacherButton",id:"reorderTopicsButton",onClick:function(){var e=document.getElementById("reorderTopicsButton");if("notReordering"==e.name||void 0==e.name)e.name="reordering",e.style.backgroundColor="#dd514c",e.style.color="white",e.innerHTML="Finish Reordering",O("#topicList tr");else{e.name="notReordering",e.innerHTML="Reorder Topics",e.style.backgroundColor="white",e.style.color="black",L("#topicList tr");for(var t=document.querySelectorAll("#topicList tr"),a=[],n=0;n<t.length;n++)a.push(t[n].id);console.log(a);var l=r.course_id;d.a.put("/courses/topics/reorder",{token:i,course_id:l,newTopicList:a}).then((function(e){window.location.reload()})).catch((function(e){}))}},name:"notReordering"},"Reorder Topics"),l.a.createElement("hr",null),l.a.createElement("table",{id:"topicList"},l.a.createElement("thead",null,l.a.createElement("td",null,"Name"),l.a.createElement("td",null,"Topic"),l.a.createElement("td",null,"Actions")),r.modules.map((function(e,t){var a=e.topic_id,n=e.topic_name,r=e.module_id,c=e.module_name;return l.a.createElement("tr",{id:r},l.a.createElement("td",null,c),l.a.createElement("td",null,n),l.a.createElement("td",null,l.a.createElement(s.b,{to:{pathname:"/courses/topics/rename",module_id:r,module_name:c}},"Rename "),l.a.createElement(s.b,{to:{pathname:"/topics/manage",topic_id:a}},"Manage "),l.a.createElement(s.b,{onClick:function(){return function(e){d.a.delete("/courses/topics/remove",{data:{token:i,module_id:e}}).then((function(e){var t=e.data;console.log(t),window.location.reload()})).catch((function(e){}))}(r)}},"Remove")))}))))};var ie=function(e){var t;return void 0!=e.location.course_id?(t=e.location.course_id,localStorage.setItem("currentCourse",t)):t=localStorage.getItem("currentCourse"),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(se,{course_id:t})})};var me=function(e){var t=e.course_id,n=e.user_type,r=l.a.useState({course_id:0,name:"",modules:[]}),c=Object(o.a)(r,2),s=c[0],i=c[1],m=l.a.useState({topic_id:0,module_id:0,module_name:"",taskgroups:[]}),u=Object(o.a)(m,2),p=u[0],E=u[1],h=l.a.useState({task_id:0,taskgroup_name:"",taskgroup_id:0,name:"",difficulty:"",description:"",hint:"",solution:"",attachments:[],submit_multiple:!1,answer_type:"",choices:[]}),g=Object(o.a)(h,2),v=g[0],b=g[1],k=l.a.useState([]),y=Object(o.a)(k,2),_=y[0],w=y[1],S=l.a.useState([]),T=Object(o.a)(S,2),x=T[0],N=T[1],F=l.a.useState(),B=Object(o.a)(F,2),I=B[0],D=B[1],A=a(53),O=l.a.useContext(f),L=[];function j(e){for(var t=document.getElementById("topicTabs").childNodes,a=0;a<t.length;a++)t[a].id=="md"+e?(t[a].style.borderTop="1px solid lightgray",t[a].style.borderLeft="1px solid lightgray",t[a].style.borderRight="1px solid lightgray"):t[a].style.border="0px";var n=function(e){for(var t=0;t<s.modules.length;t++)if(s.modules[t].module_id==e)return s.modules[t]}(e);E(n)}function M(e,t,a){var n=function(e,t,a){for(var n=0;n<s.modules.length;n++)if(s.modules[n].module_id==e)for(var l=0;l<s.modules[n].taskgroups.length;l++)if(s.modules[n].taskgroups[l].taskgroup_id==t)for(var r=0;r<s.modules[n].taskgroups[l].tasks.length;r++)if(s.modules[n].taskgroups[l].tasks[r].task_id==a)return s.modules[n].taskgroups[l].tasks[r]}(e,t,a);console.log(n),b(n),D(1),L=[],te=[];var l=document.getElementById("hint");l.innerHTML="Show Hint",l.name="hintHide",l.style.width="80px";var r=document.getElementById("0");null!=r&&(r.innerHTML="Choose File")}function R(e){L.push(e.target.files[0]),document.getElementById(e.target.id.replace("submission","")).innerHTML=e.target.files[0].name}function G(e){e.preventDefault();var t=new FormData;if(t.append("token",O),"standard"==v.answer_type){if(0==L.length)return void console.log("No files chosen");for(var a=[],n=0;n<te.length;n++)console.log(e.target[n].name),e.target[n].checked&&a.push(te[n][0]);console.log(a,L),t.append("tasks",a);for(n=0;n<I;n++)t.append("file"+n,L[n])}else if("multiple-choice-single"==v.answer_type){for(var l=0;l<v.choices.length;l++)if(document.getElementById("answer"+(l+1)).checked){t.append("selected_answer",l);break}t.append("tasks",[v.task_id])}else if("multiple-choice-multiple"==v.answer_type){var r=[];for(l=0;l<v.choices.length;l++)document.getElementById("answer"+(l+1)).checked&&r.push(l);t.append("selected_answer",r),t.append("tasks",[v.task_id])}else if("short-answer"==v.answer_type){var c=e.target[0].value;console.log(c),t.append("selected_answer",c),t.append("tasks",[v.task_id])}console.log(L),d.a.post("/tasks/submit",t,{headers:{"content-type":"multipart/form-data"}}).then((function(e){var t=e.data;console.log(t),window.location.reload()})).catch((function(e){}))}function P(e){for(var t=[],a=0;a<_.length;a++)_[a].tasks.includes(e)&&t.push(_[a]);return t.length>0?t[t.length-1].status:""}C((function(){d.a.get("/courses/details",{params:{token:O,course_id:t}}).then((function(e){var t=e.data.course;console.log(t),i(t)})).catch((function(e){}))}),[],2),C((function(){v.task_id,d.a.get("/courses/submissions",{params:{token:O,course_id:t}}).then((function(e){var t=e.data.submissions,a=e.data.progress;console.log(t),console.log(a),w(t),N(a)})).catch((function(e){}))}),[],2);var H,V,z=new $.Converter({extensions:[A]});H=v.hint?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"teacherButton",id:"hint",name:"hintHide",onClick:function(){return function(){var e=document.getElementById("hint");e.innerHTML="<h4>Hint</h4>"+z.makeHtml(v.hint).replace(/(?:\r\n|\r|\n)/g,"<br>"),e.name="hintShow",e.style.width="100%",e.className="hintShow"}()}},"Show Hint"),l.a.createElement("br",null)):l.a.createElement("div",{className:"teacherButton",id:"hint",style:{display:"none"}});var K=function(){for(var e=[],t=0;t<_.length;t++)_[t].tasks.includes(v.task_id)&&e.push(_[t]);return e}();if(console.log(K),"student"==n&&0!=v.task_id)if("multiple-choice-single"==v.answer_type)if(K.length>0){var q=K[K.length-1].selected_answer,W=K[K.length-1].status;V=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"submissionBox"},l.a.createElement("form",{name:"submit_task_form",onSubmit:G},l.a.createElement("div",{className:"submissionDisplay",name:W},v.choices.map((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"radio",name:"correctAnswer",id:"answer"+(t+1),defaultChecked:t==q}),l.a.createElement("label",{for:"answer"+(t+1)},e),l.a.createElement("br",null))})),K[K.length-1].comment),l.a.createElement("input",{type:"submit",value:"Submit"}))))}else V=l.a.createElement("div",{className:"submissionBox"},l.a.createElement("hr",null),l.a.createElement("form",{name:"submit_task_form",onSubmit:G},v.choices.map((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"radio",name:"correctAnswer",id:"answer"+(t+1)}),l.a.createElement("label",{for:"answer"+(t+1)},e),l.a.createElement("br",null))})),l.a.createElement("input",{type:"submit",value:"Submit"})));else if("multiple-choice-multiple"==v.answer_type)if(K.length>0){var Y=K[K.length-1].selected_answer;W=K[K.length-1].status;V=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"submissionBox"},l.a.createElement("form",{name:"submit_task_form",onSubmit:G},l.a.createElement("div",{className:"submissionDisplay",name:W},v.choices.map((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"checkbox",name:"correctAnswer",id:"answer"+(t+1),defaultChecked:Y.includes(t)}),l.a.createElement("label",{for:"answer"+(t+1)},e),l.a.createElement("br",null))})),K[K.length-1].comment),l.a.createElement("input",{type:"submit",value:"Submit"}))))}else V=l.a.createElement("div",{className:"submissionBox"},l.a.createElement("hr",null),l.a.createElement("form",{name:"submit_task_form",onSubmit:G},v.choices.map((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"checkbox",name:"correctAnswer",id:"answer"+(t+1)}),l.a.createElement("label",{for:"answer"+(t+1)},e),l.a.createElement("br",null))})),l.a.createElement("input",{type:"submit",value:"Submit"})));else if("standard"==v.answer_type){var J;console.log(K),J=K.length>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Submissions"),K.map((function(e,t){var a=e.time,n=e.currentTime,r=e.status,c=e.comment,o=e.files;return l.a.createElement("div",{className:"submissionDisplay",name:r},c,l.a.createElement("br",null),l.a.createElement("strong",null," ",r),l.a.createElement("br",null),o.map((function(e,t){var a=e.cover_name,n=e.url;return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{href:n},a),l.a.createElement("br",null))})),l.a.createElement("span",null,U(a,n)))}))):l.a.createElement(l.a.Fragment,null);for(var Q,Z=[],ee=0;ee<I;ee++)0!=ee?Z.push(l.a.createElement("div",{className:"filebox"},l.a.createElement("input",{type:"file",name:"submission"+ee,id:"submission"+ee,onChange:R}),l.a.createElement("br",null),l.a.createElement("label",{for:"submission"+ee,id:ee},"Choose File"),l.a.createElement("div",{className:"redTeacherButton",id:"removeFileButton",onClick:function(){1!=I&&(D(I-1),document.getElementById("0").innerHTML="Choose File")}},"Remove File"))):Z.push(l.a.createElement("div",{className:"filebox"},l.a.createElement("input",{type:"file",name:"submission"+ee,id:"submission"+ee,onChange:R}),l.a.createElement("br",null),l.a.createElement("label",{for:"submission"+ee,id:ee},"Choose File")));var te=[];if(v.submit_multiple){for(var ae=0;ae<p.taskgroups.length;ae++)if(console.log(ae),p.taskgroups[ae].taskgroup_id==v.taskgroup_id){for(var ne=0;ne<p.taskgroups[ae].tasks.length;ne++)te.push([p.taskgroups[ae].tasks[ne].task_id,p.taskgroups[ae].tasks[ne].name]);break}Q=l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Submit for Multiple Tasks"),l.a.createElement("br",null),te.map((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"checkbox",name:"task"+e[0]}),"   ",e[1]," ",l.a.createElement("br",null))})))}else te.push([v.task_id,v.name]),Q=l.a.createElement("input",{id:"singleSubmit",type:"checkbox",name:"task"+v.task_id,checked:!0});console.log(te),V=l.a.createElement("div",{className:"submissionBox"},l.a.createElement("h4",null,"Submit Your Solution"),l.a.createElement("hr",null),l.a.createElement("form",{name:"submit_task_form",onSubmit:G},Q,l.a.createElement("p",null,"Files"),Z.map((function(e,t){return l.a.createElement(l.a.Fragment,null,e,l.a.createElement("br",null))})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"greenTeacherButton",id:"addFileButton",onClick:function(){D(I+1),document.getElementById("0").innerHTML="Choose File"}},"Add File"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Submit"})))}else if("short-answer"==v.answer_type)if(K.length>0){var le=K[K.length-1].selected_answer;W=K[K.length-1].status;console.log(le),V=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"submissionBox"},l.a.createElement("form",{name:"submit_task_form",onSubmit:G},l.a.createElement("div",{className:"submissionDisplay",name:W},l.a.createElement("textarea",{name:"selected_answer",value:le}),l.a.createElement("br",null),K[K.length-1].comment),l.a.createElement("input",{type:"submit",value:"Submit"}))))}else V=l.a.createElement("div",{className:"submissionBox"},l.a.createElement("form",{name:"submit_task_form",onSubmit:G},l.a.createElement("textarea",{name:"selected_answer"}),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Submit"})));else V=l.a.createElement(l.a.Fragment,null);else"multiple-choice-single"==v.answer_type?V=l.a.createElement("div",{className:"submissionBox"},l.a.createElement("form",{name:"submit_task_form",onSubmit:G},v.choices.map((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"radio",name:"correctAnswer",id:"answer"+(t+1)}),l.a.createElement("label",{for:"answer"+(t+1)},e),l.a.createElement("br",null))})))):"multiple-choice-multiple"==v.answer_type?V=l.a.createElement("div",{className:"submissionBox"},l.a.createElement("form",{name:"submit_task_form",onSubmit:G},v.choices.map((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"checkbox",name:"correctAnswer",id:"answer"+(t+1)}),l.a.createElement("label",{for:"answer"+(t+1)},e),l.a.createElement("br",null))})))):"short-answer"==v.answer_type&&(V=l.a.createElement("div",{className:"submissionBox"},l.a.createElement("form",{name:"submit_task_form",onSubmit:G},l.a.createElement("textarea",{name:"selected_answer"}))));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,l.a.createElement("h1",{id:"courseName"},s.name)),l.a.createElement("hr",null),l.a.createElement("table",{id:"topicProgress"},l.a.createElement("tr",null,s.modules.map((function(e,t){var a=e.module_name;return l.a.createElement("td",null,a)}))),l.a.createElement("tr",{id:"progressDashRow"},x.map((function(e,t){e.unmarked,e.correct,e.incorrect;var a=e.progress;return l.a.createElement("td",null,l.a.createElement("div",{className:"progressDash"},l.a.createElement("div",{className:"unmarkedDash",style:{width:a.unmarked+"%"}}),l.a.createElement("div",{className:"correctDash",style:{width:a.correct+"%"}}),l.a.createElement("div",{className:"incorrectDash",style:{width:a.incorrect+"%"}})))})))),l.a.createElement("div",{id:"topicTabs"},s.modules.map((function(e,t){var a=e.module_id,n=e.module_name;e.topic_id;return l.a.createElement("div",{class:"topicTab",id:"md"+a,onClick:function(){return j(a)}},n)}))),l.a.createElement("div",{id:"taskGroupBox"},l.a.createElement("div",{id:"taskgroupList"},p.taskgroups.map((function(e,t){var a=e.taskgroup_id,n=e.name,r=e.tasks;return l.a.createElement("span",{className:"taskGroupList",name:"undisplayed",id:"tg"+a},l.a.createElement("span",{className:"taskGroupName",onClick:function(){return function(e){var t=document.getElementById("tg"+e),a=t.childNodes;if(console.log(t.name),"undisplayed"==t.name||void 0==t.name){for(var n=1;n<a.length;n++)a[n].style.display="block",console.log(a[n].style.display);t.name="displayed"}else if("displayed"==t.name){for(n=1;n<a.length;n++)a[n].style.display="none";t.name="undisplayed"}}(a)}},n),r.map((function(e,t){var n=e.task_id,r=e.name,c=e.difficulty;return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{style:{display:"none"},id:"tk"+n,onClick:function(){return M(p.module_id,a,n)},className:c,name:P(n)},r))})))}))),l.a.createElement("div",{id:"taskBox"},l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",{id:"taskName"},v.name),l.a.createElement("span",{id:"description"},X()(z.makeHtml(v.description).replace(/(?:\r\n|\r|\n)/g,"<br>")))),H,l.a.createElement("br",null),l.a.createElement("br",null),V,J)))};var ue=function(e){var t;return void 0!=e.location.course_id?(t=e.location.course_id,localStorage.setItem("currentCourse",e.location.course_id)):t=localStorage.getItem("currentCourse"),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(me,{course_id:t,user_type:"teacher"})})};var de=function(e){var t;return void 0!=e.location.course_id?(t=e.location.course_id,localStorage.setItem("currentCourse",e.location.course_id)):t=localStorage.getItem("currentCourse"),l.a.createElement(b,{navtype:"student",body:l.a.createElement(me,{course_id:t,user_type:"student"})})};var pe=function(e){var t;void 0!=e.location.course_id?(t=e.location.course_id,localStorage.setItem("currentCourse",t)):t=localStorage.getItem("currentCourse");var a=l.a.useState([]),n=Object(o.a)(a,2),r=n[0],c=n[1],i=l.a.useContext(f);return C((function(){d.a.get("/topics/list",{params:{token:i}}).then((function(e){var t=e.data.topics;console.log(t),c(t)}))}),[],2),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Topics")),l.a.createElement("hr",null),l.a.createElement("form",{name:"addModuleForm",onSubmit:function(a){a.preventDefault();var n=a.target[0].value,l=a.target[1].value;d.a.post("/courses/topics/add",{token:i,course_id:t,topic_id:l,name:n}).then((function(t){var a=t.data;console.log(a),e.history.push("/courses/manage")})).catch((function(e){}))}},l.a.createElement("input",{type:"text",placeholder:"*Title",name:"name"}),l.a.createElement("br",null),l.a.createElement("select",{name:"topic"},r.map((function(e,t){var a=e.topic_id,n=e.name;return l.a.createElement("option",{value:a},n)}))),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Add Topic"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(s.b,{to:"/courses/manage"},"Cancel")))})};var Ee=function(e){var t,a=l.a.useContext(f);return void 0!=e.location.module_id?(t=e.location.module_id,localStorage.setItem("currentModule",t)):t=localStorage.getItem("currentModule"),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Courses")),l.a.createElement("hr",null),l.a.createElement("form",{name:"renameTopicForm",onSubmit:function(n){n.preventDefault();var l=n.target[0].value;d.a.put("/courses/topics/rename",{token:a,module_id:t,name:l}).then((function(t){var a=t.data;console.log(a),e.history.push("/courses/manage")}))}},l.a.createElement("input",{type:"text",defaultValue:e.location.module_name,name:"name"}),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Update Topic"}),l.a.createElement(s.b,{to:"/courses/manage"},"Cancel")))})};var he=function(){var e=l.a.useState([]),t=Object(o.a)(e,2),a=t[0],n=t[1],r=l.a.useContext(f);return C((function(){d.a.get("/classes/list",{params:{token:r}}).then((function(e){var t=e.data.classes;console.log(t),n(t)})).catch((function(e){}))}),[],2),l.a.createElement("div",null,l.a.createElement("table",{id:"classList"},l.a.createElement("tr",null,l.a.createElement("td",null,"Title"),l.a.createElement("td",null,"Year"),l.a.createElement("td",null,"Course"),l.a.createElement("td",null,"Teachers"),l.a.createElement("td",null,"Actions")),a.map((function(e,t){var a=e.class_id,n=e.name,c=e.year,o=e.course,i=e.teachers;return l.a.createElement("tr",null,l.a.createElement("td",null,n),l.a.createElement("td",null,c),l.a.createElement("td",null,l.a.createElement(s.b,{to:{pathname:"/courses/manage",course_id:o.course_id}},o.name)),l.a.createElement("td",null,i.map((function(e,t){return l.a.createElement(l.a.Fragment,null,e,t!=i.length-1?", ":"")}))),l.a.createElement("td",null,l.a.createElement(s.b,{to:{pathname:"/classes/manage",class_id:a}},"Manage "),l.a.createElement(s.b,{to:{pathname:"/classes/edit",class_id:a}},"Edit "),l.a.createElement(s.b,{onClick:function(){return function(e){d.a.delete("/classes/delete",{data:{token:r,class_id:e}}).then((function(e){e.data;window.location.reload()})).catch((function(e){}))}(a)}},"Delete")))}))))};var ge=function(e){return l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Classes"),l.a.createElement(s.b,{to:"/classes/add"},l.a.createElement("div",{className:"teacherButton"},"Add Class"))),l.a.createElement("hr",null),l.a.createElement(he,null))})};var ve=function(e){var t=l.a.useState([]),a=Object(o.a)(t,2),n=a[0],r=a[1],c=l.a.useContext(f);return C((function(){d.a.get("/classes/list",{params:{token:c}}).then((function(e){var t=e.data.classes;console.log(t),r(t)})).catch((function(e){}))}),[],2),l.a.createElement(b,{navtype:"student",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"All Classes")),l.a.createElement("hr",null),n.map((function(e,t){e.class_id;var a=e.course,n=e.name,r=e.teachers;e.progress;return l.a.createElement("div",{className:"enrolmentBox"},l.a.createElement("h3",null,n)," with ",r.map((function(e,t){return l.a.createElement(l.a.Fragment,null,e,t!=r.length-1?", ":""," ")})),l.a.createElement("div",{className:"studentButton"},l.a.createElement(s.b,{to:{pathname:"/courses/view/student",course_id:a.course_id}},"View Class")))})))})};var fe=function(e){var t=l.a.useContext(f),a=l.a.useState([]),n=Object(o.a)(a,2),r=n[0],c=n[1];return C((function(){d.a.get("/courses/list",{params:{token:t}}).then((function(e){var t=e.data.courses;console.log(t),c(t)}))}),[],2),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Classes")),l.a.createElement("hr",null),l.a.createElement("form",{name:"addClassForm",onSubmit:function(a){a.preventDefault();var n=a.target[0].value,l=a.target[1].value,r=a.target[2].value;d.a.post("/classes/add",{token:t,name:n,year:l,course:r}).then((function(t){var a=t.data;console.log(a),e.history.push("/classes")})).catch((function(e){}))}},l.a.createElement("input",{type:"text",placeholder:"*Title",name:"name"}),l.a.createElement("br",null),l.a.createElement("input",{type:"text",placeholder:"Year",defaultValue:"2020",name:"year"}),l.a.createElement("br",null),l.a.createElement("select",{name:"courses"},r.map((function(e,t){var a=e.course_id,n=e.name;return l.a.createElement("option",{value:a},n)}))),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Create Class"}),l.a.createElement(s.b,{to:"/classes"},"Cancel")))})};var be=function(e){var t,a,n=l.a.useState({class_id:0,name:"",year:"",teachers:[]}),r=Object(o.a)(n,2),c=r[0],i=r[1],m=l.a.useState(!1),u=Object(o.a)(m,2),p=u[0],E=u[1],h=l.a.useState([]),g=Object(o.a)(h,2),v=g[0],k=g[1],y=l.a.useContext(f),_=l.a.useState([]),w=Object(o.a)(_,2),S=w[0];return w[1],console.log(e.location.class_id),void 0!=e.location.class_id?(t=e.location.class_id,localStorage.setItem("currentClass",t)):t=localStorage.getItem("currentClass"),C((function(){d.a.get("/classes/details",{params:{token:y,class_id:t}}).then((function(e){var t=e.data.class;console.log(t),i(t)})).catch((function(e){}))}),[],1),C((function(){console.log(c.teachers);var e=c.class_id;d.a.get("/users/teachers/other",{params:{token:y,class_id:e}}).then((function(e){var t=e.data.teachers;console.log(t),k(t)})).catch((function(e){}))}),[],3),p?(console.log(v),a=l.a.createElement("div",{className:"attachment"},l.a.createElement("select",{name:"teacher"},v.map((function(e,t){var a=e.username,n=e.name;return l.a.createElement("option",{value:a},n)}))),l.a.createElement(s.b,{onClick:function(){E(!1)}},"Remove Teacher"))):a=l.a.createElement(l.a.Fragment,null),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Classes")),l.a.createElement("hr",null),l.a.createElement("div",{onClick:function(){E(!0)},class:"teacherButton"},"Add Teacher"),l.a.createElement("form",{name:"editClassForm",onSubmit:function(a){a.preventDefault();var n=a.target[0].value,l=a.target[1].value,r=[];console.log(c.teachers);for(var o=0;o<c.teachers.length;o++)console.log(S.includes(c.teachers[o])),1!=S.includes(c.teachers[o].username)&&r.push(c.teachers[o].username);p&&r.push(a.target[a.target.length-2].value),console.log(r,S),d.a.put("/classes/edit",{token:y,class_id:t,name:n,year:l,teachers:r}).then((function(t){var a=t.data;console.log(a),e.history.push("/classes")})).catch((function(e){}))}},l.a.createElement("input",{type:"text",defaultValue:c.name,name:"name"}),l.a.createElement("br",null),l.a.createElement("input",{type:"text",defaultValue:c.year,name:"year"}),l.a.createElement("br",null),l.a.createElement("div",{id:"teachers"},c.teachers.map((function(e,t){var a=e.username,n=e.name;return l.a.createElement("div",{className:"attachment",id:a},n,l.a.createElement("br",null),l.a.createElement(s.b,{onClick:function(){return function(e){S.push(e),document.getElementById(e).style.display="none"}(a)}},"Remove Teacher"))})),a),l.a.createElement("input",{type:"submit",value:"Update Class"}),l.a.createElement(s.b,{to:"/classes"},"Cancel")))})};var ke=function(e){var t=e.class_id,a=l.a.useState({class_id:0,name:"",course:0,teachers:[],students:[]}),n=Object(o.a)(a,2),r=n[0],c=n[1],i=l.a.useContext(f);return C((function(){d.a.get("/classes/details",{params:{token:i,class_id:t}}).then((function(e){var t=e.data.class;console.log(t),c(t)})).catch((function(e){}))}),[],1),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Classes")),l.a.createElement("hr",null),l.a.createElement("h4",null,"Title"),l.a.createElement("p",{id:"classTitle"},r.name),l.a.createElement("h4",null,"Course"),l.a.createElement(s.b,{id:"classCourse",to:{pathname:"/courses/manage",course_id:r.course.course_id}},r.course.name),l.a.createElement("h4",null,"Teachers"),l.a.createElement("p",{id:"classTeachers"},r.teachers.map((function(e,t){var a=e.name;return l.a.createElement(l.a.Fragment,null,a,t!=r.teachers.length-1?", ":"")}))),l.a.createElement("h2",null,"Students"),l.a.createElement("div",{class:"teacherButton",id:"progressReportButton"},l.a.createElement(s.b,{to:{pathname:"/classes/progress",course_id:r.course.course_id}},"Progress Report")),l.a.createElement("div",{class:"teacherButton"},l.a.createElement(s.b,{to:"/classes/enrolments/add"},"Add Enrolment")),l.a.createElement("div",{class:"teacherButton",id:"importEnrolmentsButton"},l.a.createElement(s.b,{to:"/classes/enrolments/import"},"Import Enrolments")),l.a.createElement("h",null),l.a.createElement("table",{id:"studentList"},l.a.createElement("tr",null,l.a.createElement("td",null,"Name"),l.a.createElement("td",null,"Student ID"),l.a.createElement("td",null,"Actions")),r.students.map((function(e,a){var n=e.username,r=e.name;return l.a.createElement("tr",null,l.a.createElement("td",null,r),l.a.createElement("td",null,n),l.a.createElement("td",null,l.a.createElement(s.b,{onClick:function(){return function(e){d.a.delete("/classes/enrolments/remove",{data:{token:i,class_id:t,username:e}}).then((function(e){e.data;window.location.reload()})).catch((function(e){}))}(n)}},"Remove")))}))))};var ye=function(e){var t;return void 0!=e.location.class_id?(t=e.location.class_id,localStorage.setItem("currentClass",t)):t=localStorage.getItem("currentClass"),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(ke,{class_id:t})})};var _e=function(e){var t,a=l.a.useContext(f),n=l.a.useState([]),r=Object(o.a)(n,2),c=r[0],i=r[1];return void 0!=e.location.class_id?(t=e.location.class_id,localStorage.setItem("currentClass",t)):t=localStorage.getItem("currentClass"),C((function(){d.a.get("/users/students/other",{params:{token:a,class_id:t}}).then((function(e){var t=e.data.students;console.log(t),i(t)})).catch((function(e){}))}),[],2),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h4",{id:"className"}),l.a.createElement("h1",null,"Classes")),l.a.createElement("hr",null),l.a.createElement("form",{name:"addEnrolmentForm",onSubmit:function(n){n.preventDefault();var l=n.target[0].value;d.a.post("/classes/enrolments/add",{token:a,class_id:t,username:l}).then((function(t){var a=t.data;console.log(a),e.history.push("/classes/manage")})).catch((function(e){}))}},l.a.createElement("select",{id:"students"},c.map((function(e,t){var a=e.username,n=e.name;return l.a.createElement("option",{value:a},n)}))),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Add Enrolment"}),l.a.createElement(s.b,{to:"/classes/manage"},"Cancel")))})};var we=function(e){var t,a=l.a.useContext(f),n=!1;return void 0!=e.location.class_id?(t=e.location.class_id,localStorage.setItem("currentClass",t)):t=localStorage.getItem("currentClass"),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h4",{id:"className"}),l.a.createElement("h1",null,"Classes")),l.a.createElement("hr",null),l.a.createElement("form",{name:"addEnrolmentForm",onSubmit:function(l){if(l.preventDefault(),n){var r=new FormData;r.append("token",a),r.append("class_id",t),r.append("file",n),d.a.post("/classes/enrolments/import",r,{headers:{"content-type":"multipart/form-data"}}).then((function(t){var a=t.data;console.log(a),e.history.push("/classes/manage")})).catch((function(e){}))}else console.log("No file chosen")}},l.a.createElement("div",{className:"notice"},"The file should be formatted as a CSV containing a single column of student ID values. There should be no header row."),l.a.createElement("input",{type:"file",name:"attachment",onChange:function(e){n=e.target.files[0]}}),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Import Students"}),l.a.createElement(s.b,{to:"/classes/manage"},"Cancel")))})};var Se=function(e){var t;void 0!=e.location.class_id?(t=e.location.class_id,localStorage.setItem("currentClass",t)):t=localStorage.getItem("currentClass");var a=l.a.useContext(f),n=l.a.useState({class_id:0,name:"",course:{topics:[]},teachers:[],students:[],progress:[]}),r=Object(o.a)(n,2),c=r[0],i=r[1],m=l.a.useState([]),u=Object(o.a)(m,2);return u[0],u[1],C((function(){d.a.get("/classes/details",{params:{token:a,class_id:t}}).then((function(e){var t=e.data.class;console.log(t),i(t)})).catch((function(e){}))}),[],1),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Progress Report")),l.a.createElement("div",{className:"teacherButton"},l.a.createElement(s.b,{to:{pathname:"/classes/progress/difficulty",class_id:t}},"Difficulty Report")),l.a.createElement("hr",null),l.a.createElement("h4",null,"Class"),l.a.createElement(s.b,{to:{pathname:"/classes/manage",class_id:c.class_id}},c.name),l.a.createElement("h4",null,"Course"),l.a.createElement(s.b,{to:{pathname:"/courses/manage",course_id:c.course.course_id}},c.course.name),l.a.createElement("table",{id:"topicProgress"},l.a.createElement("thead",null,l.a.createElement("td",null,l.a.createElement("h4",null,"Student")),c.course.topics.map((function(e,t){var a=e.topic_id,n=e.name;return l.a.createElement("td",{class:"topicName"},l.a.createElement(s.b,{to:{pathname:"/classes/topics/progress",class_id:c.class_id,topic_id:a}},n))}))),c.students.map((function(e,t){var a=e.username,n=e.name,r=e.progress;return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(s.b,{to:{pathname:"/students/progress",student_id:a,course_id:c.course.course_id,class_id:c.class_id}},n)),r.map((function(e,t){e.module;var a=e.progress;return l.a.createElement("td",null,l.a.createElement("div",{className:"progressDash"},l.a.createElement("div",{className:"unmarkedDash",style:{width:a.unmarked+"%"}}),l.a.createElement("div",{className:"correctDash",style:{width:a.correct+"%"}}),l.a.createElement("div",{className:"incorrectDash",style:{width:a.incorrect+"%"}})))})))}))))})};var Ce=function(e){var t,a;void 0!=e.location.class_id?(t=e.location.class_id,localStorage.setItem("currentClass",t)):t=localStorage.getItem("currentClass"),void 0!=e.location.topic_id?(a=e.location.topic_id,localStorage.setItem("currentTopic",a)):a=localStorage.getItem("currentTopic");var n=l.a.useState({class_id:0,name:"",course:{topics:[]},teachers:[],students:[],progress:[]}),r=Object(o.a)(n,2),c=r[0],i=r[1],m=l.a.useState({name:"",topic_id:0,taskgroups:[]}),u=Object(o.a)(m,2),p=u[0],E=u[1],h=l.a.useContext(f),g=function(){d.a.get("/classes/topic/details",{params:{token:h,class_id:t,topic_id:a}}).then((function(e){var t=e.data.class;console.log(t),i(t)})).catch((function(e){}))};return C(g,[],1),C((function(){d.a.get("/topics/details",{params:{token:h,topic_id:a}}).then((function(e){var t=e.data.topic;console.log(t),E(t),g()}))}),[],1),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Progress Report")),l.a.createElement("hr",null),l.a.createElement("h4",null,"Class"),l.a.createElement(s.b,{to:{pathname:"/classes/manage",class_id:c.class_id}},c.name),l.a.createElement("h4",null,"Course"),l.a.createElement(s.b,{to:{pathname:"/courses/manage",course_id:c.course.course_id}},c.course.name),l.a.createElement("h4",null,"Topic"),l.a.createElement(s.b,{to:{pathname:"/classes/progress",topic_id:p.topic_id,class_id:c.class_id}},p.name),l.a.createElement("table",{id:"taskgroupProgress"},l.a.createElement("thead",null,l.a.createElement("td",null,l.a.createElement("h4",null,"Student")),p.taskgroups.map((function(e,t){var a=e.taskgroup_id,n=e.name;return l.a.createElement("td",{class:"topicName"},l.a.createElement(s.b,{to:{pathname:"/classes/topics/taskgroups/progress",class_id:c.class_id,taskgroup_id:a}},n))}))),c.students.map((function(e,t){var a=e.username,n=e.name,r=e.progress;return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(s.b,{to:{pathname:"/students/progress",student_id:a,course_id:c.course.course_id,class_id:c.class_id}},n)),r.map((function(e,t){e.taskgroup;var a=e.progress;return l.a.createElement("td",null,l.a.createElement("div",{className:"progressDash"},l.a.createElement("div",{className:"unmarkedDash",style:{width:a.unmarked+"%"}}),l.a.createElement("div",{className:"correctDash",style:{width:a.correct+"%"}}),l.a.createElement("div",{className:"incorrectDash",style:{width:a.incorrect+"%"}})))})))}))))})};var Te=function(e){var t,a;void 0!=e.location.class_id?(t=e.location.class_id,localStorage.setItem("currentClass",t)):t=localStorage.getItem("currentClass"),void 0!=e.location.taskgroup_id?(a=e.location.taskgroup_id,localStorage.setItem("currentTaskgroup",a)):a=localStorage.getItem("currentTaskgroup");var n=l.a.useState({class_id:0,name:"",course:{topics:[]},teachers:[],students:[],progress:[]}),r=Object(o.a)(n,2),c=r[0],i=r[1],m=l.a.useState({name:"",taskgroup_id:0,tasks:[],topic:{name:"",topic_id:0}}),u=Object(o.a)(m,2),p=u[0],E=u[1],h=l.a.useContext(f);return C((function(e){d.a.get("/classes/taskgroup/details",{params:{token:h,class_id:t,taskgroup_id:a}}).then((function(e){var t=e.data.class;console.log(t),i(t)})).catch((function(e){}))}),[],1),C((function(){d.a.get("/taskgroups/details",{params:{token:h,taskgroup_id:a}}).then((function(e){var t=e.data.taskgroup;console.log(t),E(t)}))}),[],1),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Progress Report")),l.a.createElement("hr",null),l.a.createElement("h4",null,"Class"),l.a.createElement(s.b,{to:{pathname:"/classes/manage",class_id:c.class_id}},c.name),l.a.createElement("h4",null,"Course"),l.a.createElement(s.b,{to:{pathname:"/courses/manage",course_id:c.course.course_id}},c.course.name),l.a.createElement("h4",null,"Topic"),l.a.createElement(s.b,{to:{pathname:"/classes/progress",topic_id:p.topic.topic_id,class_id:c.class_id}},p.topic.name),l.a.createElement("h4",null,"Task Group"),p.name,l.a.createElement("table",{id:"taskProgress"},l.a.createElement("thead",null,l.a.createElement("td",null,l.a.createElement("h4",null,"Student")),p.tasks.map((function(e,t){e.taskgroup_id;var a=e.name,n=e.answer_type;return l.a.createElement(l.a.Fragment,null,"content"!=n?l.a.createElement("td",{className:"taskName"},l.a.createElement("h4",null,a)):l.a.createElement(l.a.Fragment,null))})),l.a.createElement("td",null,l.a.createElement("h4",null,"Submitted")),l.a.createElement("td",null,l.a.createElement("h4",null,"Correct"))),c.students.map((function(e,t){var a=e.username,n=e.name,r=e.progress;e.submitted,e.correct,e.total;return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(s.b,{to:{pathname:"/students/progress",student_id:a,course_id:c.course.course_id,class_id:c.class_id}},n)),r.tasks.map((function(e,t){var a=e.task,n=e.submissions;return l.a.createElement(l.a.Fragment,null,"content"!=function(e){for(var t=0;t<p.tasks.length;t++)if(p.tasks[t].task_id==e)return p.tasks[t].answer_type}(a)?l.a.createElement("td",null,l.a.createElement("div",{className:"progressDash"},0!=n.length?l.a.createElement(s.b,{to:{pathname:"/submissions/mark",submission_id:n[0].submission_id}},l.a.createElement("div",{className:n[0].status+"Dash",style:{width:"100%",color:"white"}},"View Submission")):l.a.createElement(l.a.Fragment,null))):l.a.createElement(l.a.Fragment,null))})),l.a.createElement("td",null,r.submitted," / ",r.total," (",Math.round(100*r.submitted/r.total,2)," %)"),l.a.createElement("td",null,r.correct," / ",r.total," (",Math.round(100*r.correct/r.total,2)," %)"))}))))})};var xe=function(e){var t;void 0!=e.location.submission_id?(t=e.location.submission_id,localStorage.setItem("currentSubmission",t)):t=localStorage.getItem("currentSubmission");var a=l.a.useContext(f),n=l.a.useState({submission_id:0,comment:"",files:[],status:"",task:{description:"",solution:"",answer_type:"",choices:[]},url:"",selected_answer:-1}),r=Object(o.a)(n,2),c=r[0],i=r[1],m=l.a.useState(c.task.description),u=Object(o.a)(m,2),p=u[0],E=u[1];function h(){E(c.task.description);var e=document.getElementById("showTask"),t=document.getElementById("showSolution");e.style.borderTop="1px solid lightgray",e.style.borderLeft="1px solid lightgray",e.style.borderRight="1px solid lightgray",t.style.border="0px"}function g(){E(c.task.solution);var e=document.getElementById("showTask"),t=document.getElementById("showSolution");t.style.borderTop="1px solid lightgray",t.style.borderLeft="1px solid lightgray",t.style.borderRight="1px solid lightgray",e.style.border="0px"}function v(e){d.a.put("/submissions/mark",{token:a,submission_id:t,status:e}).then((function(e){var t=e.data;console.log(t),window.location.reload()}))}C((function(){d.a.get("/submissions/details",{params:{token:a,submission_id:t}}).then((function(e){var t=e.data.submission;console.log(t),i(t)})).catch((function(e){}))}),[],1);var k,y=new $.Converter;return"multiple-choice-single"==c.task.answer_type?k=l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Answer"),c.task.choices.map((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"radio",name:"givenAnswer",id:"answer"+(t+1),checked:t==c.selected_answer}),l.a.createElement("label",{for:"answer"+(t+1)},e),l.a.createElement("br",null))})),l.a.createElement("br",null),l.a.createElement("h4",null,"Correct Answer"),c.task.choices.map((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"radio",name:"correctAnswer",id:"answer"+(t+1),checked:t==c.task.correct_answer}),l.a.createElement("label",{for:"answer"+(t+1)},e),l.a.createElement("br",null))})),l.a.createElement("br",null),l.a.createElement("strong",null,"Status"),": ",c.status,l.a.createElement("div",{id:"topicTabs"},l.a.createElement("div",{className:"topicTab",id:"showTask",onClick:h},"Task"),l.a.createElement("div",{className:"topicTab",id:"showSolution",onClick:g},"Solution")),l.a.createElement("div",{className:"studentButton",onClick:function(){return v(c.selected_answer==c.task.correct_answer?"correct":"incorrect")}},"Mark")):"multiple-choice-multiple"==c.task.answer_type?k=l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Answer"),c.task.choices.map((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"checkbox",name:"givenAnswer",id:"answer"+(t+1),checked:c.selected_answer.includes(t)}),l.a.createElement("label",{for:"answer"+(t+1)},e),l.a.createElement("br",null))})),l.a.createElement("br",null),l.a.createElement("h4",null,"Correct Answer"),c.task.choices.map((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"checkbox",name:"correctAnswer",id:"answer"+(t+1),checked:c.task.correct_answer.includes(t)}),l.a.createElement("label",{for:"answer"+(t+1)},e),l.a.createElement("br",null))})),l.a.createElement("br",null),l.a.createElement("strong",null,"Status"),": ",c.status,l.a.createElement("div",{id:"topicTabs"},l.a.createElement("div",{className:"topicTab",id:"showTask",onClick:h},"Task"),l.a.createElement("div",{className:"topicTab",id:"showSolution",onClick:g},"Solution")),l.a.createElement("div",{className:"studentButton",onClick:function(){return v(function(e,t){if(e.length!=t.length)return!1;for(var a=0;a<e.length;a++)if(e[a]!=t[a])return!1;return!0}(c.selected_answer.sort(),c.task.correct_answer.sort())?"correct":"incorrect")}},"Mark")):"standard"==c.task.answer_type?k=l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Submission"),c.files.map((function(e,t){var a=e.url,n=e.cover_name;return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{href:a},n),l.a.createElement("br",null))})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("strong",null,"Status"),": ",c.status,l.a.createElement("div",{id:"topicTabs"},l.a.createElement("div",{className:"topicTab",id:"showTask",onClick:h},"Task"),l.a.createElement("div",{className:"topicTab",id:"showSolution",onClick:g},"Solution")),l.a.createElement("div",{className:"greenTeacherButton",onClick:function(){return v("correct")}},"Correct"),l.a.createElement("div",{className:"redTeacherButton",onClick:function(){return v("incorrect")}},"Incorrect")):"short-answer"==c.task.answer_type&&(k=l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Submission"),l.a.createElement("p",null,c.selected_answer),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("strong",null,"Status"),": ",c.status,l.a.createElement("div",{id:"topicTabs"},l.a.createElement("div",{className:"topicTab",id:"showTask",onClick:h},"Task"),l.a.createElement("div",{className:"topicTab",id:"showSolution",onClick:g},"Solution")),l.a.createElement("div",{className:"greenTeacherButton",onClick:function(){return v("correct")}},"Correct"),l.a.createElement("div",{className:"redTeacherButton",onClick:function(){return v("incorrect")}},"Incorrect"))),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"headerSection"},l.a.createElement("h1",null,"Submissions")),l.a.createElement("hr",null),l.a.createElement("div",{className:"viewSubmission"},l.a.createElement("div",{className:"teacherButton",id:"closeWindow",onClick:function(){return v("unmarked")}},"Reset Marking"),l.a.createElement("h4",null,"Task"),c.task.name,k,l.a.createElement("div",{id:"taskSolutionContent"},X()(y.makeHtml(p).replace(/(?:\r\n|\r|\n)/g,"<br>"))),l.a.createElement("h4",null,"Comments"),l.a.createElement("form",{name:"addCommentForm",onSubmit:function(e){e.preventDefault();var n=e.target[0].value;d.a.post("/submissions/comment",{token:a,submission_id:t,comment:n}).then((function(e){var t=e.data;console.log(t),window.location.reload()}))}},l.a.createElement("input",{type:"text",name:"comment",defaultValue:c.comment}),l.a.createElement("input",{type:"submit",value:"Add Comment"})),l.a.createElement(s.b,{to:"/classes/topics/taskgroups/progress"},"Back")))})};var Ne=function(e){var t;void 0!=e.location.class_id?(t=e.location.class_id,localStorage.setItem("currentClass",t)):t=localStorage.getItem("currentClass");var a=l.a.useContext(f),n=l.a.useState({class_id:0,name:"",course:{topics:[]},teachers:[],students:[],progress:[]}),r=Object(o.a)(n,2),c=r[0],i=r[1],m=l.a.useState([]),u=Object(o.a)(m,2);return u[0],u[1],C((function(){d.a.get("/classes/details",{params:{token:a,class_id:t}}).then((function(e){var t=e.data.class;console.log(t),i(t)})).catch((function(e){}))}),[],1),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Difficulty Report")),l.a.createElement("div",{className:"teacherButton"},l.a.createElement(s.b,{to:{pathname:"/classes/progress/",class_id:t}},"Progress Report")),l.a.createElement("hr",null),l.a.createElement("h4",null,"Class"),l.a.createElement(s.b,{to:{pathname:"/classes/manage",class_id:c.class_id}},c.name),l.a.createElement("h4",null,"Course"),l.a.createElement(s.b,{to:{pathname:"/courses/manage",course_id:c.course.course_id}},c.course.name),l.a.createElement("table",{id:"topicProgress"},l.a.createElement("thead",null,l.a.createElement("td",null,l.a.createElement("h4",null,"Student")),c.course.topics.map((function(e,t){e.topic_id;var a=e.name;return l.a.createElement("td",{class:"topicName"},l.a.createElement("h4",null,a))})),l.a.createElement("td",null,"Course")),c.students.map((function(e,t){e.username;var a=e.name,n=(e.progress,e.difficulty);return l.a.createElement("tr",null,l.a.createElement("td",null,a),n.topics.map((function(e,t){e.module;var a=e.progress;return l.a.createElement("td",null,l.a.createElement("div",{className:"progressBlock"},null!=a.Bronze?l.a.createElement("div",{className:"progressSlice"},l.a.createElement("div",{className:"difficultyBronze",style:{width:a.Bronze+"%"}})):l.a.createElement(l.a.Fragment,null),null!=a.Silver?l.a.createElement("div",{className:"progressSlice"},l.a.createElement("div",{className:"difficultySilver",style:{width:a.Silver+"%"}})):l.a.createElement(l.a.Fragment,null),null!=a.Gold?l.a.createElement("div",{className:"progressSlice"},l.a.createElement("div",{className:"difficultyGold",style:{width:a.Gold+"%"}})):l.a.createElement(l.a.Fragment,null),null!=a.Platinum?l.a.createElement("div",{className:"progressSlice"},l.a.createElement("div",{className:"difficultyPlatinum",style:{width:a.Platinum+"%"}})):l.a.createElement(l.a.Fragment,null),null!=a.Kryptonite?l.a.createElement("div",{className:"progressSlice"},l.a.createElement("div",{className:"difficultyKryptonite",style:{width:a.Kryptonite+"%"}})):l.a.createElement(l.a.Fragment,null)))})),l.a.createElement("td",null,l.a.createElement("div",{className:"progressBlock"},null!=n.course.Bronze?l.a.createElement("div",{className:"progressSlice"},l.a.createElement("div",{className:"difficultyBronze",style:{width:n.course.Bronze+"%"}})):l.a.createElement(l.a.Fragment,null),null!=n.course.Silver?l.a.createElement("div",{className:"progressSlice"},l.a.createElement("div",{className:"difficultySilver",style:{width:n.course.Silver+"%"}})):l.a.createElement(l.a.Fragment,null),null!=n.course.Gold?l.a.createElement("div",{className:"progressSlice"},l.a.createElement("div",{className:"difficultyGold",style:{width:n.course.Gold+"%"}})):l.a.createElement(l.a.Fragment,null),null!=n.course.Platinum?l.a.createElement("div",{className:"progressSlice"},l.a.createElement("div",{className:"difficultyPlatinum",style:{width:n.course.Platinum+"%"}})):l.a.createElement(l.a.Fragment,null),null!=n.course.Kryptonite?l.a.createElement("div",{className:"progressSlice"},l.a.createElement("div",{className:"difficultyKryptonite",style:{width:n.course.Kryptonite+"%"}})):l.a.createElement(l.a.Fragment,null))))}))))})};var Fe=function(e){var t,a,n;void 0!=e.location.course_id?(t=e.location.course_id,localStorage.setItem("currentCourse",e.location.course_id)):t=localStorage.getItem("currentCourse"),void 0!=e.location.student_id?(a=e.location.student_id,localStorage.setItem("currentStudent",e.location.student_id)):a=localStorage.getItem("currentStudent"),void 0!=e.location.class_id?(n=e.location.class_id,localStorage.setItem("currentClass",e.location.class_id)):n=localStorage.getItem("currentClass");var r=l.a.useState(""),c=Object(o.a)(r,2),i=c[0],m=c[1],u=l.a.useState({course_id:0,name:"",modules:[],classname:""}),p=Object(o.a)(u,2),E=p[0],h=p[1],g=l.a.useState({topic_id:0,module_id:0,module_name:"",taskgroups:[]}),v=Object(o.a)(g,2),k=v[0],y=v[1],_=l.a.useState({task_id:0,taskgroup:"",name:"",difficulty:"",description:"",hint:"",solution:"",attachments:[]}),w=Object(o.a)(_,2),S=w[0],T=w[1],x=l.a.useState([]),N=Object(o.a)(x,2),F=N[0],B=N[1],I=l.a.useState([]),D=Object(o.a)(I,2),A=D[0],O=D[1],L=l.a.useContext(f);function j(e){for(var t=document.getElementById("topicTabs").childNodes,a=0;a<t.length;a++)t[a].id=="md"+e?(t[a].style.borderTop="1px solid lightgray",t[a].style.borderLeft="1px solid lightgray",t[a].style.borderRight="1px solid lightgray"):t[a].style.border="0px";var n=function(e){for(var t=0;t<E.modules.length;t++)if(E.modules[t].module_id==e)return E.modules[t]}(e);y(n)}function M(e,t,a){var n=function(e,t,a){for(var n=0;n<E.modules.length;n++)if(E.modules[n].module_id==e)for(var l=0;l<E.modules[n].taskgroups.length;l++)if(E.modules[n].taskgroups[l].taskgroup_id==t)for(var r=0;r<E.modules[n].taskgroups[l].tasks.length;r++)if(E.modules[n].taskgroups[l].tasks[r].task_id==a)return E.modules[n].taskgroups[l].tasks[r]}(e,t,a);console.log(n),T(n)}function R(e){for(var t=[],a=0;a<F.length;a++)F[a].task==e&&t.push(F[a]);return console.log("subs",t),t.length>0?t[t.length-1].status:""}C((function(){d.a.get("/courses/details/class",{params:{token:L,course_id:t,class_id:n}}).then((function(e){var t=e.data.course;console.log(t),h(t)})).catch((function(e){}))}),[],2),C((function(){S.task_id,d.a.get("/courses/submissions/student",{params:{token:L,course_id:t,student_id:a}}).then((function(e){var t=e.data.submissions,a=e.data.progress,n=e.data.name;console.log(t),console.log(a),B(t),O(a),m(n)})).catch((function(e){}))}),[],2),new $.Converter;var G,P=function(){for(var e=[],t=0;t<F.length;t++)F[t].tasks.includes(S.task_id)&&e.push(F[t]);return e}();if(0!=S.task_id)if("multiple-choice-single"==S.answer_type){if(P.length>0){var H=P[P.length-1].selected_answer,U=P[P.length-1].status;G=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"submissionBox"},l.a.createElement("div",{className:"submissionDisplay",name:U},S.choices.map((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"radio",name:"correctAnswer",id:"answer"+(t+1),checked:t==H}),l.a.createElement("label",{for:"answer"+(t+1)},e),l.a.createElement("br",null))})))))}}else P.length>0&&(G=l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Submissions"),P.map((function(e,t){e.time;var a=e.status,n=e.url,r=e.comment;return l.a.createElement("div",{className:"submissionDisplay",name:a},r,l.a.createElement("strong",null," ",a)," ",l.a.createElement("a",{href:n},"Download"))}))));return l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,l.a.createElement("h1",{id:"courseName"},"Student")),l.a.createElement("hr",null),l.a.createElement("h4",null,"Name"),i,l.a.createElement("h4",null,"Class"),l.a.createElement(s.b,{to:{pathname:"/classes/topics/progress",class_id:n}},E.classname),l.a.createElement("table",{id:"topicProgress"},l.a.createElement("tr",null,E.modules.map((function(e,t){var a=e.module_name;return l.a.createElement("td",null,a)}))),l.a.createElement("tr",{id:"progressDashRow"},A.map((function(e,t){e.unmarked,e.correct,e.incorrect;var a=e.progress;return l.a.createElement("td",null,l.a.createElement("div",{className:"progressDash"},l.a.createElement("div",{className:"unmarkedDash",style:{width:a.unmarked+"%"}}),l.a.createElement("div",{className:"correctDash",style:{width:a.correct+"%"}}),l.a.createElement("div",{className:"incorrectDash",style:{width:a.incorrect+"%"}})))})))),l.a.createElement("div",{id:"topicTabs"},E.modules.map((function(e,t){var a=e.module_id,n=e.module_name;e.topic_id;return l.a.createElement("div",{class:"topicTab",id:"md"+a,onClick:function(){return j(a)}},n)}))),l.a.createElement("div",{id:"taskGroupBox"},l.a.createElement("div",{id:"taskgroupList"},k.taskgroups.map((function(e,t){var a=e.taskgroup_id,n=e.name,r=e.tasks;return l.a.createElement("span",{className:"taskGroupList",name:"undisplayed",id:"tg"+a},l.a.createElement("span",{className:"taskGroupName",onClick:function(){return function(e){var t=document.getElementById("tg"+e),a=t.childNodes;if(console.log(t.name),"undisplayed"==t.name||void 0==t.name){for(var n=1;n<a.length;n++)a[n].style.display="block",console.log(a[n].style.display);t.name="displayed"}else if("displayed"==t.name){for(n=1;n<a.length;n++)a[n].style.display="none";t.name="undisplayed"}}(a)}},n),r.map((function(e,t){var n=e.task_id,r=e.name,c=e.difficulty;return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{style:{display:"none"},id:"tk"+n,onClick:function(){return M(k.module_id,a,n)},className:c,name:R(n)},r))})))}))),l.a.createElement("div",{id:"taskBox"},l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,S.name)),l.a.createElement("br",null),l.a.createElement("br",null),G)))})};var Be=function(e){var t=l.a.useState([]),a=Object(o.a)(t,2),n=a[0],r=a[1],c=l.a.useState([]),i=Object(o.a)(c,2),m=i[0],u=i[1],p=l.a.useContext(f);function E(e){d.a.delete("/users/delete",{data:{token:p,username:e}}).then((function(e){e.data})).catch((function(e){}))}return C((function(){d.a.get("/users/listall",{params:{token:p}}).then((function(e){var t=e.data.students,a=e.data.teachers;r(t),u(a)}))}),[],1),l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h1",null,"Users")),l.a.createElement("h2",null,"Teachers"),l.a.createElement(s.b,{to:{pathname:"/users/import",importType:"teacher"}},l.a.createElement("div",{className:"teacherButton"},"Import Teachers")),l.a.createElement("hr",null),l.a.createElement("table",{id:"teacherList"},l.a.createElement("thead",null,l.a.createElement("td",null,"Username"),l.a.createElement("td",null,"Name"),l.a.createElement("td",null,"Classes"),l.a.createElement("td",null,"Actions")),m.map((function(e,t){var a=e.username,n=e.name,r=e.classes;return l.a.createElement("tr",null,l.a.createElement("td",null,a),l.a.createElement("td",null,n),l.a.createElement("td",null,r.map((function(e,t){return l.a.createElement(l.a.Fragment,null,e,t!=r.length-1?", ":"")}))),l.a.createElement("td",null,l.a.createElement(s.b,{onClick:function(){return E(a)}},"Delete")))}))),l.a.createElement("h2",null,"Students"),l.a.createElement(s.b,{to:{pathname:"/users/import",importType:"student"}},l.a.createElement("div",{className:"teacherButton"},"Import Students")),l.a.createElement("hr",null),l.a.createElement("table",{id:"studentList"},l.a.createElement("thead",null,l.a.createElement("td",null,"Username"),l.a.createElement("td",null,"Name"),l.a.createElement("td",null,"Classes"),l.a.createElement("td",null,"Actions")),n.map((function(e,t){var a=e.username,n=e.name,r=e.classes;return l.a.createElement("tr",null,l.a.createElement("td",null,a),l.a.createElement("td",null,n),l.a.createElement("td",null,r.map((function(e,t){return l.a.createElement(l.a.Fragment,null,e,t!=r.length-1?", ":"")}))),l.a.createElement("td",null,l.a.createElement(s.b,{onClick:function(){return E(a)}},"Delete")))}))))})};var Ie=function(e){var t,a=l.a.useContext(f),n=!1;return t=void 0!=e.location.importType?e.location.importType:"student",l.a.createElement(b,{navtype:"teacher",body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h4",{id:"className"}),l.a.createElement("h1",null,"Users")),l.a.createElement("hr",null),l.a.createElement("form",{name:"addImportForm",onSubmit:function(l){if(l.preventDefault(),n){var r=new FormData;r.append("token",a),r.append("type",t),r.append("file",n),d.a.post("/users/import",r,{headers:{"content-type":"multipart/form-data"}}).then((function(t){var a=t.data;console.log(a),e.history.push("/users")})).catch((function(e){}))}else console.log("No file chosen")}},l.a.createElement("div",{className:"notice"},"The file should be formatted as a CSV containing column of ",t," username values and a column of names. There should be no header row."),l.a.createElement("input",{type:"file",name:"attachment",onChange:function(e){n=e.target.files[0]}}),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Import "+t.charAt(0).toUpperCase()+t.slice(1)+"s"}),l.a.createElement("br",null),l.a.createElement(s.b,{to:"/users"},"Cancel")))})},De=a(8);var Ae=function(e){var t,a,n,r,c=l.a.useContext(f);return r=void 0!=e.location.userType?e.location.userType:"student",l.a.createElement(b,{navtype:r,body:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"headerSection"},l.a.createElement("h4",{id:"className"}),l.a.createElement("h1",null,"Settings")),l.a.createElement("hr",null),l.a.createElement("form",{name:"passwordChangeForm",onSubmit:function(t){t.preventDefault();var a=t.target[0].value,n=t.target[1].value,l=t.target[2].value;d.a.put("/user/password",{token:c,old_password:a,new_password:n,confirm_password:l}).then((function(t){var a=t.data.type;console.log(a),e.history.push("/"+a)})).catch((function(e){}))}},l.a.createElement("h4",null,"Change Password"),l.a.createElement("br",null),l.a.createElement("input",(t={type:"text"},Object(De.a)(t,"type","password"),Object(De.a)(t,"name","oldPassword"),Object(De.a)(t,"placeholder","Old Password"),t)),l.a.createElement("br",null),l.a.createElement("input",(a={type:"text"},Object(De.a)(a,"type","password"),Object(De.a)(a,"name","newPassword"),Object(De.a)(a,"placeholder","New Password"),a)),l.a.createElement("br",null),l.a.createElement("input",(n={type:"text"},Object(De.a)(n,"type","password"),Object(De.a)(n,"name","newPasswordConfirm"),Object(De.a)(n,"placeholder","Confirm New Password"),n)),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Update Password"}),l.a.createElement("br",null)))})};var Oe=function(e){return l.a.useContext(f)?l.a.createElement(i.b,e):l.a.createElement(i.a,{to:"/login"})};var Le=function(){var e=l.a.useState(localStorage.getItem("token")),t=Object(o.a)(e,2),a=t[0],n=t[1];function r(e,t){localStorage.setItem("token",e),localStorage.setItem("username",t),n(e)}return l.a.createElement(v,{value:a},l.a.createElement(s.a,null,l.a.createElement(i.d,null,l.a.createElement(i.b,{path:"/login",render:function(e){return l.a.createElement(k,Object.assign({},e,{setAuth:r}))}}),l.a.createElement(Oe,{exact:!0,path:"/teacher",component:T}),l.a.createElement(Oe,{exact:!0,path:"/topics",component:F}),l.a.createElement(Oe,{exact:!0,path:"/topics/add",component:B}),l.a.createElement(Oe,{exact:!0,path:"/topics/edit",component:A}),l.a.createElement(Oe,{exact:!0,path:"/topics/manage",component:K}),l.a.createElement(Oe,{exact:!0,path:"/taskgroups/add",component:q}),l.a.createElement(Oe,{exact:!0,path:"/taskgroups/edit",component:W}),l.a.createElement(Oe,{exact:!0,path:"/taskgroups/move",component:Y}),l.a.createElement(Oe,{exact:!0,path:"/tasks/add",component:J}),l.a.createElement(Oe,{exact:!0,path:"/tasks/view",component:Z}),l.a.createElement(Oe,{exact:!0,path:"/tasks/edit",component:ee}),l.a.createElement(Oe,{exact:!0,path:"/tasks/attachments",component:ne}),l.a.createElement(Oe,{exact:!0,path:"/tasks/move",component:te}),l.a.createElement(Oe,{exact:!0,path:"/courses",component:re}),l.a.createElement(Oe,{exact:!0,path:"/courses/add",component:ce}),l.a.createElement(Oe,{exact:!0,path:"/courses/edit",component:oe}),l.a.createElement(Oe,{exact:!0,path:"/courses/manage",component:ie}),l.a.createElement(Oe,{exact:!0,path:"/courses/topics/add",component:pe}),l.a.createElement(Oe,{exact:!0,path:"/courses/topics/rename",component:Ee}),l.a.createElement(Oe,{exact:!0,path:"/courses/view/teacher",component:ue}),l.a.createElement(Oe,{exact:!0,path:"/classes",component:ge}),l.a.createElement(Oe,{exact:!0,path:"/classes/add",component:fe}),l.a.createElement(Oe,{exact:!0,path:"/classes/edit",component:be}),l.a.createElement(Oe,{exact:!0,path:"/classes/manage",component:ye}),l.a.createElement(Oe,{exact:!0,path:"/classes/enrolments/add",component:_e}),l.a.createElement(Oe,{exact:!0,path:"/classes/enrolments/import",component:we}),l.a.createElement(Oe,{exact:!0,path:"/student",component:x}),l.a.createElement(Oe,{exact:!0,path:"/courses/view/student",component:de}),l.a.createElement(Oe,{exact:!0,path:"/classes/view/student",component:ve}),l.a.createElement(Oe,{exact:!0,path:"/classes/progress",component:Se}),l.a.createElement(Oe,{exact:!0,path:"/classes/topics/progress",component:Ce}),l.a.createElement(Oe,{exact:!0,path:"/classes/topics/taskgroups/progress",component:Te}),l.a.createElement(Oe,{exact:!0,path:"/submissions/mark",component:xe}),l.a.createElement(Oe,{exact:!0,path:"/classes/progress/difficulty",component:Ne}),l.a.createElement(Oe,{exact:!0,path:"/students/progress",component:Fe}),l.a.createElement(Oe,{exact:!0,path:"/users",component:Be}),l.a.createElement(Oe,{exact:!0,path:"/users/import",component:Ie}),l.a.createElement(Oe,{exact:!0,path:"/user/settings",component:Ae}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(Le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},4:function(e,t,a){},61:function(e,t,a){e.exports=a(324)},66:function(e,t,a){}},[[61,1,2]]]);
//# sourceMappingURL=main.06e7be67.chunk.js.map